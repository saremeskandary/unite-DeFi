{"name":"TonFusion","code":"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","abi":"{\"name\":\"TonFusion\",\"types\":[{\"name\":\"DataSize\",\"header\":null,\"fields\":[{\"name\":\"cells\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"bits\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"refs\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}}]},{\"name\":\"SignedBundle\",\"header\":null,\"fields\":[{\"name\":\"signature\",\"type\":{\"kind\":\"simple\",\"type\":\"fixed-bytes\",\"optional\":false,\"format\":64}},{\"name\":\"signedData\",\"type\":{\"kind\":\"simple\",\"type\":\"slice\",\"optional\":false,\"format\":\"remainder\"}}]},{\"name\":\"StateInit\",\"header\":null,\"fields\":[{\"name\":\"code\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":false}},{\"name\":\"data\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":false}}]},{\"name\":\"Context\",\"header\":null,\"fields\":[{\"name\":\"bounceable\",\"type\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"sender\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"value\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"raw\",\"type\":{\"kind\":\"simple\",\"type\":\"slice\",\"optional\":false}}]},{\"name\":\"SendParameters\",\"header\":null,\"fields\":[{\"name\":\"mode\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"body\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":true}},{\"name\":\"code\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":true}},{\"name\":\"data\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":true}},{\"name\":\"value\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"to\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"bounce\",\"type\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}}]},{\"name\":\"MessageParameters\",\"header\":null,\"fields\":[{\"name\":\"mode\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"body\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":true}},{\"name\":\"value\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"to\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"bounce\",\"type\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}}]},{\"name\":\"DeployParameters\",\"header\":null,\"fields\":[{\"name\":\"mode\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"body\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":true}},{\"name\":\"value\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"bounce\",\"type\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"init\",\"type\":{\"kind\":\"simple\",\"type\":\"StateInit\",\"optional\":false}}]},{\"name\":\"StdAddress\",\"header\":null,\"fields\":[{\"name\":\"workchain\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":8}},{\"name\":\"address\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":256}}]},{\"name\":\"VarAddress\",\"header\":null,\"fields\":[{\"name\":\"workchain\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":32}},{\"name\":\"address\",\"type\":{\"kind\":\"simple\",\"type\":\"slice\",\"optional\":false}}]},{\"name\":\"BasechainAddress\",\"header\":null,\"fields\":[{\"name\":\"hash\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":true,\"format\":257}}]},{\"name\":\"Deploy\",\"header\":2490013878,\"fields\":[{\"name\":\"queryId\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}}]},{\"name\":\"DeployOk\",\"header\":2952335191,\"fields\":[{\"name\":\"queryId\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}}]},{\"name\":\"FactoryDeploy\",\"header\":1829761339,\"fields\":[{\"name\":\"queryId\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}},{\"name\":\"cashback\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}}]},{\"name\":\"LockJetton\",\"header\":4111661023,\"fields\":[{\"name\":\"orderConfig\",\"type\":{\"kind\":\"simple\",\"type\":\"OrderConfig\",\"optional\":false}},{\"name\":\"jetton\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":false}},{\"name\":\"customPayload\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":true}}]},{\"name\":\"CreateOrder\",\"header\":1935855772,\"fields\":[{\"name\":\"orderConfig\",\"type\":{\"kind\":\"simple\",\"type\":\"Order\",\"optional\":false}},{\"name\":\"jetton\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":false}},{\"name\":\"customPayload\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":true}}]},{\"name\":\"CreateEVMToTONOrder\",\"header\":2335447074,\"fields\":[{\"name\":\"orderConfig\",\"type\":{\"kind\":\"simple\",\"type\":\"OrderConfig\",\"optional\":false}},{\"name\":\"evmContractAddress\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":false}},{\"name\":\"customPayload\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":true}}]},{\"name\":\"CreateTONToEVMOrder\",\"header\":1646500216,\"fields\":[{\"name\":\"orderConfig\",\"type\":{\"kind\":\"simple\",\"type\":\"OrderConfig\",\"optional\":false}},{\"name\":\"evmContractAddress\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":false}},{\"name\":\"customPayload\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":true}}]},{\"name\":\"PartialFill\",\"header\":1324731174,\"fields\":[{\"name\":\"orderHash\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":256}},{\"name\":\"secret\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":256}},{\"name\":\"fillAmount\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}},{\"name\":\"resolver\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"customPayload\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":true}}]},{\"name\":\"CompletePartialFill\",\"header\":2054917277,\"fields\":[{\"name\":\"orderHash\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":256}},{\"name\":\"secret\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":256}}]},{\"name\":\"EVMCrossChainMessage\",\"header\":2592832621,\"fields\":[{\"name\":\"targetChainId\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":32}},{\"name\":\"targetContract\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":false}},{\"name\":\"functionSelector\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":32}},{\"name\":\"parameters\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":false}},{\"name\":\"gasLimit\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":32}},{\"name\":\"value\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}},{\"name\":\"customPayload\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":true}}]},{\"name\":\"EVMContractDeploy\",\"header\":1582251308,\"fields\":[{\"name\":\"targetChainId\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":32}},{\"name\":\"contractBytecode\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":false}},{\"name\":\"constructorParams\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":false}},{\"name\":\"gasLimit\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":32}},{\"name\":\"value\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}},{\"name\":\"customPayload\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":true}}]},{\"name\":\"EVMBridgeConfirmation\",\"header\":523124044,\"fields\":[{\"name\":\"bridgeId\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":32}},{\"name\":\"transactionHash\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":false}},{\"name\":\"blockNumber\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}},{\"name\":\"confirmations\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":32}},{\"name\":\"customPayload\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":true}}]},{\"name\":\"EVMOraclePriceUpdate\",\"header\":2359103007,\"fields\":[{\"name\":\"oracleId\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":32}},{\"name\":\"tokenAddress\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"price\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}},{\"name\":\"timestamp\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":32}},{\"name\":\"customPayload\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":true}}]},{\"name\":\"EVMChainValidation\",\"header\":759058266,\"fields\":[{\"name\":\"chainId\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":32}},{\"name\":\"blockNumber\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}},{\"name\":\"gasPrice\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}},{\"name\":\"customPayload\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":true}}]},{\"name\":\"DeployEscrow\",\"header\":1499400124,\"fields\":[{\"name\":\"chainId\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":32}},{\"name\":\"targetAddress\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"customPayload\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":true}}]},{\"name\":\"EscrowDeployed\",\"header\":2078119902,\"fields\":[{\"name\":\"chainId\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":32}},{\"name\":\"contractAddress\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"success\",\"type\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"customPayload\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":true}}]},{\"name\":\"RegisterRelayer\",\"header\":1935855774,\"fields\":[{\"name\":\"relayer\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"customPayload\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":true}}]},{\"name\":\"UpdateRelayerStats\",\"header\":1935855775,\"fields\":[{\"name\":\"relayer\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"success\",\"type\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"customPayload\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":true}}]},{\"name\":\"GetFund\",\"header\":1348689874,\"fields\":[{\"name\":\"secret\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":256}},{\"name\":\"hash\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":256}},{\"name\":\"customPayload\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":true}}]},{\"name\":\"Refund\",\"header\":3835567563,\"fields\":[{\"name\":\"hash\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":256}},{\"name\":\"customPayload\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":true}}]},{\"name\":\"RefundOrder\",\"header\":1935855773,\"fields\":[{\"name\":\"hash\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":256}},{\"name\":\"customPayload\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":true}}]},{\"name\":\"SetWhiteList\",\"header\":2844130808,\"fields\":[{\"name\":\"resolver\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"whitelistStatus\",\"type\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}}]},{\"name\":\"JettonNotifyWithActionRequest\",\"header\":1935855772,\"fields\":[{\"name\":\"queryId\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}},{\"name\":\"amount\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":\"coins\"}},{\"name\":\"sender\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"actionOpcode\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":32}},{\"name\":\"actionPayload\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":false}}]},{\"name\":\"GetWalletAddress\",\"header\":801842850,\"fields\":[{\"name\":\"queryId\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"owner\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}}]},{\"name\":\"CalculateOutput\",\"header\":null,\"fields\":[{\"name\":\"protocolFeeAmount\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}},{\"name\":\"integratorFeeAmount\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}},{\"name\":\"outputAmount\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}}]},{\"name\":\"PointAndTimeDelta\",\"header\":null,\"fields\":[{\"name\":\"rateBump\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":16}},{\"name\":\"timeDelta\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":16}}]},{\"name\":\"OrderConfig\",\"header\":null,\"fields\":[{\"name\":\"id\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":32}},{\"name\":\"srcJettonAddress\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"senderPubKey\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"receiverPubKey\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"hashlock\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":256}},{\"name\":\"timelock\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":32}},{\"name\":\"amount\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}},{\"name\":\"finalized\",\"type\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"partialFills\",\"type\":{\"kind\":\"dict\",\"key\":\"uint\",\"keyFormat\":256,\"value\":\"uint\",\"valueFormat\":64}},{\"name\":\"totalFilled\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}},{\"name\":\"direction\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":8}}]},{\"name\":\"Order\",\"header\":null,\"fields\":[{\"name\":\"id\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":32}},{\"name\":\"srcJettonAddress\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"senderPubKey\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"hashlock\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":256}},{\"name\":\"timelock\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":32}},{\"name\":\"amount\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}},{\"name\":\"finalized\",\"type\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"partialFills\",\"type\":{\"kind\":\"dict\",\"key\":\"uint\",\"keyFormat\":256,\"value\":\"uint\",\"valueFormat\":64}},{\"name\":\"totalFilled\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}},{\"name\":\"direction\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":8}}]},{\"name\":\"EscrowContract\",\"header\":null,\"fields\":[{\"name\":\"chainId\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":32}},{\"name\":\"contractAddress\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"deployed\",\"type\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"totalOrders\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":32}}]},{\"name\":\"RelayerData\",\"header\":null,\"fields\":[{\"name\":\"address\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"whitelisted\",\"type\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"totalResolves\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":32}},{\"name\":\"successRate\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":16}}]},{\"name\":\"JettonWalletData\",\"header\":null,\"fields\":[{\"name\":\"balance\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":\"coins\"}},{\"name\":\"ownerAddress\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"jettonMasterAddress\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"jettonWalletCode\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":false}}]},{\"name\":\"EVMChainConfig\",\"header\":null,\"fields\":[{\"name\":\"chainId\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":32}},{\"name\":\"rpcEndpoint\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":false}},{\"name\":\"blockTime\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":32}},{\"name\":\"gasLimit\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":32}},{\"name\":\"isActive\",\"type\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"bridgeAddress\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":false}},{\"name\":\"oracleAddress\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":false}}]},{\"name\":\"EVMTransaction\",\"header\":null,\"fields\":[{\"name\":\"chainId\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":32}},{\"name\":\"toContract\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":false}},{\"name\":\"functionSelector\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":32}},{\"name\":\"parameters\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":false}},{\"name\":\"gasLimit\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":32}},{\"name\":\"gasPrice\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}},{\"name\":\"value\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}},{\"name\":\"nonce\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}},{\"name\":\"status\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":8}},{\"name\":\"transactionHash\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":false}},{\"name\":\"blockNumber\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}},{\"name\":\"confirmations\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":32}}]},{\"name\":\"EVMBridgeData\",\"header\":null,\"fields\":[{\"name\":\"bridgeId\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":32}},{\"name\":\"sourceChainId\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":32}},{\"name\":\"targetChainId\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":32}},{\"name\":\"bridgeContract\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"bridgeFee\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}},{\"name\":\"minTransferAmount\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}},{\"name\":\"maxTransferAmount\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}},{\"name\":\"isActive\",\"type\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"lastUpdateTimestamp\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":32}}]},{\"name\":\"EVMOracleData\",\"header\":null,\"fields\":[{\"name\":\"oracleId\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":32}},{\"name\":\"chainId\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":32}},{\"name\":\"oracleContract\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"tokenAddress\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"priceDecimals\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":8}},{\"name\":\"heartbeatInterval\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":32}},{\"name\":\"isActive\",\"type\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"lastPriceUpdate\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":32}}]},{\"name\":\"CrossChainMessage\",\"header\":null,\"fields\":[{\"name\":\"sourceChain\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":32}},{\"name\":\"targetChain\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":32}},{\"name\":\"orderHash\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":256}},{\"name\":\"amount\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}},{\"name\":\"secret\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":256}},{\"name\":\"timestamp\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":32}},{\"name\":\"nonce\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}}]},{\"name\":\"SendViaJettonTransfer\",\"header\":260734629,\"fields\":[{\"name\":\"queryId\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}},{\"name\":\"amount\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":\"coins\"}},{\"name\":\"destination\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"responseDestination\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":true}},{\"name\":\"customPayload\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":true}},{\"name\":\"forwardTonAmount\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":\"coins\"}},{\"name\":\"forwardPayload\",\"type\":{\"kind\":\"simple\",\"type\":\"slice\",\"optional\":false,\"format\":\"remainder\"}}]},{\"name\":\"TonFusion$Data\",\"header\":null,\"fields\":[{\"name\":\"owner\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"escrowLock\",\"type\":{\"kind\":\"dict\",\"key\":\"uint\",\"keyFormat\":256,\"value\":\"OrderConfig\",\"valueFormat\":\"ref\"}},{\"name\":\"escrowOrder\",\"type\":{\"kind\":\"dict\",\"key\":\"uint\",\"keyFormat\":256,\"value\":\"Order\",\"valueFormat\":\"ref\"}},{\"name\":\"jettons\",\"type\":{\"kind\":\"dict\",\"key\":\"address\",\"value\":\"cell\",\"valueFormat\":\"ref\"}},{\"name\":\"jettonAccount\",\"type\":{\"kind\":\"dict\",\"key\":\"address\",\"value\":\"address\"}},{\"name\":\"whiteLists\",\"type\":{\"kind\":\"dict\",\"key\":\"address\",\"value\":\"bool\"}},{\"name\":\"relayers\",\"type\":{\"kind\":\"dict\",\"key\":\"address\",\"value\":\"RelayerData\",\"valueFormat\":\"ref\"}},{\"name\":\"escrowContracts\",\"type\":{\"kind\":\"dict\",\"key\":\"uint\",\"keyFormat\":32,\"value\":\"EscrowContract\",\"valueFormat\":\"ref\"}},{\"name\":\"totalOrders\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":32}},{\"name\":\"totalVolume\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}},{\"name\":\"totalResolves\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":32}},{\"name\":\"evmChainConfigs\",\"type\":{\"kind\":\"dict\",\"key\":\"uint\",\"keyFormat\":32,\"value\":\"EVMChainConfig\",\"valueFormat\":\"ref\"}},{\"name\":\"evmTransactions\",\"type\":{\"kind\":\"dict\",\"key\":\"uint\",\"keyFormat\":64,\"value\":\"EVMTransaction\",\"valueFormat\":\"ref\"}},{\"name\":\"evmBridges\",\"type\":{\"kind\":\"dict\",\"key\":\"uint\",\"keyFormat\":32,\"value\":\"EVMBridgeData\",\"valueFormat\":\"ref\"}},{\"name\":\"evmOracles\",\"type\":{\"kind\":\"dict\",\"key\":\"uint\",\"keyFormat\":32,\"value\":\"EVMOracleData\",\"valueFormat\":\"ref\"}},{\"name\":\"evmTransactionNonce\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}},{\"name\":\"evmBridgeFees\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}}]}],\"receivers\":[{\"receiver\":\"internal\",\"message\":{\"kind\":\"empty\"}},{\"receiver\":\"internal\",\"message\":{\"kind\":\"typed\",\"type\":\"SetWhiteList\"}},{\"receiver\":\"internal\",\"message\":{\"kind\":\"typed\",\"type\":\"RegisterRelayer\"}},{\"receiver\":\"internal\",\"message\":{\"kind\":\"typed\",\"type\":\"JettonNotifyWithActionRequest\"}},{\"receiver\":\"internal\",\"message\":{\"kind\":\"typed\",\"type\":\"EVMCrossChainMessage\"}},{\"receiver\":\"internal\",\"message\":{\"kind\":\"typed\",\"type\":\"EVMContractDeploy\"}},{\"receiver\":\"internal\",\"message\":{\"kind\":\"typed\",\"type\":\"EVMBridgeConfirmation\"}},{\"receiver\":\"internal\",\"message\":{\"kind\":\"typed\",\"type\":\"EVMOraclePriceUpdate\"}},{\"receiver\":\"internal\",\"message\":{\"kind\":\"typed\",\"type\":\"EVMChainValidation\"}},{\"receiver\":\"internal\",\"message\":{\"kind\":\"typed\",\"type\":\"GetFund\"}},{\"receiver\":\"internal\",\"message\":{\"kind\":\"typed\",\"type\":\"Refund\"}},{\"receiver\":\"internal\",\"message\":{\"kind\":\"typed\",\"type\":\"RefundOrder\"}},{\"receiver\":\"internal\",\"message\":{\"kind\":\"typed\",\"type\":\"PartialFill\"}},{\"receiver\":\"internal\",\"message\":{\"kind\":\"typed\",\"type\":\"CompletePartialFill\"}},{\"receiver\":\"internal\",\"message\":{\"kind\":\"typed\",\"type\":\"DeployEscrow\"}},{\"receiver\":\"internal\",\"message\":{\"kind\":\"typed\",\"type\":\"UpdateRelayerStats\"}},{\"receiver\":\"internal\",\"message\":{\"kind\":\"typed\",\"type\":\"CreateEVMToTONOrder\"}},{\"receiver\":\"internal\",\"message\":{\"kind\":\"typed\",\"type\":\"CreateTONToEVMOrder\"}},{\"receiver\":\"internal\",\"message\":{\"kind\":\"typed\",\"type\":\"Deploy\"}}],\"getters\":[],\"errors\":{\"2\":{\"message\":\"Stack underflow\"},\"3\":{\"message\":\"Stack overflow\"},\"4\":{\"message\":\"Integer overflow\"},\"5\":{\"message\":\"Integer out of expected range\"},\"6\":{\"message\":\"Invalid opcode\"},\"7\":{\"message\":\"Type check error\"},\"8\":{\"message\":\"Cell overflow\"},\"9\":{\"message\":\"Cell underflow\"},\"10\":{\"message\":\"Dictionary error\"},\"11\":{\"message\":\"'Unknown' error\"},\"12\":{\"message\":\"Fatal error\"},\"13\":{\"message\":\"Out of gas error\"},\"14\":{\"message\":\"Virtualization error\"},\"32\":{\"message\":\"Action list is invalid\"},\"33\":{\"message\":\"Action list is too long\"},\"34\":{\"message\":\"Action is invalid or not supported\"},\"35\":{\"message\":\"Invalid source address in outbound message\"},\"36\":{\"message\":\"Invalid destination address in outbound message\"},\"37\":{\"message\":\"Not enough Toncoin\"},\"38\":{\"message\":\"Not enough extra currencies\"},\"39\":{\"message\":\"Outbound message does not fit into a cell after rewriting\"},\"40\":{\"message\":\"Cannot process a message\"},\"41\":{\"message\":\"Library reference is null\"},\"42\":{\"message\":\"Library change action error\"},\"43\":{\"message\":\"Exceeded maximum number of cells in the library or the maximum depth of the Merkle tree\"},\"50\":{\"message\":\"Account state size exceeded limits\"},\"128\":{\"message\":\"Null reference exception\"},\"129\":{\"message\":\"Invalid serialization prefix\"},\"130\":{\"message\":\"Invalid incoming message\"},\"131\":{\"message\":\"Constraints error\"},\"132\":{\"message\":\"Access denied\"},\"133\":{\"message\":\"Contract stopped\"},\"134\":{\"message\":\"Invalid argument\"},\"135\":{\"message\":\"Code of a contract was not found\"},\"136\":{\"message\":\"Invalid standard address\"},\"138\":{\"message\":\"Not a basechain address\"}},\"interfaces\":[\"org.ton.introspection.v0\",\"org.ton.abi.ipfs.v0\",\"org.ton.deploy.lazy.v0\"]}","init":{"kind":"direct","args":[],"prefix":{"bits":1,"value":0},"deployment":{"kind":"system-cell","system":null}},"sources":{"contracts/messages.tact":"aW1wb3J0ICIuL3N0YXRlcy50YWN0IjsKCi8qKgogKiBAdGl0bGUgVG9uRnVzaW9uIE1lc3NhZ2VzCiAqIEBhdXRob3IgVG9uRnVzaW9uIFRlYW0KICogQG5vdGljZSBNZXNzYWdlIGRlZmluaXRpb25zIGZvciB0aGUgVG9uRnVzaW9uIEhUTEMgcHJvdG9jb2wKICogQGRldiBBbGwgbWVzc2FnZXMgdXNlIHNwZWNpZmljIG9wY29kZXMgZm9yIHJvdXRpbmcgYW5kIHZhbGlkYXRpb24KICogCiAqIEBjdXN0b206dmVyc2lvbiAxLjAuMAogKiAKICogTWVzc2FnZSBDYXRlZ29yaWVzOgogKiAtIENyb3NzLWNoYWluIG9yZGVyIG1lc3NhZ2VzIChMb2NrSmV0dG9uLCBDcmVhdGVPcmRlcikKICogLSBCaS1kaXJlY3Rpb25hbCBzd2FwIG1lc3NhZ2VzIChDcmVhdGVFVk1Ub1RPTk9yZGVyLCBDcmVhdGVUT05Ub0VWTU9yZGVyKQogKiAtIFBhcnRpYWwgZmlsbCBtZXNzYWdlcyAoUGFydGlhbEZpbGwsIENvbXBsZXRlUGFydGlhbEZpbGwpCiAqIC0gRXNjcm93IGZhY3RvcnkgbWVzc2FnZXMgKERlcGxveUVzY3JvdywgRXNjcm93RGVwbG95ZWQpCiAqIC0gUmVsYXllci9SZXNvbHZlciBtZXNzYWdlcyAoUmVnaXN0ZXJSZWxheWVyLCBVcGRhdGVSZWxheWVyU3RhdHMpCiAqIC0gRnVuZCBtYW5hZ2VtZW50IG1lc3NhZ2VzIChHZXRGdW5kLCBSZWZ1bmQsIFJlZnVuZE9yZGVyKQogKiAtIEFjY2VzcyBjb250cm9sIG1lc3NhZ2VzIChTZXRXaGl0ZUxpc3QpCiAqIC0gSmV0dG9uIG5vdGlmaWNhdGlvbiBtZXNzYWdlcyAoSmV0dG9uTm90aWZ5V2l0aEFjdGlvblJlcXVlc3QpCiAqLwoKLyoqCiAqIEBub3RpY2UgTG9jayBqZXR0b25zIGZvciBjcm9zcy1jaGFpbiBzd2FwCiAqIEBkZXYgVXNlZCB0byBsb2NrIGpldHRvbnMgZm9yIFRPTiDihpIgRVZNIHN3YXBzCiAqIEBwYXJhbSBvcmRlckNvbmZpZyBPcmRlciBjb25maWd1cmF0aW9uIHdpdGggaGFzaGxvY2sgYW5kIHRpbWVsb2NrCiAqIEBwYXJhbSBqZXR0b24gSmV0dG9uIG1hc3RlciBjb250cmFjdCBkYXRhCiAqIEBwYXJhbSBjdXN0b21QYXlsb2FkIE9wdGlvbmFsIGN1c3RvbSBwYXlsb2FkIGZvciBhZGRpdGlvbmFsIGRhdGEKICogQGN1c3RvbTpvcGNvZGUgMHhmNTEyZjdkZgogKi8KbWVzc2FnZSgweGY1MTJmN2RmKSBMb2NrSmV0dG9uIHsKICAgIG9yZGVyQ29uZmlnOiBPcmRlckNvbmZpZzsKICAgIGpldHRvbjogQ2VsbDsKICAgIGN1c3RvbVBheWxvYWQ6IENlbGw/Owp9CgovKioKICogQG5vdGljZSBDcmVhdGUgc2FtZS1jaGFpbiBvcmRlciBmb3IgVE9OIOKGlCBUT04gc3dhcHMKICogQGRldiBVc2VkIGZvciBzYW1lLWNoYWluIHN3YXBzIHdpdGhpbiBUT04gZWNvc3lzdGVtCiAqIEBwYXJhbSBvcmRlckNvbmZpZyBPcmRlciBjb25maWd1cmF0aW9uIHdpdGggaGFzaGxvY2sgYW5kIHRpbWVsb2NrCiAqIEBwYXJhbSBqZXR0b24gSmV0dG9uIG1hc3RlciBjb250cmFjdCBkYXRhCiAqIEBwYXJhbSBjdXN0b21QYXlsb2FkIE9wdGlvbmFsIGN1c3RvbSBwYXlsb2FkIGZvciBhZGRpdGlvbmFsIGRhdGEKICogQGN1c3RvbTpvcGNvZGUgMHg3MzYyZDA5YwogKi8KbWVzc2FnZSgweDczNjJkMDljKSBDcmVhdGVPcmRlciB7CiAgICBvcmRlckNvbmZpZzogT3JkZXI7CiAgICBqZXR0b246IENlbGw7CiAgICBjdXN0b21QYXlsb2FkOiBDZWxsPzsKfQoKLyoqCiAqIEBub3RpY2UgQ3JlYXRlIEVWTSDihpIgVE9OIG9yZGVyCiAqIEBkZXYgVXNlZCBmb3IgaW5jb21pbmcgc3dhcHMgZnJvbSBFVk0gY2hhaW5zIHRvIFRPTgogKiBAcGFyYW0gb3JkZXJDb25maWcgT3JkZXIgY29uZmlndXJhdGlvbiB3aXRoIGhhc2hsb2NrIGFuZCB0aW1lbG9jawogKiBAcGFyYW0gZXZtQ29udHJhY3RBZGRyZXNzIEFkZHJlc3Mgb2YgdGhlIEVWTSBlc2Nyb3cgY29udHJhY3QKICogQHBhcmFtIGN1c3RvbVBheWxvYWQgT3B0aW9uYWwgY3VzdG9tIHBheWxvYWQgZm9yIGFkZGl0aW9uYWwgZGF0YQogKiBAY3VzdG9tOm9wY29kZSAweDhiMzQxODIyCiAqLwptZXNzYWdlKDB4OGIzNDE4MjIpIENyZWF0ZUVWTVRvVE9OT3JkZXIgewogICAgb3JkZXJDb25maWc6IE9yZGVyQ29uZmlnOwogICAgZXZtQ29udHJhY3RBZGRyZXNzOiBDZWxsOwogICAgY3VzdG9tUGF5bG9hZDogQ2VsbD87Cn0KCi8qKgogKiBAbm90aWNlIENyZWF0ZSBUT04g4oaSIEVWTSBvcmRlcgogKiBAZGV2IFVzZWQgZm9yIG91dGdvaW5nIHN3YXBzIGZyb20gVE9OIHRvIEVWTSBjaGFpbnMKICogQHBhcmFtIG9yZGVyQ29uZmlnIE9yZGVyIGNvbmZpZ3VyYXRpb24gd2l0aCBoYXNobG9jayBhbmQgdGltZWxvY2sKICogQHBhcmFtIHRhcmdldENoYWluSWQgVGFyZ2V0IEVWTSBjaGFpbiBJRAogKiBAcGFyYW0gY3VzdG9tUGF5bG9hZCBPcHRpb25hbCBjdXN0b20gcGF5bG9hZCBmb3IgYWRkaXRpb25hbCBkYXRhCiAqIEBjdXN0b206b3Bjb2RlIDB4NjIyMzk5NzgKICovCm1lc3NhZ2UoMHg2MjIzOTk3OCkgQ3JlYXRlVE9OVG9FVk1PcmRlciB7CiAgICBvcmRlckNvbmZpZzogT3JkZXJDb25maWc7CiAgICBldm1Db250cmFjdEFkZHJlc3M6IENlbGw7CiAgICBjdXN0b21QYXlsb2FkOiBDZWxsPzsKfQoKLyoqCiAqIEBub3RpY2UgQ3JlYXRlIGEgcGFydGlhbCBmaWxsIGZvciBhbiBvcmRlcgogKiBAZGV2IEFsbG93cyBtdWx0aXBsZSBwYXJ0aWVzIHRvIGZpbGwgcGFydHMgb2YgYSBsYXJnZSBvcmRlcgogKiBAcGFyYW0gb3JkZXJIYXNoIFRoZSBoYXNobG9jayBvZiB0aGUgb3JkZXIgdG8gcGFydGlhbGx5IGZpbGwKICogQHBhcmFtIHNlY3JldCBVbmlxdWUgc2VjcmV0IGZvciB0aGlzIHBhcnRpYWwgZmlsbAogKiBAcGFyYW0gZmlsbEFtb3VudCBBbW91bnQgdG8gZmlsbCBpbiB0aGlzIHBhcnRpYWwKICogQHBhcmFtIHJlc29sdmVyIEFkZHJlc3Mgb2YgdGhlIHJlbGF5ZXIvcmVzb2x2ZXIKICogQHBhcmFtIGN1c3RvbVBheWxvYWQgT3B0aW9uYWwgY3VzdG9tIHBheWxvYWQgZm9yIGFkZGl0aW9uYWwgZGF0YQogKiBAY3VzdG9tOm9wY29kZSAweDRlZjVjYjI2CiAqLwptZXNzYWdlKDB4NGVmNWNiMjYpIFBhcnRpYWxGaWxsIHsKICAgIG9yZGVySGFzaDogSW50IGFzIHVpbnQyNTY7CiAgICBzZWNyZXQ6IEludCBhcyB1aW50MjU2OwogICAgZmlsbEFtb3VudDogSW50IGFzIHVpbnQ2NDsKICAgIHJlc29sdmVyOiBBZGRyZXNzOwogICAgY3VzdG9tUGF5bG9hZDogQ2VsbD87Cn0KCi8qKgogKiBAbm90aWNlIENvbXBsZXRlIGEgcGFydGlhbCBmaWxsIHVzaW5nIHRoZSBzZWNyZXQKICogQGRldiBUcmFuc2ZlcnMgdGhlIHBhcnRpYWwgYW1vdW50IHRvIHRoZSByZWNlaXZlcgogKiBAcGFyYW0gb3JkZXJIYXNoIFRoZSBoYXNobG9jayBvZiB0aGUgb3JkZXIKICogQHBhcmFtIHNlY3JldCBUaGUgc2VjcmV0IGZvciB0aGUgcGFydGlhbCBmaWxsCiAqIEBjdXN0b206b3Bjb2RlIDB4N2E3YjhjOWQKICovCm1lc3NhZ2UoMHg3YTdiOGM5ZCkgQ29tcGxldGVQYXJ0aWFsRmlsbCB7CiAgICBvcmRlckhhc2g6IEludCBhcyB1aW50MjU2OwogICAgc2VjcmV0OiBJbnQgYXMgdWludDI1NjsKfQoKLyoqCiAqIEBub3RpY2UgRVZNIGNyb3NzLWNoYWluIG1lc3NhZ2UgZm9yIGNvbnRyYWN0IGludGVyYWN0aW9ucwogKiBAZGV2IFVzZWQgZm9yIGNvbW11bmljYXRpbmcgd2l0aCBFVk0gY2hhaW5zIHZpYSBicmlkZ2VzL29yYWNsZXMKICogQHBhcmFtIHRhcmdldENoYWluSWQgVGFyZ2V0IEVWTSBjaGFpbiBJRAogKiBAcGFyYW0gdGFyZ2V0Q29udHJhY3QgVGFyZ2V0IEVWTSBjb250cmFjdCBhZGRyZXNzCiAqIEBwYXJhbSBmdW5jdGlvblNlbGVjdG9yIEVWTSBmdW5jdGlvbiBzZWxlY3RvciAoNCBieXRlcykKICogQHBhcmFtIHBhcmFtZXRlcnMgRnVuY3Rpb24gcGFyYW1ldGVycyBlbmNvZGVkIGFzIGJ5dGVzCiAqIEBwYXJhbSBnYXNMaW1pdCBHYXMgbGltaXQgZm9yIHRoZSBFVk0gY2FsbAogKiBAcGFyYW0gdmFsdWUgRVRIIHZhbHVlIHRvIHNlbmQgd2l0aCB0aGUgY2FsbAogKiBAcGFyYW0gY3VzdG9tUGF5bG9hZCBPcHRpb25hbCBjdXN0b20gcGF5bG9hZCBmb3IgYWRkaXRpb25hbCBkYXRhCiAqIEBjdXN0b206b3Bjb2RlIDB4OWE4YjdjNmQKICovCm1lc3NhZ2UoMHg5YThiN2M2ZCkgRVZNQ3Jvc3NDaGFpbk1lc3NhZ2UgewogICAgdGFyZ2V0Q2hhaW5JZDogSW50IGFzIHVpbnQzMjsKICAgIHRhcmdldENvbnRyYWN0OiBDZWxsOyAvLyBUYXJnZXQgY29udHJhY3QgYWRkcmVzcyBlbmNvZGVkIGFzIGNlbGwKICAgIGZ1bmN0aW9uU2VsZWN0b3I6IEludCBhcyB1aW50MzI7CiAgICBwYXJhbWV0ZXJzOiBDZWxsOwogICAgZ2FzTGltaXQ6IEludCBhcyB1aW50MzI7CiAgICB2YWx1ZTogSW50IGFzIHVpbnQ2NDsKICAgIGN1c3RvbVBheWxvYWQ6IENlbGw/Owp9CgovKioKICogQG5vdGljZSBFVk0gY29udHJhY3QgZGVwbG95bWVudCBtZXNzYWdlCiAqIEBkZXYgVXNlZCBmb3IgZGVwbG95aW5nIGVzY3JvdyBjb250cmFjdHMgb24gRVZNIGNoYWlucwogKiBAcGFyYW0gdGFyZ2V0Q2hhaW5JZCBUYXJnZXQgRVZNIGNoYWluIElECiAqIEBwYXJhbSBjb250cmFjdEJ5dGVjb2RlIEVWTSBjb250cmFjdCBieXRlY29kZQogKiBAcGFyYW0gY29uc3RydWN0b3JQYXJhbXMgQ29uc3RydWN0b3IgcGFyYW1ldGVycyBlbmNvZGVkIGFzIGJ5dGVzCiAqIEBwYXJhbSBnYXNMaW1pdCBHYXMgbGltaXQgZm9yIGNvbnRyYWN0IGRlcGxveW1lbnQKICogQHBhcmFtIHZhbHVlIEVUSCB2YWx1ZSB0byBzZW5kIHdpdGggZGVwbG95bWVudAogKiBAcGFyYW0gY3VzdG9tUGF5bG9hZCBPcHRpb25hbCBjdXN0b20gcGF5bG9hZCBmb3IgYWRkaXRpb25hbCBkYXRhCiAqIEBjdXN0b206b3Bjb2RlIDB4NWU0ZjNkMmMKICovCm1lc3NhZ2UoMHg1ZTRmM2QyYykgRVZNQ29udHJhY3REZXBsb3kgewogICAgdGFyZ2V0Q2hhaW5JZDogSW50IGFzIHVpbnQzMjsKICAgIGNvbnRyYWN0Qnl0ZWNvZGU6IENlbGw7CiAgICBjb25zdHJ1Y3RvclBhcmFtczogQ2VsbDsKICAgIGdhc0xpbWl0OiBJbnQgYXMgdWludDMyOwogICAgdmFsdWU6IEludCBhcyB1aW50NjQ7CiAgICBjdXN0b21QYXlsb2FkOiBDZWxsPzsKfQoKLyoqCiAqIEBub3RpY2UgRVZNIGJyaWRnZSBjb25maXJtYXRpb24gbWVzc2FnZQogKiBAZGV2IFVzZWQgZm9yIGNvbmZpcm1pbmcgY3Jvc3MtY2hhaW4gdHJhbnNmZXJzIHZpYSBicmlkZ2VzCiAqIEBwYXJhbSBicmlkZ2VJZCBCcmlkZ2UgaWRlbnRpZmllcgogKiBAcGFyYW0gdHJhbnNhY3Rpb25IYXNoIEVWTSB0cmFuc2FjdGlvbiBoYXNoCiAqIEBwYXJhbSBibG9ja051bWJlciBFVk0gYmxvY2sgbnVtYmVyCiAqIEBwYXJhbSBjb25maXJtYXRpb25zIE51bWJlciBvZiBjb25maXJtYXRpb25zIHJlY2VpdmVkCiAqIEBwYXJhbSBjdXN0b21QYXlsb2FkIE9wdGlvbmFsIGN1c3RvbSBwYXlsb2FkIGZvciBhZGRpdGlvbmFsIGRhdGEKICogQGN1c3RvbTpvcGNvZGUgMHgxZjJlM2Q0YwogKi8KbWVzc2FnZSgweDFmMmUzZDRjKSBFVk1CcmlkZ2VDb25maXJtYXRpb24gewogICAgYnJpZGdlSWQ6IEludCBhcyB1aW50MzI7CiAgICB0cmFuc2FjdGlvbkhhc2g6IENlbGw7CiAgICBibG9ja051bWJlcjogSW50IGFzIHVpbnQ2NDsKICAgIGNvbmZpcm1hdGlvbnM6IEludCBhcyB1aW50MzI7CiAgICBjdXN0b21QYXlsb2FkOiBDZWxsPzsKfQoKLyoqCiAqIEBub3RpY2UgRVZNIG9yYWNsZSBwcmljZSB1cGRhdGUgbWVzc2FnZQogKiBAZGV2IFVzZWQgZm9yIHJlY2VpdmluZyBwcmljZSB1cGRhdGVzIGZyb20gRVZNIG9yYWNsZXMKICogQHBhcmFtIG9yYWNsZUlkIE9yYWNsZSBpZGVudGlmaWVyCiAqIEBwYXJhbSB0b2tlbkFkZHJlc3MgVG9rZW4gYWRkcmVzcyBvbiBFVk0gY2hhaW4KICogQHBhcmFtIHByaWNlIFByaWNlIGluIFVTRCB3aXRoIDggZGVjaW1hbCBwcmVjaXNpb24KICogQHBhcmFtIHRpbWVzdGFtcCBQcmljZSB0aW1lc3RhbXAKICogQHBhcmFtIGN1c3RvbVBheWxvYWQgT3B0aW9uYWwgY3VzdG9tIHBheWxvYWQgZm9yIGFkZGl0aW9uYWwgZGF0YQogKiBAY3VzdG9tOm9wY29kZSAweDhjOWQwZTFmCiAqLwptZXNzYWdlKDB4OGM5ZDBlMWYpIEVWTU9yYWNsZVByaWNlVXBkYXRlIHsKICAgIG9yYWNsZUlkOiBJbnQgYXMgdWludDMyOwogICAgdG9rZW5BZGRyZXNzOiBBZGRyZXNzOwogICAgcHJpY2U6IEludCBhcyB1aW50NjQ7CiAgICB0aW1lc3RhbXA6IEludCBhcyB1aW50MzI7CiAgICBjdXN0b21QYXlsb2FkOiBDZWxsPzsKfQoKLyoqCiAqIEBub3RpY2UgRVZNIGNoYWluIHZhbGlkYXRpb24gbWVzc2FnZQogKiBAZGV2IFVzZWQgZm9yIHZhbGlkYXRpbmcgRVZNIGNoYWluIHBhcmFtZXRlcnMKICogQHBhcmFtIGNoYWluSWQgRVZNIGNoYWluIElEIHRvIHZhbGlkYXRlCiAqIEBwYXJhbSBibG9ja051bWJlciBDdXJyZW50IGJsb2NrIG51bWJlciBvbiB0aGUgY2hhaW4KICogQHBhcmFtIGdhc1ByaWNlIEN1cnJlbnQgZ2FzIHByaWNlIG9uIHRoZSBjaGFpbgogKiBAcGFyYW0gY3VzdG9tUGF5bG9hZCBPcHRpb25hbCBjdXN0b20gcGF5bG9hZCBmb3IgYWRkaXRpb25hbCBkYXRhCiAqIEBjdXN0b206b3Bjb2RlIDB4MmQzZTRmNWEKICovCm1lc3NhZ2UoMHgyZDNlNGY1YSkgRVZNQ2hhaW5WYWxpZGF0aW9uIHsKICAgIGNoYWluSWQ6IEludCBhcyB1aW50MzI7CiAgICBibG9ja051bWJlcjogSW50IGFzIHVpbnQ2NDsKICAgIGdhc1ByaWNlOiBJbnQgYXMgdWludDY0OwogICAgY3VzdG9tUGF5bG9hZDogQ2VsbD87Cn0KCi8qKgogKiBAbm90aWNlIERlcGxveSBlc2Nyb3cgY29udHJhY3QgZm9yIGEgdGFyZ2V0IGNoYWluCiAqIEBkZXYgT25seSBjYWxsYWJsZSBieSBjb250cmFjdCBvd25lcgogKiBAcGFyYW0gY2hhaW5JZCBUYXJnZXQgY2hhaW4gSUQgZm9yIGVzY3JvdyBkZXBsb3ltZW50CiAqIEBwYXJhbSB0YXJnZXRBZGRyZXNzIEFkZHJlc3Mgd2hlcmUgZXNjcm93IHNob3VsZCBiZSBkZXBsb3llZAogKiBAcGFyYW0gY3VzdG9tUGF5bG9hZCBPcHRpb25hbCBjdXN0b20gcGF5bG9hZCBmb3IgYWRkaXRpb25hbCBkYXRhCiAqIEBjdXN0b206b3Bjb2RlIDB4NTk1ZjA3YmMKICovCm1lc3NhZ2UoMHg1OTVmMDdiYykgRGVwbG95RXNjcm93IHsKICAgIGNoYWluSWQ6IEludCBhcyB1aW50MzI7CiAgICB0YXJnZXRBZGRyZXNzOiBBZGRyZXNzOwogICAgY3VzdG9tUGF5bG9hZDogQ2VsbD87Cn0KCi8qKgogKiBAbm90aWNlIE5vdGlmaWNhdGlvbiBvZiBlc2Nyb3cgY29udHJhY3QgZGVwbG95bWVudAogKiBAZGV2IFNlbnQgYWZ0ZXIgc3VjY2Vzc2Z1bCBlc2Nyb3cgZGVwbG95bWVudAogKiBAcGFyYW0gY2hhaW5JZCBDaGFpbiBJRCB3aGVyZSBlc2Nyb3cgd2FzIGRlcGxveWVkCiAqIEBwYXJhbSBjb250cmFjdEFkZHJlc3MgQWRkcmVzcyBvZiB0aGUgZGVwbG95ZWQgZXNjcm93IGNvbnRyYWN0CiAqIEBwYXJhbSBzdWNjZXNzIFdoZXRoZXIgZGVwbG95bWVudCB3YXMgc3VjY2Vzc2Z1bAogKiBAcGFyYW0gY3VzdG9tUGF5bG9hZCBPcHRpb25hbCBjdXN0b20gcGF5bG9hZCBmb3IgYWRkaXRpb25hbCBkYXRhCiAqIEBjdXN0b206b3Bjb2RlIDB4N2JkZDk3ZGUKICovCm1lc3NhZ2UoMHg3YmRkOTdkZSkgRXNjcm93RGVwbG95ZWQgewogICAgY2hhaW5JZDogSW50IGFzIHVpbnQzMjsKICAgIGNvbnRyYWN0QWRkcmVzczogQWRkcmVzczsKICAgIHN1Y2Nlc3M6IEJvb2w7CiAgICBjdXN0b21QYXlsb2FkOiBDZWxsPzsKfQoKLyoqCiAqIEBub3RpY2UgUmVnaXN0ZXIgYSBuZXcgcmVsYXllcgogKiBAZGV2IE9ubHkgY2FsbGFibGUgYnkgY29udHJhY3Qgb3duZXIKICogQHBhcmFtIHJlbGF5ZXIgQWRkcmVzcyBvZiB0aGUgcmVsYXllciB0byByZWdpc3RlcgogKiBAcGFyYW0gY3VzdG9tUGF5bG9hZCBPcHRpb25hbCBjdXN0b20gcGF5bG9hZCBmb3IgYWRkaXRpb25hbCBkYXRhCiAqIEBjdXN0b206b3Bjb2RlIDB4NzM2MmQwOWUKICovCm1lc3NhZ2UoMHg3MzYyZDA5ZSkgUmVnaXN0ZXJSZWxheWVyIHsKICAgIHJlbGF5ZXI6IEFkZHJlc3M7CiAgICBjdXN0b21QYXlsb2FkOiBDZWxsPzsKfQoKLyoqCiAqIEBub3RpY2UgVXBkYXRlIHJlbGF5ZXIgcGVyZm9ybWFuY2Ugc3RhdGlzdGljcwogKiBAZGV2IFRyYWNrcyBzdWNjZXNzL2ZhaWx1cmUgcmF0ZXMgZm9yIHJlbGF5ZXIgcmVwdXRhdGlvbgogKiBAcGFyYW0gcmVsYXllciBBZGRyZXNzIG9mIHRoZSByZWxheWVyCiAqIEBwYXJhbSBzdWNjZXNzIFRydWUgaWYgcmVzb2x1dGlvbiB3YXMgc3VjY2Vzc2Z1bAogKiBAcGFyYW0gY3VzdG9tUGF5bG9hZCBPcHRpb25hbCBjdXN0b20gcGF5bG9hZCBmb3IgYWRkaXRpb25hbCBkYXRhCiAqIEBjdXN0b206b3Bjb2RlIDB4NzM2MmQwOWYKICovCm1lc3NhZ2UoMHg3MzYyZDA5ZikgVXBkYXRlUmVsYXllclN0YXRzIHsKICAgIHJlbGF5ZXI6IEFkZHJlc3M7CiAgICBzdWNjZXNzOiBCb29sOwogICAgY3VzdG9tUGF5bG9hZDogQ2VsbD87Cn0KCi8qKgogKiBAbm90aWNlIENsYWltIGZ1bmRzIHVzaW5nIHRoZSBjb3JyZWN0IHNlY3JldAogKiBAZGV2IFZhbGlkYXRlcyBzZWNyZXQgaGFzaCBhbmQgdHJhbnNmZXJzIGZ1bmRzIHRvIHJlY2VpdmVyCiAqIEBwYXJhbSBzZWNyZXQgVGhlIHNlY3JldCB0aGF0IHVubG9ja3MgdGhlIGhhc2hsb2NrCiAqIEBwYXJhbSBoYXNoIFRoZSBoYXNobG9jayBvZiB0aGUgb3JkZXIKICogQHBhcmFtIGN1c3RvbVBheWxvYWQgT3B0aW9uYWwgY3VzdG9tIHBheWxvYWQgZm9yIGFkZGl0aW9uYWwgZGF0YQogKiBAY3VzdG9tOm9wY29kZSAweDUwNjM1ZmQyCiAqLwptZXNzYWdlKDB4NTA2MzVmZDIpIEdldEZ1bmQgewogICAgc2VjcmV0OiBJbnQgYXMgdWludDI1NjsKICAgIGhhc2g6IEludCBhcyB1aW50MjU2OwogICAgY3VzdG9tUGF5bG9hZDogQ2VsbD87Cn0KCi8qKgogKiBAbm90aWNlIFJlZnVuZCBjcm9zcy1jaGFpbiBvcmRlciBhZnRlciB0aW1lbG9jayBleHBpcmF0aW9uCiAqIEBkZXYgUmV0dXJucyBmdW5kcyB0byBvcmlnaW5hbCBzZW5kZXIgaWYgb3JkZXIgZXhwaXJlcwogKiBAcGFyYW0gaGFzaCBUaGUgaGFzaGxvY2sgb2YgdGhlIG9yZGVyIHRvIHJlZnVuZAogKiBAcGFyYW0gY3VzdG9tUGF5bG9hZCBPcHRpb25hbCBjdXN0b20gcGF5bG9hZCBmb3IgYWRkaXRpb25hbCBkYXRhCiAqIEBjdXN0b206b3Bjb2RlIDB4ZTQ5ZTFkY2IKICovCm1lc3NhZ2UoMHhlNDllMWRjYikgUmVmdW5kIHsKICAgIGhhc2g6IEludCBhcyB1aW50MjU2OwogICAgY3VzdG9tUGF5bG9hZDogQ2VsbD87Cn0KCi8qKgogKiBAbm90aWNlIFJlZnVuZCBzYW1lLWNoYWluIG9yZGVyIGFmdGVyIHRpbWVsb2NrIGV4cGlyYXRpb24KICogQGRldiBSZXR1cm5zIGZ1bmRzIHRvIG9yaWdpbmFsIHNlbmRlciBpZiBvcmRlciBleHBpcmVzCiAqIEBwYXJhbSBoYXNoIFRoZSBoYXNobG9jayBvZiB0aGUgb3JkZXIgdG8gcmVmdW5kCiAqIEBwYXJhbSBjdXN0b21QYXlsb2FkIE9wdGlvbmFsIGN1c3RvbSBwYXlsb2FkIGZvciBhZGRpdGlvbmFsIGRhdGEKICogQGN1c3RvbTpvcGNvZGUgMHg3MzYyZDA5ZAogKi8KbWVzc2FnZSgweDczNjJkMDlkKSBSZWZ1bmRPcmRlciB7CiAgICBoYXNoOiBJbnQgYXMgdWludDI1NjsKICAgIGN1c3RvbVBheWxvYWQ6IENlbGw/Owp9CgovKioKICogQG5vdGljZSBTZXQgd2hpdGVsaXN0IHN0YXR1cyBmb3IgYW4gYWRkcmVzcwogKiBAZGV2IE9ubHkgY2FsbGFibGUgYnkgY29udHJhY3Qgb3duZXIKICogQHBhcmFtIHJlc29sdmVyIEFkZHJlc3MgdG8gc2V0IHdoaXRlbGlzdCBzdGF0dXMgZm9yCiAqIEBwYXJhbSB3aGl0ZWxpc3RTdGF0dXMgVHJ1ZSB0byB3aGl0ZWxpc3QsIGZhbHNlIHRvIHJlbW92ZSBmcm9tIHdoaXRlbGlzdAogKiBAY3VzdG9tOm9wY29kZSAweGE5ODVmZGY4CiAqLwptZXNzYWdlKDB4YTk4NWZkZjgpIFNldFdoaXRlTGlzdCB7CiAgICByZXNvbHZlcjogQWRkcmVzczsKICAgIHdoaXRlbGlzdFN0YXR1czogQm9vbDsKfQoKLyoqCiAqIEBub3RpY2UgSmV0dG9uIG5vdGlmaWNhdGlvbiB3aXRoIGVtYmVkZGVkIGFjdGlvbgogKiBAZGV2IFJvdXRlcyBkaWZmZXJlbnQgYWN0aW9uIHR5cGVzIHRvIGFwcHJvcHJpYXRlIGhhbmRsZXJzCiAqIEBwYXJhbSBxdWVyeUlkIFVuaXF1ZSBxdWVyeSBpZGVudGlmaWVyCiAqIEBwYXJhbSBhbW91bnQgQW1vdW50IG9mIGpldHRvbnMgdHJhbnNmZXJyZWQKICogQHBhcmFtIHNlbmRlciBBZGRyZXNzIG9mIHRoZSBqZXR0b24gc2VuZGVyCiAqIEBwYXJhbSBhY3Rpb25PcGNvZGUgT3Bjb2RlIGlkZW50aWZ5aW5nIHRoZSBhY3Rpb24gdHlwZQogKiBAcGFyYW0gYWN0aW9uUGF5bG9hZCBFbmNvZGVkIGFjdGlvbiBkYXRhCiAqIEBjdXN0b206b3Bjb2RlIDB4NzM2MmQwOWMKICovCm1lc3NhZ2UoMHg3MzYyZDA5YykgSmV0dG9uTm90aWZ5V2l0aEFjdGlvblJlcXVlc3QgewogICAgcXVlcnlJZDogSW50IGFzIHVpbnQ2NDsKICAgIGFtb3VudDogSW50IGFzIGNvaW5zOwogICAgc2VuZGVyOiBBZGRyZXNzOwogICAgYWN0aW9uT3Bjb2RlOiBJbnQgYXMgdWludDMyOwogICAgYWN0aW9uUGF5bG9hZDogQ2VsbDsgLy8gT2JsaWdhdG9yeSByZWYKfQoKLyoqCiAqIEBub3RpY2UgR2V0IGpldHRvbiB3YWxsZXQgYWRkcmVzcwogKiBAZGV2IFV0aWxpdHkgbWVzc2FnZSBmb3IgY2FsY3VsYXRpbmcgamV0dG9uIHdhbGxldCBhZGRyZXNzZXMKICogQHBhcmFtIHF1ZXJ5SWQgVW5pcXVlIHF1ZXJ5IGlkZW50aWZpZXIKICogQHBhcmFtIG93bmVyIE93bmVyIGFkZHJlc3MgZm9yIHRoZSBqZXR0b24gd2FsbGV0CiAqIEBjdXN0b206b3Bjb2RlIDB4MmZjYjI2YTIKICovCm1lc3NhZ2UoMHgyZmNiMjZhMikgR2V0V2FsbGV0QWRkcmVzcyB7CiAgICBxdWVyeUlkOiBJbnQ7CiAgICBvd25lcjogQWRkcmVzczsKfQoKCgovLyBDb21tZW50ZWQgb3V0IG1lc3NhZ2VzIGZvciBmdXR1cmUgdXNlIG9yIHJlZmVyZW5jZQoKLy8gbWVzc2FnZSgweDU5NWYwN2JjKSBUb2tlbkJ1cm4gewovLyAgICAgcXVlcnlfaWQ6IEludCBhcyB1aW50NjQ7Ci8vICAgICBhbW91bnQ6IEludCBhcyBjb2luczsKLy8gICAgIHJlc3BvbnNlX2Rlc3RpbmF0aW9uOiBBZGRyZXNzPzsKLy8gICAgIGN1c3RvbV9wYXlsb2FkOiBDZWxsPzsKLy8gfQovLyBtZXNzYWdlKDB4N2JkZDk3ZGUpIFRva2VuQnVybk5vdGlmaWNhdGlvbiB7Ci8vICAgICBxdWVyeV9pZDogSW50IGFzIHVpbnQ2NDsKLy8gICAgIGFtb3VudDogSW50IGFzIGNvaW5zOwovLyAgICAgc2VuZGVyOiBBZGRyZXNzOwovLyAgICAgcmVzcG9uc2VfZGVzdGluYXRpb246IEFkZHJlc3M/OwovLyB9CgovLyBtZXNzYWdlKDB4NzM2MmQwOWMpIEpldHRvbk5vdGlmeVdpdGhBY3Rpb25SZXF1ZXN0IHsKLy8gICAgIHF1ZXJ5SWQ6IEludCBhcyB1aW50NjQ7Ci8vICAgICBhbW91bnQ6IEludCBhcyBjb2luczsKLy8gICAgIHNlbmRlcjogQWRkcmVzczsKLy8gICAgIGVpdGhlckJpdDogQm9vbDsgLy8gU2hvdWxkIGJlIDAsIHNvIG90aGVyIGZpZWxkcyBhcmUgc3RvcmVkIGlubGluZQovLyAgICAgYWN0aW9uT3Bjb2RlOiBJbnQgYXMgdWludDMyOwovLyAgICAgYWN0aW9uUGF5bG9hZDogQ2VsbDsgLy8gT2JsaWdhdG9yeSByZWYKLy8gfQoKLy8gbWVzc2FnZSgweDczNjJkMDljKSBUb2tlbk5vdGlmaWNhdGlvbiB7Ci8vICAgICBxdWVyeV9pZDogSW50IGFzIHVpbnQ2NDsKLy8gICAgIGFtb3VudDogSW50IGFzIGNvaW5zOwovLyAgICAgZnJvbTogQWRkcmVzczsKLy8gICAgIGZvcndhcmRfcGF5bG9hZDogU2xpY2UgYXMgcmVtYWluaW5nOyAvLyBDb21tZW50IFRleHQgbWVzc2FnZSB3aGVuIFRyYW5zZmVyIHRoZSBqZXR0b24gCi8vIH0KCi8vIG1lc3NhZ2UoMHg0ZWY1Y2IyNikgSUNPVG9rZW5CdXJuIHsKLy8gICAgIGpldHRvbkFjY291bnQ6IENlbGw7Ci8vICAgICBxdWVyeUlkOiBJbnQgYXMgdWludDY0OwovLyAgICAgYW1vdW50OiBJbnQgYXMgY29pbnM7Ci8vICAgICByZXNwb25zZURlc3RpbmF0aW9uOiBBZGRyZXNzPzsKLy8gICAgIGN1c3RvbVBheWxvYWQ6IENlbGw/OwovLyB9Ci8vIG1lc3NhZ2UoMHg4YjM0MTgyMikgQWRkIHsKLy8gICAgIHF1ZXJ5SWQ6IEludCBhcyB1aW50NjQ7Ci8vICAgICBhbW91bnQ6IEludCBhcyB1aW50MzI7Ci8vIH0KLy8gbWVzc2FnZSgweDYyMjM5OTc4KSBCdXkgewovLyAgICAgdXNlcjogQWRkcmVzczsKLy8gICAgIGFtb3VudDogSW50IGFzIGNvaW5zOwovLyB9Cg==","contracts/errors.tact":"LyoqCiAqIEB0aXRsZSBUb25GdXNpb24gRXJyb3IgQ29kZXMKICogQGF1dGhvciBUb25GdXNpb24gVGVhbQogKiBAbm90aWNlIEVycm9yIGNvZGUgZGVmaW5pdGlvbnMgZm9yIHRoZSBUb25GdXNpb24gSFRMQyBwcm90b2NvbAogKiBAZGV2IEFsbCBlcnJvciBjb2RlcyBhcmUgdW5pcXVlIGludGVnZXJzIHVzZWQgZm9yIGVycm9yIGhhbmRsaW5nIGFuZCBkZWJ1Z2dpbmcKICogCiAqIEBjdXN0b206dmVyc2lvbiAxLjAuMAogKiAKICogRXJyb3IgQ2F0ZWdvcmllczoKICogLSBWYWxpZGF0aW9uIGVycm9ycyAoNzAtODkpCiAqIC0gT3JkZXIgbWFuYWdlbWVudCBlcnJvcnMgKDkwLTEwNCkKICogLSBBY2Nlc3MgY29udHJvbCBlcnJvcnMgKDg1LTg3KQogKiAtIFN5c3RlbSBlcnJvcnMgKDk2LTEwNCkKICogCiAqIEBjdXN0b206d2FybmluZyBFcnJvciBjb2RlcyBhcmUgY3JpdGljYWwgZm9yIGRlYnVnZ2luZy4gQWx3YXlzIGNoZWNrIGVycm9yIGNvZGVzIGluIGxvZ3MKICovCgovLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ci8vIFZBTElEQVRJT04gRVJST1JTICg3MC04OSkKLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQoKLy8vIEBub3RpY2UgSW5jb25zaXN0ZW50IG5hdGl2ZSBzb3VyY2UgdHJhaXQgZXJyb3IKLy8vIEBkZXYgVXNlZCB3aGVuIHNvdXJjZSB0b2tlbiB2YWxpZGF0aW9uIGZhaWxzCmNvbnN0IElOQ09OU0lTVEVOVF9OQVRJVkVfU1JDX1RSQUlUOiBJbnQgPSA3MDsKCi8vLyBAbm90aWNlIEluY29uc2lzdGVudCBuYXRpdmUgZGVzdGluYXRpb24gdHJhaXQgZXJyb3IKLy8vIEBkZXYgVXNlZCB3aGVuIGRlc3RpbmF0aW9uIHRva2VuIHZhbGlkYXRpb24gZmFpbHMKY29uc3QgSU5DT05TSVNURU5UX05BVElWRV9EU1RfVFJBSVQ6IEludCA9IDcxOwoKLy8vIEBub3RpY2UgSW52YWxpZCBhbW91bnQgZXJyb3IKLy8vIEBkZXYgVXNlZCB3aGVuIG9yZGVyIGFtb3VudCBpcyB6ZXJvIG9yIGV4Y2VlZHMgbGltaXRzCmNvbnN0IElOVkFMSURfQU1PVU5UOiBJbnQgPSA3MjsKCi8vLyBAbm90aWNlIE1pc3NpbmcgbWFrZXIgZGVzdGluYXRpb24gYXNzb2NpYXRlZCB0b2tlbiBhY2NvdW50Ci8vLyBAZGV2IFVzZWQgd2hlbiBtYWtlcidzIGRlc3RpbmF0aW9uIHRva2VuIGFjY291bnQgaXMgbm90IGZvdW5kCmNvbnN0IE1JU1NJTkdfTUFLRVJfRFNUX0FUQTogSW50ID0gNzM7CgovLy8gQG5vdGljZSBOb3QgZW5vdWdoIHRva2VucyBpbiBlc2Nyb3cKLy8vIEBkZXYgVXNlZCB3aGVuIGVzY3JvdyBiYWxhbmNlIGlzIGluc3VmZmljaWVudCBmb3IgdGhlIG9yZGVyCmNvbnN0IE5PVF9FTk9VR0hfVE9LRU5TX0lOX0VTQ1JPVzogSW50ID0gNzQ7CgovLy8gQG5vdGljZSBPcmRlciBleHBpcmVkIGVycm9yCi8vLyBAZGV2IFVzZWQgd2hlbiBvcmRlciB0aW1lbG9jayBoYXMgcGFzc2VkCmNvbnN0IE9SREVSX0VYUElSRUQ6IEludCA9IDc1OwoKLy8vIEBub3RpY2UgSW52YWxpZCBlc3RpbWF0ZWQgdGFraW5nIGFtb3VudAovLy8gQGRldiBVc2VkIHdoZW4gZXN0aW1hdGVkIGZpbGwgYW1vdW50IGlzIGludmFsaWQKY29uc3QgSU5WQUxJRF9FU1RJTUFURURfVEFLSU5HX0FNT1VOVDogSW50ID0gNzY7CgovLy8gQG5vdGljZSBJbnZhbGlkIHByb3RvY29sIHN1cnBsdXMgZmVlCi8vLyBAZGV2IFVzZWQgd2hlbiBwcm90b2NvbCBmZWUgY2FsY3VsYXRpb24gaXMgaW52YWxpZApjb25zdCBJTlZBTElEX1BST1RPQ09MX1NVUlBMVVNfRkVFOiBJbnQgPSA3NzsKCi8vLyBAbm90aWNlIEluY29uc2lzdGVudCBwcm90b2NvbCBmZWUgY29uZmlndXJhdGlvbgovLy8gQGRldiBVc2VkIHdoZW4gcHJvdG9jb2wgZmVlIHNldHRpbmdzIGFyZSBpbmNvbnNpc3RlbnQKY29uc3QgSU5DT05TSVNURU5UX1BST1RPQ09MX0ZFRV9DT05GSUc6IEludCA9IDc4OwoKLy8vIEBub3RpY2UgSW5jb25zaXN0ZW50IGludGVncmF0b3IgZmVlIGNvbmZpZ3VyYXRpb24KLy8vIEBkZXYgVXNlZCB3aGVuIGludGVncmF0b3IgZmVlIHNldHRpbmdzIGFyZSBpbmNvbnNpc3RlbnQKY29uc3QgSU5DT05TSVNURU5UX0lOVEVHUkFUT1JfRkVFX0NPTkZJRzogSW50ID0gNzk7CgovLy8gQG5vdGljZSBPcmRlciBub3QgZXhwaXJlZCBlcnJvcgovLy8gQGRldiBVc2VkIHdoZW4gdHJ5aW5nIHRvIHJlZnVuZCBiZWZvcmUgdGltZWxvY2sgZXhwaXJhdGlvbgpjb25zdCBPUkRFUl9OT1RfRVhQSVJFRDogSW50ID0gODA7CgovLy8gQG5vdGljZSBJbnZhbGlkIGNhbmNlbGxhdGlvbiBmZWUKLy8vIEBkZXYgVXNlZCB3aGVuIGNhbmNlbGxhdGlvbiBmZWUgaXMgaW52YWxpZApjb25zdCBJTlZBTElEX0NBTkNFTExBVElPTl9GRUU6IEludCA9IDgxOwoKLy8vIEBub3RpY2UgQ2FuY2VsIG9yZGVyIGJ5IHJlc29sdmVyIGlzIGZvcmJpZGRlbgovLy8gQGRldiBVc2VkIHdoZW4gcmVzb2x2ZXIgdHJpZXMgdG8gY2FuY2VsIGFuIG9yZGVyIHRoZXkgc2hvdWxkbid0CmNvbnN0IENBTkNFTF9PUkRFUl9CWV9SRVNPTFZFUl9JU19GT1JCSURERU46IEludCA9IDgyOwoKLy8vIEBub3RpY2UgTWlzc2luZyB0YWtlciBkZXN0aW5hdGlvbiBhc3NvY2lhdGVkIHRva2VuIGFjY291bnQKLy8vIEBkZXYgVXNlZCB3aGVuIHRha2VyJ3MgZGVzdGluYXRpb24gdG9rZW4gYWNjb3VudCBpcyBub3QgZm91bmQKY29uc3QgTUlTU0lOR19UQUtFUl9EU1RfQVRBOiBJbnQgPSA4MzsKCi8vLyBAbm90aWNlIE1pc3NpbmcgbWFrZXIgc291cmNlIGFzc29jaWF0ZWQgdG9rZW4gYWNjb3VudAovLy8gQGRldiBVc2VkIHdoZW4gbWFrZXIncyBzb3VyY2UgdG9rZW4gYWNjb3VudCBpcyBub3QgZm91bmQKY29uc3QgTUlTU0lOR19NQUtFUl9TUkNfQVRBOiBJbnQgPSA4NDsKCi8vLyBAbm90aWNlIEludmFsaWQgcmVjaXBpZW50IGVycm9yCi8vLyBAZGV2IFVzZWQgd2hlbiByZWNpcGllbnQgYWRkcmVzcyBpcyBpbnZhbGlkCmNvbnN0IElOVkFMSURfUkVDSVBJRU5UOiBJbnQgPSA4NTsKCi8vLyBAbm90aWNlIEludmFsaWQgY2hhaW4gSUQgZXJyb3IKLy8vIEBkZXYgVXNlZCB3aGVuIEVWTSBjaGFpbiBJRCBpcyBub3Qgc3VwcG9ydGVkCmNvbnN0IElOVkFMSURfQ0hBSU5fSUQ6IEludCA9IDg4OwoKLy8vIEBub3RpY2UgSW52YWxpZCBicmlkZ2UgY29uZmlndXJhdGlvbiBlcnJvcgovLy8gQGRldiBVc2VkIHdoZW4gYnJpZGdlIGNvbmZpZ3VyYXRpb24gaXMgbWlzc2luZyBvciBpbnZhbGlkCmNvbnN0IElOVkFMSURfQlJJREdFX0NPTkZJRzogSW50ID0gODk7CgovLy8gQG5vdGljZSBJbnZhbGlkIG9yYWNsZSBjb25maWd1cmF0aW9uIGVycm9yCi8vLyBAZGV2IFVzZWQgd2hlbiBvcmFjbGUgY29uZmlndXJhdGlvbiBpcyBtaXNzaW5nIG9yIGludmFsaWQKY29uc3QgSU5WQUxJRF9PUkFDTEVfQ09ORklHOiBJbnQgPSA5MDsKCi8vLyBAbm90aWNlIEVWTSB0cmFuc2FjdGlvbiBmYWlsZWQgZXJyb3IKLy8vIEBkZXYgVXNlZCB3aGVuIEVWTSB0cmFuc2FjdGlvbiBleGVjdXRpb24gZmFpbHMKY29uc3QgRVZNX1RSQU5TQUNUSU9OX0ZBSUxFRDogSW50ID0gOTE7CgovLy8gQG5vdGljZSBFVk0gYnJpZGdlIHRpbWVvdXQgZXJyb3IKLy8vIEBkZXYgVXNlZCB3aGVuIEVWTSBicmlkZ2Ugb3BlcmF0aW9uIHRpbWVzIG91dApjb25zdCBFVk1fQlJJREdFX1RJTUVPVVQ6IEludCA9IDkyOwoKLy8vIEBub3RpY2UgRVZNIGdhcyBsaW1pdCBleGNlZWRlZCBlcnJvcgovLy8gQGRldiBVc2VkIHdoZW4gRVZNIHRyYW5zYWN0aW9uIGdhcyBsaW1pdCBpcyBleGNlZWRlZApjb25zdCBFVk1fR0FTX0xJTUlUX0VYQ0VFREVEOiBJbnQgPSA5MzsKCi8vLyBAbm90aWNlIEVWTSBpbnN1ZmZpY2llbnQgYmFsYW5jZSBlcnJvcgovLy8gQGRldiBVc2VkIHdoZW4gaW5zdWZmaWNpZW50IGJhbGFuY2UgZm9yIEVWTSBvcGVyYXRpb24KY29uc3QgRVZNX0lOU1VGRklDSUVOVF9CQUxBTkNFOiBJbnQgPSA5NDsKCi8vLyBAbm90aWNlIEVWTSBjb250cmFjdCBub3QgZm91bmQgZXJyb3IKLy8vIEBkZXYgVXNlZCB3aGVuIHRhcmdldCBFVk0gY29udHJhY3QgaXMgbm90IGZvdW5kCmNvbnN0IEVWTV9DT05UUkFDVF9OT1RfRk9VTkQ6IEludCA9IDk1OwoKLy8vIEBub3RpY2UgRXNjcm93IGNvbnRyYWN0IG5vdCBkZXBsb3llZCBlcnJvcgovLy8gQGRldiBVc2VkIHdoZW4gZXNjcm93IGNvbnRyYWN0IGlzIG5vdCBkZXBsb3llZCBvbiB0YXJnZXQgY2hhaW4KY29uc3QgRVNDUk9XX05PVF9ERVBMT1lFRDogSW50ID0gMTA2OwoKLy8vIEBub3RpY2UgQ3Jvc3MtY2hhaW4gYnJpZGdlIGZhaWx1cmUgZXJyb3IKLy8vIEBkZXYgVXNlZCB3aGVuIGNyb3NzLWNoYWluIGJyaWRnZSBvcGVyYXRpb24gZmFpbHMKY29uc3QgQlJJREdFX0ZBSUxVUkU6IEludCA9IDEwNzsKCi8vLyBAbm90aWNlIE1lc3NhZ2UgZGVsaXZlcnkgZmFpbGVkIGVycm9yCi8vLyBAZGV2IFVzZWQgd2hlbiBjcm9zcy1jaGFpbiBtZXNzYWdlIGRlbGl2ZXJ5IGZhaWxzCmNvbnN0IE1FU1NBR0VfREVMSVZFUllfRkFJTEVEOiBJbnQgPSAxMDg7CgovLy8gQG5vdGljZSBJbnZhbGlkIEVWTSBtZXNzYWdlIGZvcm1hdCBlcnJvcgovLy8gQGRldiBVc2VkIHdoZW4gRVZNIG1lc3NhZ2UgZm9ybWF0IGlzIGludmFsaWQKY29uc3QgSU5WQUxJRF9FVk1fTUVTU0FHRTogSW50ID0gMTA5OwoKLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQovLyBBQ0NFU1MgQ09OVFJPTCBFUlJPUlMgKDg1LTg3KQovLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CgovLy8gQG5vdGljZSBJbnZhbGlkIG93bmVyIGVycm9yCi8vLyBAZGV2IFVzZWQgd2hlbiBjYWxsZXIgaXMgbm90IHRoZSBjb250cmFjdCBvd25lcgpjb25zdCBJTlZBTElEX09XTkVSOiBJbnQgPSA4NjsKCi8vLyBAbm90aWNlIEludmFsaWQgd2hpdGVsaXN0IGVycm9yCi8vLyBAZGV2IFVzZWQgd2hlbiBjYWxsZXIgaXMgbm90IHdoaXRlbGlzdGVkCmNvbnN0IElOVkFMSURfV0hJVEVMSVNUOiBJbnQgPSA4NzsKCi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KLy8gT1JERVIgTUFOQUdFTUVOVCBFUlJPUlMgKDg4LTEwNCkKLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQoKLy8vIEBub3RpY2UgSW52YWxpZCBoYXNoIGVycm9yCi8vLyBAZGV2IFVzZWQgd2hlbiBvcmRlciBoYXNoIGlzIG5vdCBmb3VuZApjb25zdCBJTlZBTElEX0hBU0g6IEludCA9IDg4OwoKLy8vIEBub3RpY2UgSW52YWxpZCBzZWNyZXQgZXJyb3IKLy8vIEBkZXYgVXNlZCB3aGVuIHNlY3JldCBoYXNoIGRvZXNuJ3QgbWF0Y2ggaGFzaGxvY2sKY29uc3QgSU5WQUxJRF9TRUNSRVQ6IEludCA9IDg5OwoKLy8vIEBub3RpY2UgT3JkZXIgYWxyZWFkeSBleGlzdHMgZXJyb3IKLy8vIEBkZXYgVXNlZCB3aGVuIHRyeWluZyB0byBjcmVhdGUgZHVwbGljYXRlIG9yZGVyCmNvbnN0IE9SREVSX0FMUkVBRFlfRVhJU1RTOiBJbnQgPSA5MDsKCi8vLyBAbm90aWNlIE9yZGVyIGFscmVhZHkgZmluYWxpemVkIGVycm9yCi8vLyBAZGV2IFVzZWQgd2hlbiB0cnlpbmcgdG8gbW9kaWZ5IGEgY29tcGxldGVkL3JlZnVuZGVkIG9yZGVyCmNvbnN0IE9SREVSX0FMUkVBRFlfRklOQUxJWkVEOiBJbnQgPSA5MTsKCi8vLyBAbm90aWNlIEludmFsaWQgc3dhcCBkaXJlY3Rpb24gZXJyb3IKLy8vIEBkZXYgVXNlZCB3aGVuIHN3YXAgZGlyZWN0aW9uIGlzIG5vdCBzdXBwb3J0ZWQKY29uc3QgSU5WQUxJRF9TV0FQX0RJUkVDVElPTjogSW50ID0gOTI7CgovLy8gQG5vdGljZSBJbnZhbGlkIHBhcnRpYWwgZmlsbCBlcnJvcgovLy8gQGRldiBVc2VkIHdoZW4gcGFydGlhbCBmaWxsIHBhcmFtZXRlcnMgYXJlIGludmFsaWQKY29uc3QgSU5WQUxJRF9QQVJUSUFMX0ZJTEw6IEludCA9IDk0OwoKLy8vIEBub3RpY2UgT3JkZXIgbm90IHBhcnRpYWxseSBmaWxsZWQgZXJyb3IKLy8vIEBkZXYgVXNlZCB3aGVuIHRyeWluZyB0byBjb21wbGV0ZSBub24tZXhpc3RlbnQgcGFydGlhbCBmaWxsCmNvbnN0IE9SREVSX05PVF9QQVJUSUFMTFlfRklMTEVEOiBJbnQgPSA5NTsKCi8vLyBAbm90aWNlIEludmFsaWQgcmVsYXllciBlcnJvcgovLy8gQGRldiBVc2VkIHdoZW4gcmVsYXllciBpcyBub3QgcmVnaXN0ZXJlZApjb25zdCBJTlZBTElEX1JFTEFZRVI6IEludCA9IDk2OwoKLy8vIEBub3RpY2UgRXNjcm93IGRlcGxveW1lbnQgZmFpbGVkIGVycm9yCi8vLyBAZGV2IFVzZWQgd2hlbiBlc2Nyb3cgY29udHJhY3QgZGVwbG95bWVudCBmYWlscwpjb25zdCBFU0NST1dfREVQTE9ZTUVOVF9GQUlMRUQ6IEludCA9IDk3OwoKLy8vIEBub3RpY2UgSW52YWxpZCBlc2Nyb3cgY29udHJhY3QgZXJyb3IKLy8vIEBkZXYgVXNlZCB3aGVuIGVzY3JvdyBjb250cmFjdCBpcyBpbnZhbGlkCmNvbnN0IElOVkFMSURfRVNDUk9XX0NPTlRSQUNUOiBJbnQgPSA5ODsKCi8vLyBAbm90aWNlIEluc3VmZmljaWVudCBmdW5kcyBlcnJvcgovLy8gQGRldiBVc2VkIHdoZW4gY29udHJhY3QgYmFsYW5jZSBpcyBpbnN1ZmZpY2llbnQKY29uc3QgSU5TVUZGSUNJRU5UX0ZVTkRTOiBJbnQgPSA5OTsKCi8vLyBAbm90aWNlIFJlbGF5ZXIgbm90IHdoaXRlbGlzdGVkIGVycm9yCi8vLyBAZGV2IFVzZWQgd2hlbiByZWxheWVyIGlzIG5vdCB3aGl0ZWxpc3RlZApjb25zdCBSRUxBWUVSX05PVF9XSElURUxJU1RFRDogSW50ID0gMTAwOwoKLy8vIEBub3RpY2UgT3JkZXIgYWxyZWFkeSBjb21wbGV0ZWQgZXJyb3IKLy8vIEBkZXYgVXNlZCB3aGVuIHRyeWluZyB0byBjb21wbGV0ZSBhbiBhbHJlYWR5IGNvbXBsZXRlZCBvcmRlcgpjb25zdCBPUkRFUl9BTFJFQURZX0NPTVBMRVRFRDogSW50ID0gMTAxOwoKLy8vIEBub3RpY2UgSW52YWxpZCB0YXJnZXQgY2hhaW4gZXJyb3IKLy8vIEBkZXYgVXNlZCB3aGVuIHRhcmdldCBjaGFpbiBpcyBub3Qgc3VwcG9ydGVkCmNvbnN0IElOVkFMSURfVEFSR0VUX0NIQUlOOiBJbnQgPSAxMDI7CgovLy8gQG5vdGljZSBQYXJ0aWFsIGZpbGwgZXhjZWVkcyBvcmRlciBlcnJvcgovLy8gQGRldiBVc2VkIHdoZW4gcGFydGlhbCBmaWxsIGFtb3VudCBleGNlZWRzIHJlbWFpbmluZyBvcmRlciBhbW91bnQKY29uc3QgUEFSVElBTF9GSUxMX0VYQ0VFRFNfT1JERVI6IEludCA9IDEwMzsKCi8vLyBAbm90aWNlIFNlY3JldCBhbHJlYWR5IHVzZWQgZXJyb3IKLy8vIEBkZXYgVXNlZCB3aGVuIHRyeWluZyB0byB1c2UgYSBzZWNyZXQgdGhhdCBoYXMgYWxyZWFkeSBiZWVuIHVzZWQKY29uc3QgU0VDUkVUX0FMUkVBRFlfVVNFRDogSW50ID0gMTA0OwoKLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQovLyBTWVNURU0gRVJST1JTCi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KCi8vLyBAbm90aWNlIFdyb25nIG9wZXJhdGlvbiBlcnJvcgovLy8gQGRldiBVc2VkIGZvciBpbnZhbGlkIG1lc3NhZ2Ugb3Bjb2Rlcwpjb25zdCBXUk9OR19PUDogSW50ID0gMHhmZmZmOwo=","contracts/states.tact":"LyoqCiAqIEB0aXRsZSBUb25GdXNpb24gU3RhdGVzIGFuZCBEYXRhIFN0cnVjdHVyZXMKICogQGF1dGhvciBUb25GdXNpb24gVGVhbQogKiBAbm90aWNlIERhdGEgc3RydWN0dXJlcyBhbmQgY29uc3RhbnRzIGZvciB0aGUgVG9uRnVzaW9uIEhUTEMgcHJvdG9jb2wKICogQGRldiBEZWZpbmVzIHRoZSBjb3JlIGRhdGEgbW9kZWxzIHVzZWQgdGhyb3VnaG91dCB0aGUgcHJvdG9jb2wKICogCiAqIEBjdXN0b206dmVyc2lvbiAxLjAuMAogKiAKICogRGF0YSBTdHJ1Y3R1cmUgQ2F0ZWdvcmllczoKICogLSBPcmRlciBzdHJ1Y3R1cmVzIChPcmRlckNvbmZpZywgT3JkZXIpCiAqIC0gRXNjcm93IGFuZCByZWxheWVyIGRhdGEgKEVzY3Jvd0NvbnRyYWN0LCBSZWxheWVyRGF0YSkKICogLSBVdGlsaXR5IHN0cnVjdHVyZXMgKENhbGN1bGF0ZU91dHB1dCwgUG9pbnRBbmRUaW1lRGVsdGEsIEpldHRvbldhbGxldERhdGEpCiAqIC0gQ29uc3RhbnRzIGZvciBzd2FwIGRpcmVjdGlvbnMgYW5kIEhUTEMgc3RhdHVzCiAqLwoKLy8vIEBub3RpY2UgR2FzIGNvc3QgZm9yIGpldHRvbiB0cmFuc2ZlcnMKLy8vIEBkZXYgU3RhbmRhcmQgZ2FzIGNvc3QgZm9yIGpldHRvbiBvcGVyYXRpb25zCmNvbnN0IEpldHRvblRyYW5zZmVyR2FzOiBJbnQgPSB0b24oIjAuMDUiKTsKCi8qKgogKiBAbm90aWNlIE91dHB1dCBjYWxjdWxhdGlvbiBzdHJ1Y3R1cmUgZm9yIGZlZSBjYWxjdWxhdGlvbnMKICogQGRldiBVc2VkIGZvciBjYWxjdWxhdGluZyBwcm90b2NvbCBhbmQgaW50ZWdyYXRvciBmZWVzCiAqIEBwYXJhbSBwcm90b2NvbEZlZUFtb3VudCBBbW91bnQgb2YgcHJvdG9jb2wgZmVlCiAqIEBwYXJhbSBpbnRlZ3JhdG9yRmVlQW1vdW50IEFtb3VudCBvZiBpbnRlZ3JhdG9yIGZlZQogKiBAcGFyYW0gb3V0cHV0QW1vdW50IEZpbmFsIG91dHB1dCBhbW91bnQgYWZ0ZXIgZmVlcwogKi8Kc3RydWN0IENhbGN1bGF0ZU91dHB1dCB7CiAgICBwcm90b2NvbEZlZUFtb3VudDpJbnQgYXMgdWludDY0OwogICAgaW50ZWdyYXRvckZlZUFtb3VudDpJbnQgYXMgdWludDY0OwogICAgb3V0cHV0QW1vdW50OkludCBhcyB1aW50NjQ7Cn0KCi8qKgogKiBAbm90aWNlIFJhdGUgYW5kIHRpbWUgZGVsdGEgc3RydWN0dXJlIGZvciBkeW5hbWljIHByaWNpbmcKICogQGRldiBVc2VkIGZvciBhZGp1c3RpbmcgcmF0ZXMgYmFzZWQgb24gdGltZSBhbmQgbWFya2V0IGNvbmRpdGlvbnMKICogQHBhcmFtIHJhdGVCdW1wIFJhdGUgYWRqdXN0bWVudCBmYWN0b3IgKGRlZmF1bHQ6IDApCiAqIEBwYXJhbSB0aW1lRGVsdGEgVGltZS1iYXNlZCBhZGp1c3RtZW50IGZhY3RvciAoZGVmYXVsdDogMCkKICovCnN0cnVjdCBQb2ludEFuZFRpbWVEZWx0YSB7CiAgICByYXRlQnVtcDogSW50IGFzIHVpbnQxNiA9IDA7CiAgICB0aW1lRGVsdGE6IEludCBhcyB1aW50MTYgPSAwOwp9CgovKioKICogQG5vdGljZSBDcm9zcy1jaGFpbiBvcmRlciBjb25maWd1cmF0aW9uIGZvciBUT04g4oaUIEVWTSBzd2FwcwogKiBAZGV2IENvbXBsZXRlIG9yZGVyIGRhdGEgZm9yIGNyb3NzLWNoYWluIGF0b21pYyBzd2FwcwogKiBAcGFyYW0gaWQgQ2hhaW4gSUQgZm9yIHRoZSBvcmRlcgogKiBAcGFyYW0gc3JjSmV0dG9uQWRkcmVzcyBTb3VyY2UgamV0dG9uIGFkZHJlc3Mgb24gVE9OCiAqIEBwYXJhbSBzZW5kZXJQdWJLZXkgUHVibGljIGtleSBvZiB0aGUgb3JkZXIgc2VuZGVyCiAqIEBwYXJhbSByZWNlaXZlclB1YktleSBQdWJsaWMga2V5IG9mIHRoZSBvcmRlciByZWNlaXZlcgogKiBAcGFyYW0gaGFzaGxvY2sgSGFzaGxvY2sgZm9yIEhUTEMgdmFsaWRhdGlvbiAoa2VjY2FrMjU2IG9mIHNlY3JldCkKICogQHBhcmFtIHRpbWVsb2NrIFVuaXggdGltZXN0YW1wIHdoZW4gb3JkZXIgZXhwaXJlcwogKiBAcGFyYW0gYW1vdW50IEFtb3VudCBvZiBqZXR0b25zIHRvIHN3YXAKICogQHBhcmFtIGZpbmFsaXplZCBXaGV0aGVyIHRoZSBvcmRlciBoYXMgYmVlbiBjb21wbGV0ZWQgb3IgcmVmdW5kZWQKICogQHBhcmFtIHBhcnRpYWxGaWxscyBNYXAgb2YgcGFydGlhbCBmaWxsIHNlY3JldHMgdG8gYW1vdW50cwogKiBAcGFyYW0gdG90YWxGaWxsZWQgVG90YWwgYW1vdW50IGZpbGxlZCBhY3Jvc3MgYWxsIHBhcnRpYWwgZmlsbHMKICogQHBhcmFtIGRpcmVjdGlvbiBTd2FwIGRpcmVjdGlvbiAoMD1UT05fVE9fRVZNLCAxPUVWTV9UT19UT04sIDI9VE9OX1RPX1RPTikKICogQGN1c3RvbTpzZWN1cml0eSBoYXNobG9jayBtdXN0IGJlIGtlY2NhazI1NiBvZiBhIHNlY3JldAogKiBAY3VzdG9tOnNlY3VyaXR5IHRpbWVsb2NrIG11c3QgYmUgaW4gdGhlIGZ1dHVyZSB3aGVuIG9yZGVyIGlzIGNyZWF0ZWQKICovCnN0cnVjdCBPcmRlckNvbmZpZyB7CiAgICBpZDogSW50IGFzIHVpbnQzMjsgLy8gQ2hhaW4gSUQKICAgIHNyY0pldHRvbkFkZHJlc3M6IEFkZHJlc3M7CiAgICBzZW5kZXJQdWJLZXk6IEFkZHJlc3M7CiAgICByZWNlaXZlclB1YktleTogQWRkcmVzczsKICAgIGhhc2hsb2NrOiBJbnQgYXMgdWludDI1NjsKICAgIHRpbWVsb2NrOiBJbnQgYXMgdWludDMyOwogICAgYW1vdW50OiBJbnQgYXMgdWludDY0OwogICAgZmluYWxpemVkOiBCb29sID0gZmFsc2U7CiAgICBwYXJ0aWFsRmlsbHM6IG1hcDxJbnQgYXMgdWludDI1NiwgSW50IGFzIHVpbnQ2ND4gPSBlbXB0eU1hcCgpOyAvLyBNdWx0aXBsZSBzZWNyZXRzIGZvciBwYXJ0aWFsIGZpbGxzCiAgICB0b3RhbEZpbGxlZDogSW50IGFzIHVpbnQ2NCA9IDA7CiAgICBkaXJlY3Rpb246IEludCBhcyB1aW50ODsgLy8gMD1UT05fVE9fRVZNLCAxPUVWTV9UT19UT04sIDI9VE9OX1RPX1RPTgp9CgovKioKICogQG5vdGljZSBTYW1lLWNoYWluIG9yZGVyIGNvbmZpZ3VyYXRpb24gZm9yIFRPTiDihpQgVE9OIHN3YXBzCiAqIEBkZXYgU2ltcGxpZmllZCBvcmRlciBkYXRhIGZvciBzYW1lLWNoYWluIGF0b21pYyBzd2FwcwogKiBAcGFyYW0gaWQgQ2hhaW4gSUQgZm9yIHRoZSBvcmRlcgogKiBAcGFyYW0gc3JjSmV0dG9uQWRkcmVzcyBTb3VyY2UgamV0dG9uIGFkZHJlc3Mgb24gVE9OCiAqIEBwYXJhbSBzZW5kZXJQdWJLZXkgUHVibGljIGtleSBvZiB0aGUgb3JkZXIgc2VuZGVyCiAqIEBwYXJhbSBoYXNobG9jayBIYXNobG9jayBmb3IgSFRMQyB2YWxpZGF0aW9uIChrZWNjYWsyNTYgb2Ygc2VjcmV0KQogKiBAcGFyYW0gdGltZWxvY2sgVW5peCB0aW1lc3RhbXAgd2hlbiBvcmRlciBleHBpcmVzCiAqIEBwYXJhbSBhbW91bnQgQW1vdW50IG9mIGpldHRvbnMgdG8gc3dhcAogKiBAcGFyYW0gZmluYWxpemVkIFdoZXRoZXIgdGhlIG9yZGVyIGhhcyBiZWVuIGNvbXBsZXRlZCBvciByZWZ1bmRlZAogKiBAcGFyYW0gcGFydGlhbEZpbGxzIE1hcCBvZiBwYXJ0aWFsIGZpbGwgc2VjcmV0cyB0byBhbW91bnRzCiAqIEBwYXJhbSB0b3RhbEZpbGxlZCBUb3RhbCBhbW91bnQgZmlsbGVkIGFjcm9zcyBhbGwgcGFydGlhbCBmaWxscwogKiBAcGFyYW0gZGlyZWN0aW9uIFN3YXAgZGlyZWN0aW9uICgyPVRPTl9UT19UT04gb25seSkKICogQGN1c3RvbTpzZWN1cml0eSBoYXNobG9jayBtdXN0IGJlIGtlY2NhazI1NiBvZiBhIHNlY3JldAogKiBAY3VzdG9tOnNlY3VyaXR5IHRpbWVsb2NrIG11c3QgYmUgaW4gdGhlIGZ1dHVyZSB3aGVuIG9yZGVyIGlzIGNyZWF0ZWQKICovCnN0cnVjdCBPcmRlciB7CiAgICBpZDogSW50IGFzIHVpbnQzMjsgLy8gQ2hhaW4gSUQKICAgIHNyY0pldHRvbkFkZHJlc3M6IEFkZHJlc3M7CiAgICBzZW5kZXJQdWJLZXk6IEFkZHJlc3M7CiAgICBoYXNobG9jazogSW50IGFzIHVpbnQyNTY7CiAgICB0aW1lbG9jazogSW50IGFzIHVpbnQzMjsKICAgIGFtb3VudDogSW50IGFzIHVpbnQ2NDsKICAgIGZpbmFsaXplZDogQm9vbCA9IGZhbHNlOwogICAgcGFydGlhbEZpbGxzOiBtYXA8SW50IGFzIHVpbnQyNTYsIEludCBhcyB1aW50NjQ+ID0gZW1wdHlNYXAoKTsgLy8gTXVsdGlwbGUgc2VjcmV0cyBmb3IgcGFydGlhbCBmaWxscwogICAgdG90YWxGaWxsZWQ6IEludCBhcyB1aW50NjQgPSAwOwogICAgZGlyZWN0aW9uOiBJbnQgYXMgdWludDg7IC8vIDI9VE9OX1RPX1RPTgp9CgovKioKICogQG5vdGljZSBFc2Nyb3cgY29udHJhY3QgZGF0YSBmb3IgdGFyZ2V0IGNoYWlucwogKiBAZGV2IFRyYWNrcyBkZXBsb3llZCBlc2Nyb3cgY29udHJhY3RzIG9uIGRpZmZlcmVudCBjaGFpbnMKICogQHBhcmFtIGNoYWluSWQgVGFyZ2V0IGNoYWluIElEIHdoZXJlIGVzY3JvdyBpcyBkZXBsb3llZAogKiBAcGFyYW0gY29udHJhY3RBZGRyZXNzIEFkZHJlc3Mgb2YgdGhlIGRlcGxveWVkIGVzY3JvdyBjb250cmFjdAogKiBAcGFyYW0gZGVwbG95ZWQgV2hldGhlciB0aGUgZXNjcm93IGNvbnRyYWN0IGhhcyBiZWVuIGRlcGxveWVkCiAqIEBwYXJhbSB0b3RhbE9yZGVycyBUb3RhbCBudW1iZXIgb2Ygb3JkZXJzIHByb2Nlc3NlZCBieSB0aGlzIGVzY3JvdwogKiBAY3VzdG9tOnNlY3VyaXR5IE9ubHkgb3duZXIgY2FuIGRlcGxveSBlc2Nyb3cgY29udHJhY3RzCiAqLwpzdHJ1Y3QgRXNjcm93Q29udHJhY3QgewogICAgY2hhaW5JZDogSW50IGFzIHVpbnQzMjsKICAgIGNvbnRyYWN0QWRkcmVzczogQWRkcmVzczsKICAgIGRlcGxveWVkOiBCb29sID0gZmFsc2U7CiAgICB0b3RhbE9yZGVyczogSW50IGFzIHVpbnQzMiA9IDA7Cn0KCi8qKgogKiBAbm90aWNlIFJlbGF5ZXIvUmVzb2x2ZXIgcGVyZm9ybWFuY2UgZGF0YQogKiBAZGV2IFRyYWNrcyByZWxheWVyIHN0YXRpc3RpY3MgZm9yIHJlcHV0YXRpb24gc3lzdGVtCiAqIEBwYXJhbSBhZGRyZXNzIFJlbGF5ZXIncyBhZGRyZXNzCiAqIEBwYXJhbSB3aGl0ZWxpc3RlZCBXaGV0aGVyIHRoZSByZWxheWVyIGlzIHdoaXRlbGlzdGVkCiAqIEBwYXJhbSB0b3RhbFJlc29sdmVzIFRvdGFsIG51bWJlciBvZiBvcmRlcnMgcmVzb2x2ZWQgYnkgdGhpcyByZWxheWVyCiAqIEBwYXJhbSBzdWNjZXNzUmF0ZSBTdWNjZXNzIHJhdGUgYXMgcGVyY2VudGFnZSAoMC0xMDApCiAqIEBjdXN0b206c2VjdXJpdHkgUmVsYXllcnMgbXVzdCBiZSByZWdpc3RlcmVkIGJlZm9yZSB0aGV5IGNhbiByZXNvbHZlIG9yZGVycwogKi8Kc3RydWN0IFJlbGF5ZXJEYXRhIHsKICAgIGFkZHJlc3M6IEFkZHJlc3M7CiAgICB3aGl0ZWxpc3RlZDogQm9vbCA9IGZhbHNlOwogICAgdG90YWxSZXNvbHZlczogSW50IGFzIHVpbnQzMiA9IDA7CiAgICBzdWNjZXNzUmF0ZTogSW50IGFzIHVpbnQxNiA9IDA7IC8vIFBlcmNlbnRhZ2UKfQoKLyoqCiAqIEBub3RpY2UgU3dhcCBkaXJlY3Rpb24gY29uc3RhbnRzCiAqIEBkZXYgVXNlZCB0byBpZGVudGlmeSB0aGUgdHlwZSBvZiBzd2FwIGJlaW5nIHBlcmZvcm1lZAogKi8KLy8vIEBub3RpY2UgVE9OIHRvIEVWTSBjaGFpbiBzd2FwCmNvbnN0IFRPTl9UT19FVk06IEludCA9IDA7Ci8vLyBAbm90aWNlIEVWTSBjaGFpbiB0byBUT04gc3dhcApjb25zdCBFVk1fVE9fVE9OOiBJbnQgPSAxOwovLy8gQG5vdGljZSBUT04gdG8gVE9OIHNhbWUtY2hhaW4gc3dhcApjb25zdCBUT05fVE9fVE9OOiBJbnQgPSAyOwoKLyoqCiAqIEBub3RpY2UgSFRMQyBzdGF0dXMgY29uc3RhbnRzCiAqIEBkZXYgVXNlZCB0byB0cmFjayB0aGUgY3VycmVudCBzdGF0ZSBvZiBIVExDIG9yZGVycwogKi8KLy8vIEBub3RpY2UgT3JkZXIgaXMgcGVuZGluZyBhbmQgY2FuIGJlIGZpbGxlZApjb25zdCBIVExDX1BFTkRJTkc6IEludCA9IDA7Ci8vLyBAbm90aWNlIE9yZGVyIGhhcyBiZWVuIGNvbXBsZXRlZCBzdWNjZXNzZnVsbHkKY29uc3QgSFRMQ19DT01QTEVURUQ6IEludCA9IDE7Ci8vLyBAbm90aWNlIE9yZGVyIGhhcyBleHBpcmVkIGFuZCBjYW4gYmUgcmVmdW5kZWQKY29uc3QgSFRMQ19FWFBJUkVEOiBJbnQgPSAyOwovLy8gQG5vdGljZSBPcmRlciBoYXMgYmVlbiByZWZ1bmRlZCB0byBvcmlnaW5hbCBzZW5kZXIKY29uc3QgSFRMQ19SRUZVTkRFRDogSW50ID0gMzsKCi8qKgogKiBAbm90aWNlIEpldHRvbiB3YWxsZXQgaW5pdGlhbGl6YXRpb24gZGF0YQogKiBAZGV2IFVzZWQgZm9yIGNhbGN1bGF0aW5nIGpldHRvbiB3YWxsZXQgYWRkcmVzc2VzCiAqIEBwYXJhbSBiYWxhbmNlIEluaXRpYWwgYmFsYW5jZSBvZiB0aGUgamV0dG9uIHdhbGxldAogKiBAcGFyYW0gb3duZXJBZGRyZXNzIEFkZHJlc3Mgb2YgdGhlIHdhbGxldCBvd25lcgogKiBAcGFyYW0gamV0dG9uTWFzdGVyQWRkcmVzcyBBZGRyZXNzIG9mIHRoZSBqZXR0b24gbWFzdGVyIGNvbnRyYWN0CiAqIEBwYXJhbSBqZXR0b25XYWxsZXRDb2RlIENvZGUgY2VsbCBmb3IgdGhlIGpldHRvbiB3YWxsZXQgY29udHJhY3QKICogQGN1c3RvbTppbnRlcm5hbCBVc2VkIGludGVybmFsbHkgZm9yIGFkZHJlc3MgY2FsY3VsYXRpb24KICovCnN0cnVjdCBKZXR0b25XYWxsZXREYXRhIHsKICAgIGJhbGFuY2U6IEludCBhcyBjb2luczsKICAgIG93bmVyQWRkcmVzczogQWRkcmVzczsKICAgIGpldHRvbk1hc3RlckFkZHJlc3M6IEFkZHJlc3M7CiAgICBqZXR0b25XYWxsZXRDb2RlOiBDZWxsOwp9CgovKioKICogQG5vdGljZSBFVk0gY2hhaW4gY29uZmlndXJhdGlvbiBkYXRhCiAqIEBkZXYgQ29udGFpbnMgY2hhaW4tc3BlY2lmaWMgcGFyYW1ldGVycyBmb3IgRVZNIGludGVncmF0aW9uCiAqIEBwYXJhbSBjaGFpbklkIEVWTSBjaGFpbiBJRAogKiBAcGFyYW0gcnBjRW5kcG9pbnQgUlBDIGVuZHBvaW50IGZvciB0aGUgY2hhaW4KICogQHBhcmFtIGJsb2NrVGltZSBBdmVyYWdlIGJsb2NrIHRpbWUgaW4gc2Vjb25kcwogKiBAcGFyYW0gZ2FzTGltaXQgRGVmYXVsdCBnYXMgbGltaXQgZm9yIHRyYW5zYWN0aW9ucwogKiBAcGFyYW0gaXNBY3RpdmUgV2hldGhlciB0aGUgY2hhaW4gaXMgYWN0aXZlIGZvciBzd2FwcwogKiBAcGFyYW0gYnJpZGdlQWRkcmVzcyBCcmlkZ2UgY29udHJhY3QgYWRkcmVzcyBmb3IgY3Jvc3MtY2hhaW4gdHJhbnNmZXJzCiAqIEBwYXJhbSBvcmFjbGVBZGRyZXNzIE9yYWNsZSBjb250cmFjdCBhZGRyZXNzIGZvciBwcmljZSBmZWVkcwogKiBAY3VzdG9tOnNlY3VyaXR5IENoYWluIGNvbmZpZ3VyYXRpb24gbXVzdCBiZSB2YWxpZGF0ZWQgYmVmb3JlIHVzZQogKi8Kc3RydWN0IEVWTUNoYWluQ29uZmlnIHsKICAgIGNoYWluSWQ6IEludCBhcyB1aW50MzI7CiAgICBycGNFbmRwb2ludDogQ2VsbDsgLy8gRW5jb2RlZCBhcyBzdHJpbmcKICAgIGJsb2NrVGltZTogSW50IGFzIHVpbnQzMjsKICAgIGdhc0xpbWl0OiBJbnQgYXMgdWludDMyOwogICAgaXNBY3RpdmU6IEJvb2wgPSB0cnVlOwogICAgYnJpZGdlQWRkcmVzczogQ2VsbDsgLy8gQnJpZGdlIGNvbnRyYWN0IGFkZHJlc3MgZW5jb2RlZCBhcyBjZWxsCiAgICBvcmFjbGVBZGRyZXNzOiBDZWxsOyAvLyBPcmFjbGUgY29udHJhY3QgYWRkcmVzcyBlbmNvZGVkIGFzIGNlbGwKfQoKLyoqCiAqIEBub3RpY2UgRVZNIHRyYW5zYWN0aW9uIGRhdGEgZm9yIGNyb3NzLWNoYWluIG9wZXJhdGlvbnMKICogQGRldiBDb250YWlucyB0cmFuc2FjdGlvbiBkZXRhaWxzIGZvciBFVk0gY2hhaW4gaW50ZXJhY3Rpb25zCiAqIEBwYXJhbSBjaGFpbklkIFRhcmdldCBFVk0gY2hhaW4gSUQKICogQHBhcmFtIHRvQ29udHJhY3QgVGFyZ2V0IGNvbnRyYWN0IGFkZHJlc3MKICogQHBhcmFtIGZ1bmN0aW9uU2VsZWN0b3IgRnVuY3Rpb24gc2VsZWN0b3IgKDQgYnl0ZXMpCiAqIEBwYXJhbSBwYXJhbWV0ZXJzIEZ1bmN0aW9uIHBhcmFtZXRlcnMKICogQHBhcmFtIGdhc0xpbWl0IEdhcyBsaW1pdCBmb3IgdGhlIHRyYW5zYWN0aW9uCiAqIEBwYXJhbSBnYXNQcmljZSBHYXMgcHJpY2UgZm9yIHRoZSB0cmFuc2FjdGlvbgogKiBAcGFyYW0gdmFsdWUgRVRIIHZhbHVlIHRvIHNlbmQKICogQHBhcmFtIG5vbmNlIFRyYW5zYWN0aW9uIG5vbmNlCiAqIEBwYXJhbSBzdGF0dXMgVHJhbnNhY3Rpb24gc3RhdHVzICgwPXBlbmRpbmcsIDE9Y29uZmlybWVkLCAyPWZhaWxlZCkKICogQHBhcmFtIHRyYW5zYWN0aW9uSGFzaCBFVk0gdHJhbnNhY3Rpb24gaGFzaAogKiBAcGFyYW0gYmxvY2tOdW1iZXIgQmxvY2sgbnVtYmVyIHdoZXJlIHRyYW5zYWN0aW9uIHdhcyBpbmNsdWRlZAogKiBAcGFyYW0gY29uZmlybWF0aW9ucyBOdW1iZXIgb2YgY29uZmlybWF0aW9ucwogKiBAY3VzdG9tOnNlY3VyaXR5IFRyYW5zYWN0aW9uIGRhdGEgbXVzdCBiZSB2YWxpZGF0ZWQgYmVmb3JlIGV4ZWN1dGlvbgogKi8Kc3RydWN0IEVWTVRyYW5zYWN0aW9uIHsKICAgIGNoYWluSWQ6IEludCBhcyB1aW50MzI7CiAgICB0b0NvbnRyYWN0OiBDZWxsOyAvLyBUYXJnZXQgY29udHJhY3QgYWRkcmVzcyBlbmNvZGVkIGFzIGNlbGwKICAgIGZ1bmN0aW9uU2VsZWN0b3I6IEludCBhcyB1aW50MzI7CiAgICBwYXJhbWV0ZXJzOiBDZWxsOwogICAgZ2FzTGltaXQ6IEludCBhcyB1aW50MzI7CiAgICBnYXNQcmljZTogSW50IGFzIHVpbnQ2NDsKICAgIHZhbHVlOiBJbnQgYXMgdWludDY0OwogICAgbm9uY2U6IEludCBhcyB1aW50NjQ7CiAgICBzdGF0dXM6IEludCBhcyB1aW50OCA9IDA7IC8vIDA9cGVuZGluZywgMT1jb25maXJtZWQsIDI9ZmFpbGVkCiAgICB0cmFuc2FjdGlvbkhhc2g6IENlbGw7IC8vIEVuY29kZWQgYXMgYnl0ZXMzMgogICAgYmxvY2tOdW1iZXI6IEludCBhcyB1aW50NjQgPSAwOwogICAgY29uZmlybWF0aW9uczogSW50IGFzIHVpbnQzMiA9IDA7Cn0KCi8qKgogKiBAbm90aWNlIEVWTSBicmlkZ2UgZGF0YSBmb3IgY3Jvc3MtY2hhaW4gdHJhbnNmZXJzCiAqIEBkZXYgQ29udGFpbnMgYnJpZGdlLXNwZWNpZmljIGluZm9ybWF0aW9uIGZvciBjcm9zcy1jaGFpbiBvcGVyYXRpb25zCiAqIEBwYXJhbSBicmlkZ2VJZCBVbmlxdWUgYnJpZGdlIGlkZW50aWZpZXIKICogQHBhcmFtIHNvdXJjZUNoYWluSWQgU291cmNlIGNoYWluIElECiAqIEBwYXJhbSB0YXJnZXRDaGFpbklkIFRhcmdldCBjaGFpbiBJRAogKiBAcGFyYW0gYnJpZGdlQ29udHJhY3QgQnJpZGdlIGNvbnRyYWN0IGFkZHJlc3MKICogQHBhcmFtIGJyaWRnZUZlZSBCcmlkZ2UgZmVlIGZvciB0cmFuc2ZlcnMKICogQHBhcmFtIG1pblRyYW5zZmVyQW1vdW50IE1pbmltdW0gdHJhbnNmZXIgYW1vdW50CiAqIEBwYXJhbSBtYXhUcmFuc2ZlckFtb3VudCBNYXhpbXVtIHRyYW5zZmVyIGFtb3VudAogKiBAcGFyYW0gaXNBY3RpdmUgV2hldGhlciB0aGUgYnJpZGdlIGlzIGFjdGl2ZQogKiBAcGFyYW0gbGFzdFVwZGF0ZVRpbWVzdGFtcCBMYXN0IHVwZGF0ZSB0aW1lc3RhbXAKICogQGN1c3RvbTpzZWN1cml0eSBCcmlkZ2UgY29uZmlndXJhdGlvbiBtdXN0IGJlIHZhbGlkYXRlZCBiZWZvcmUgdXNlCiAqLwpzdHJ1Y3QgRVZNQnJpZGdlRGF0YSB7CiAgICBicmlkZ2VJZDogSW50IGFzIHVpbnQzMjsKICAgIHNvdXJjZUNoYWluSWQ6IEludCBhcyB1aW50MzI7CiAgICB0YXJnZXRDaGFpbklkOiBJbnQgYXMgdWludDMyOwogICAgYnJpZGdlQ29udHJhY3Q6IEFkZHJlc3M7CiAgICBicmlkZ2VGZWU6IEludCBhcyB1aW50NjQ7CiAgICBtaW5UcmFuc2ZlckFtb3VudDogSW50IGFzIHVpbnQ2NDsKICAgIG1heFRyYW5zZmVyQW1vdW50OiBJbnQgYXMgdWludDY0OwogICAgaXNBY3RpdmU6IEJvb2wgPSB0cnVlOwogICAgbGFzdFVwZGF0ZVRpbWVzdGFtcDogSW50IGFzIHVpbnQzMjsKfQoKLyoqCiAqIEBub3RpY2UgRVZNIG9yYWNsZSBkYXRhIGZvciBwcmljZSBmZWVkcwogKiBAZGV2IENvbnRhaW5zIG9yYWNsZS1zcGVjaWZpYyBpbmZvcm1hdGlvbiBmb3IgcHJpY2UgdXBkYXRlcwogKiBAcGFyYW0gb3JhY2xlSWQgVW5pcXVlIG9yYWNsZSBpZGVudGlmaWVyCiAqIEBwYXJhbSBjaGFpbklkIEVWTSBjaGFpbiBJRCB3aGVyZSBvcmFjbGUgb3BlcmF0ZXMKICogQHBhcmFtIG9yYWNsZUNvbnRyYWN0IE9yYWNsZSBjb250cmFjdCBhZGRyZXNzCiAqIEBwYXJhbSB0b2tlbkFkZHJlc3MgVG9rZW4gYWRkcmVzcyBmb3IgcHJpY2UgZmVlZAogKiBAcGFyYW0gcHJpY2VEZWNpbWFscyBOdW1iZXIgb2YgZGVjaW1hbCBwbGFjZXMgZm9yIHByaWNlCiAqIEBwYXJhbSBoZWFydGJlYXRJbnRlcnZhbCBIZWFydGJlYXQgaW50ZXJ2YWwgZm9yIHByaWNlIHVwZGF0ZXMKICogQHBhcmFtIGlzQWN0aXZlIFdoZXRoZXIgdGhlIG9yYWNsZSBpcyBhY3RpdmUKICogQHBhcmFtIGxhc3RQcmljZVVwZGF0ZSBMYXN0IHByaWNlIHVwZGF0ZSB0aW1lc3RhbXAKICogQGN1c3RvbTpzZWN1cml0eSBPcmFjbGUgZGF0YSBtdXN0IGJlIHZhbGlkYXRlZCBiZWZvcmUgdXNlCiAqLwpzdHJ1Y3QgRVZNT3JhY2xlRGF0YSB7CiAgICBvcmFjbGVJZDogSW50IGFzIHVpbnQzMjsKICAgIGNoYWluSWQ6IEludCBhcyB1aW50MzI7CiAgICBvcmFjbGVDb250cmFjdDogQWRkcmVzczsKICAgIHRva2VuQWRkcmVzczogQWRkcmVzczsKICAgIHByaWNlRGVjaW1hbHM6IEludCBhcyB1aW50ODsKICAgIGhlYXJ0YmVhdEludGVydmFsOiBJbnQgYXMgdWludDMyOwogICAgaXNBY3RpdmU6IEJvb2wgPSB0cnVlOwogICAgbGFzdFByaWNlVXBkYXRlOiBJbnQgYXMgdWludDMyOwp9CgovKioKICogQG5vdGljZSBDcm9zcy1jaGFpbiBtZXNzYWdlIGZvciBFVk0gY29tbXVuaWNhdGlvbgogKiBAZGV2IENvbnRhaW5zIG1lc3NhZ2UgZGF0YSBmb3IgY3Jvc3MtY2hhaW4gdHJhbnNmZXJzCiAqIEBwYXJhbSBzb3VyY2VDaGFpbiBTb3VyY2UgY2hhaW4gSUQKICogQHBhcmFtIHRhcmdldENoYWluIFRhcmdldCBjaGFpbiBJRAogKiBAcGFyYW0gb3JkZXJIYXNoIEhhc2ggb2YgdGhlIG9yZGVyIGJlaW5nIHByb2Nlc3NlZAogKiBAcGFyYW0gYW1vdW50IFRyYW5zZmVyIGFtb3VudAogKiBAcGFyYW0gc2VjcmV0IFNlY3JldCBmb3Igb3JkZXIgdmFsaWRhdGlvbgogKiBAcGFyYW0gdGltZXN0YW1wIE1lc3NhZ2UgdGltZXN0YW1wCiAqIEBwYXJhbSBub25jZSBVbmlxdWUgbWVzc2FnZSBub25jZQogKiBAY3VzdG9tOnNlY3VyaXR5IE1lc3NhZ2UgZGF0YSBtdXN0IGJlIHZhbGlkYXRlZCBiZWZvcmUgcHJvY2Vzc2luZwogKi8Kc3RydWN0IENyb3NzQ2hhaW5NZXNzYWdlIHsKICAgIHNvdXJjZUNoYWluOiBJbnQgYXMgdWludDMyOwogICAgdGFyZ2V0Q2hhaW46IEludCBhcyB1aW50MzI7CiAgICBvcmRlckhhc2g6IEludCBhcyB1aW50MjU2OwogICAgYW1vdW50OiBJbnQgYXMgdWludDY0OwogICAgc2VjcmV0OiBJbnQgYXMgdWludDI1NjsKICAgIHRpbWVzdGFtcDogSW50IGFzIHVpbnQzMjsKICAgIG5vbmNlOiBJbnQgYXMgdWludDY0Owp9CgoK","contracts/consts.tact":"LyoqCiAqIEB0aXRsZSBUb25GdXNpb24gQ29uc3RhbnRzCiAqIEBhdXRob3IgVG9uRnVzaW9uIFRlYW0KICogQG5vdGljZSBNYXRoZW1hdGljYWwgY29uc3RhbnRzIGFuZCBiYXNlIHZhbHVlcyBmb3IgdGhlIFRvbkZ1c2lvbiBIVExDIHByb3RvY29sCiAqIEBkZXYgUHJvdmlkZXMgc3RhbmRhcmRpemVkIGJhc2UgdmFsdWVzIHVzZWQgdGhyb3VnaG91dCB0aGUgcHJvdG9jb2wKICogCiAqIEBjdXN0b206dmVyc2lvbiAxLjAuMAogKiAKICogQ29uc3RhbnQgQ2F0ZWdvcmllczoKICogLSBNYXRoZW1hdGljYWwgYmFzZSB2YWx1ZXMKICogLSBQcmVjaXNpb24gY29uc3RhbnRzCiAqIC0gU2NhbGluZyBmYWN0b3JzCiAqIC0gRVZNIGNoYWluIGNvbnN0YW50cwogKiAtIFZhbGlkYXRpb24gY29uc3RhbnRzCiAqLwoKLyoqCiAqIEBub3RpY2UgQmFzZSB2YWx1ZSBmb3IgMWUyICgxMDApCiAqIEBkZXYgVXNlZCBmb3IgcGVyY2VudGFnZSBjYWxjdWxhdGlvbnMgYW5kIHNjYWxpbmcKICogQGN1c3RvbTppbnRlcm5hbCBVc2VkIGludGVybmFsbHkgZm9yIG1hdGhlbWF0aWNhbCBvcGVyYXRpb25zCiAqLwpjb25zdCBCQVNFXzFFMjogSW50ID0gMTAwOwoKLyoqCiAqIEBub3RpY2UgQmFzZSB2YWx1ZSBmb3IgMWUzICgxMDAwKQogKiBAZGV2IFVzZWQgZm9yIGZlZSBjYWxjdWxhdGlvbnMgYW5kIHNjYWxpbmcKICogQGN1c3RvbTppbnRlcm5hbCBVc2VkIGludGVybmFsbHkgZm9yIG1hdGhlbWF0aWNhbCBvcGVyYXRpb25zCiAqLwpjb25zdCBCQVNFXzFFMzogSW50ID0gMTAwMDsKCi8qKgogKiBAbm90aWNlIEJhc2UgdmFsdWUgZm9yIDFlNSAoMTAwLDAwMCkKICogQGRldiBVc2VkIGZvciBwcmVjaXNpb24gY2FsY3VsYXRpb25zIGFuZCBsYXJnZSBudW1iZXIgc2NhbGluZwogKiBAY3VzdG9tOmludGVybmFsIFVzZWQgaW50ZXJuYWxseSBmb3IgbWF0aGVtYXRpY2FsIG9wZXJhdGlvbnMKICovCmNvbnN0IEJBU0VfMUU1OiBJbnQgPSAxMDBfMDAwOwoKLyoqCiAqIEBub3RpY2UgRVZNIENoYWluIElEcyBmb3Igc3VwcG9ydGVkIG5ldHdvcmtzCiAqIEBkZXYgVXNlZCBmb3IgY2hhaW4gdmFsaWRhdGlvbiBhbmQgcm91dGluZwogKiBAY3VzdG9tOnNlY3VyaXR5IE9ubHkgc3VwcG9ydGVkIGNoYWlucyBhcmUgYWxsb3dlZAogKi8KY29uc3QgRVZNX0NIQUlOX0VUSEVSRVVNOiBJbnQgPSAxOwpjb25zdCBFVk1fQ0hBSU5fUE9MWUdPTjogSW50ID0gMTM3Owpjb25zdCBFVk1fQ0hBSU5fQlNDOiBJbnQgPSA1NjsKY29uc3QgRVZNX0NIQUlOX0JBU0U6IEludCA9IDg0NTM7CmNvbnN0IEVWTV9DSEFJTl9BUkJJVFJVTTogSW50ID0gNDIxNjE7CgovKioKICogQG5vdGljZSBUT04gQ2hhaW4gSURzCiAqIEBkZXYgVXNlZCBmb3IgY2hhaW4gdmFsaWRhdGlvbiBhbmQgcm91dGluZwogKiBAY3VzdG9tOnNlY3VyaXR5IE9ubHkgc3VwcG9ydGVkIGNoYWlucyBhcmUgYWxsb3dlZAogKi8KY29uc3QgVE9OX0NIQUlOX01BSU5ORVQ6IEludCA9IC0zOwpjb25zdCBUT05fQ0hBSU5fVEVTVE5FVDogSW50ID0gLTIzOTsKCi8qKgogKiBAbm90aWNlIFN3YXAgZGlyZWN0aW9uIGNvbnN0YW50cwogKiBAZGV2IFVzZWQgZm9yIGRldGVybWluaW5nIHN3YXAgdHlwZSBhbmQgcm91dGluZwogKiBAY3VzdG9tOmludGVybmFsIFVzZWQgZm9yIG9yZGVyIGRpcmVjdGlvbiBkZXRlcm1pbmF0aW9uCiAqLwpjb25zdCBTV0FQX0RJUkVDVElPTl9UT05fVE9fRVZNOiBJbnQgPSAwOwpjb25zdCBTV0FQX0RJUkVDVElPTl9FVk1fVE9fVE9OOiBJbnQgPSAxOwpjb25zdCBTV0FQX0RJUkVDVElPTl9UT05fVE9fVE9OOiBJbnQgPSAyOwoKLyoqCiAqIEBub3RpY2UgRVZNIGludGVncmF0aW9uIGNvbnN0YW50cwogKiBAZGV2IFVzZWQgZm9yIGNyb3NzLWNoYWluIG1lc3NhZ2UgaGFuZGxpbmcgYW5kIHZhbGlkYXRpb24KICogQGN1c3RvbTppbnRlcm5hbCBVc2VkIGZvciBFVk0gY29udHJhY3QgaW50ZXJhY3Rpb25zCiAqLwpjb25zdCBFVk1fTUVTU0FHRV9PUENPREU6IEludCA9IDB4MTIzNDU2Nzg7CmNvbnN0IEVWTV9DT05UUkFDVF9DQUxMX0dBU19MSU1JVDogSW50ID0gMzAwMDAwOwpjb25zdCBFVk1fQ09OVFJBQ1RfREVQTE9ZX0dBU19MSU1JVDogSW50ID0gNTAwMDAwOwpjb25zdCBFVk1fQlJJREdFX1RJTUVPVVRfU0VDT05EUzogSW50ID0gMzYwMDsgLy8gMSBob3VyCmNvbnN0IEVWTV9DT05GSVJNQVRJT05fQkxPQ0tTOiBJbnQgPSAxMjsgLy8gU3RhbmRhcmQgY29uZmlybWF0aW9uIGJsb2NrcwoKLyoqCiAqIEBub3RpY2UgRVZNIGJyaWRnZSBhbmQgcmV0cnkgY29uc3RhbnRzCiAqIEBkZXYgVXNlZCBmb3IgYnJpZGdlIGZhaWx1cmUgaGFuZGxpbmcgYW5kIHJldHJ5IGxvZ2ljCiAqIEBjdXN0b206aW50ZXJuYWwgVXNlZCBmb3IgY3Jvc3MtY2hhaW4gcmVsaWFiaWxpdHkKICovCmNvbnN0IEVWTV9NQVhfUkVUUllfQVRURU1QVFM6IEludCA9IDM7CmNvbnN0IEVWTV9SRVRSWV9ERUxBWV9TRUNPTkRTOiBJbnQgPSAzMDA7IC8vIDUgbWludXRlcwpjb25zdCBFVk1fQlJJREdFX0ZFRV9CQVNFOiBJbnQgPSB0b24oIjAuMDEiKTsgLy8gQmFzZSBicmlkZ2UgZmVlCmNvbnN0IEVWTV9HQVNfUFJJQ0VfTVVMVElQTElFUjogSW50ID0gMTEwOyAvLyAxMTAlIG9mIGJhc2UgZ2FzIHByaWNlCgoK","contracts/utils.tact":"aW1wb3J0ICIuL3N0YXRlcy50YWN0IjsKCi8qKgogKiBAdGl0bGUgVG9uRnVzaW9uIFV0aWxpdGllcwogKiBAYXV0aG9yIFRvbkZ1c2lvbiBUZWFtCiAqIEBub3RpY2UgVXRpbGl0eSBmdW5jdGlvbnMgYW5kIGhlbHBlcnMgZm9yIHRoZSBUb25GdXNpb24gSFRMQyBwcm90b2NvbAogKiBAZGV2IFByb3ZpZGVzIGNvbW1vbiBmdW5jdGlvbmFsaXR5IHVzZWQgYWNyb3NzIHRoZSBwcm90b2NvbAogKiAKICogQGN1c3RvbTp2ZXJzaW9uIDEuMC4wCiAqIAogKiBVdGlsaXR5IENhdGVnb3JpZXM6CiAqIC0gSmV0dG9uIHdhbGxldCBtYW5hZ2VtZW50CiAqIC0gQ3J5cHRvZ3JhcGhpYyBmdW5jdGlvbnMKICogLSBDaGFpbiB2YWxpZGF0aW9uCiAqIC0gT3JkZXIgcHJvY2Vzc2luZwogKiAtIFNlcmlhbGl6YXRpb24gaGVscGVycwogKi8KCi8qKgogKiBAbm90aWNlIEpldHRvbiB0cmFuc2ZlciBtZXNzYWdlIGZvciBpbnRlcm5hbCB0cmFuc2ZlcnMKICogQGRldiBVc2VkIGZvciBzZW5kaW5nIGpldHRvbnMgYmV0d2VlbiBjb250cmFjdHMKICogQHBhcmFtIHF1ZXJ5SWQgVW5pcXVlIHF1ZXJ5IGlkZW50aWZpZXIKICogQHBhcmFtIGFtb3VudCBBbW91bnQgb2YgamV0dG9ucyB0byB0cmFuc2ZlcgogKiBAcGFyYW0gZGVzdGluYXRpb24gRGVzdGluYXRpb24gYWRkcmVzcwogKiBAcGFyYW0gcmVzcG9uc2VEZXN0aW5hdGlvbiBPcHRpb25hbCByZXNwb25zZSBkZXN0aW5hdGlvbgogKiBAcGFyYW0gY3VzdG9tUGF5bG9hZCBPcHRpb25hbCBjdXN0b20gcGF5bG9hZAogKiBAcGFyYW0gZm9yd2FyZFRvbkFtb3VudCBBbW91bnQgb2YgVE9OIHRvIGZvcndhcmQKICogQHBhcmFtIGZvcndhcmRQYXlsb2FkIEZvcndhcmQgcGF5bG9hZCBkYXRhCiAqIEBjdXN0b206b3Bjb2RlIDB4ZjhhN2VhNQogKi8KbWVzc2FnZSgweGY4YTdlYTUpIFNlbmRWaWFKZXR0b25UcmFuc2ZlciB7CiAgICBxdWVyeUlkOiBJbnQgYXMgdWludDY0OwogICAgYW1vdW50OiBJbnQgYXMgY29pbnM7CiAgICBkZXN0aW5hdGlvbjogQWRkcmVzczsKICAgIHJlc3BvbnNlRGVzdGluYXRpb246IEFkZHJlc3M/OwogICAgY3VzdG9tUGF5bG9hZDogQ2VsbD87CiAgICBmb3J3YXJkVG9uQW1vdW50OiBJbnQgYXMgY29pbnM7CiAgICBmb3J3YXJkUGF5bG9hZDogU2xpY2UgYXMgcmVtYWluaW5nOwp9CgovKioKICogQG5vdGljZSBDYWxjdWxhdGUgamV0dG9uIHdhbGxldCBhZGRyZXNzIHVzaW5nIFJVTlZNCiAqIEBkZXYgSW1wcm92ZWQgY2FsY3VsYXRpb24gdXNpbmcgUlVOVk0gZm9yIGJldHRlciBjb21wYXRpYmlsaXR5CiAqIEBwYXJhbSBvd25lciBPd25lciBhZGRyZXNzIGZvciB0aGUgamV0dG9uIHdhbGxldAogKiBAcGFyYW0gamV0dG9uRGF0YSBKZXR0b24gZGF0YSBjZWxsCiAqIEBwYXJhbSBqZXR0b25Db2RlIEpldHRvbiB3YWxsZXQgY29kZSBjZWxsCiAqIEBwYXJhbSBqZXR0b25NYXN0ZXIgSmV0dG9uIG1hc3RlciBjb250cmFjdCBhZGRyZXNzCiAqIEByZXR1cm4gQ2FsY3VsYXRlZCBqZXR0b24gd2FsbGV0IGFkZHJlc3MKICogQGN1c3RvbTppbnRlcm5hbCBUaGlzIGlzIGFuIGludGVybmFsIHV0aWxpdHkgZnVuY3Rpb24KICovCmFzbSBmdW4gY2FsY3VsYXRlSmV0dG9uV2FsbGV0KG93bmVyOiBBZGRyZXNzLCBqZXR0b25EYXRhOiBDZWxsLCBqZXR0b25Db2RlOiBDZWxsLCBqZXR0b25NYXN0ZXI6IEFkZHJlc3MpOiBBZGRyZXNzIHsKICAgIGM3IFBVU0hDVFIKICAgIDAgSU5ERVggLy8gVW5wYWNrIHNpbmdsZXRvbiBmcm9tIGM3CiAgICBTV0FQCiAgICA4IFNFVElOREVYCiAgICBTV0FQCiAgICBEVVAKICAgIFJPVFJFVgogICAgMTAgU0VUSU5ERVgKICAgIDEgVFVQTEUgLy8gTWFrZSBpdCBzaW5nbGV0b24gYmFjawogICAgUk9UUkVWCiAgICBDVE9TICAgICAgICAgICAgLy8gb3duZXJfYWRkciBjNyBtZCBtYyIKICAgIDIgUFVTSElOVCAgICAgICAvLyBvd25lcl9hZGRyIGM3IG1kIG1jIGFyZ3MiCiAgICAxMDMyODkgUFVTSElOVCAgLy8gb3duZXJfYWRkciBjNyBtZCBtYyBhcmdzIGdldF9qd2FfbWV0aG9kX2lkIgogICAgNSAwIFJFVkVSU0UgICAgIC8vIG93bmVyX2FkZHIgZ2V0X2p3YV9tZXRob2RfaWQgYXJncyBtYyBtZCBjNyIKICAgIDUzIFJVTlZNICAgICAgICAvLyBhZGRyZXNzIGV4aXRfY29kZSBjNCcgYzUnIgogICAgMyBCTEtEUk9QICAgICAgIC8vIGFkZHJlc3MiCn0KCi8qKgogKiBAbm90aWNlIENhbGN1bGF0ZSBqZXR0b24gd2FsbGV0IGFkZHJlc3MgKGZhbGxiYWNrIG1ldGhvZCkKICogQGRldiBGYWxsYmFjayBjYWxjdWxhdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG9sZGVyIGpldHRvbiBzdGFuZGFyZHMKICogQHBhcmFtIG93bmVyQWRkcmVzcyBPd25lciBhZGRyZXNzIGZvciB0aGUgamV0dG9uIHdhbGxldAogKiBAcGFyYW0gamV0dG9uTWFzdGVyQWRkcmVzcyBKZXR0b24gbWFzdGVyIGNvbnRyYWN0IGFkZHJlc3MKICogQHBhcmFtIGpldHRvbldhbGxldENvZGUgSmV0dG9uIHdhbGxldCBjb2RlIGNlbGwKICogQHJldHVybiBDYWxjdWxhdGVkIGpldHRvbiB3YWxsZXQgYWRkcmVzcwogKiBAY3VzdG9tOmludGVybmFsIFRoaXMgaXMgYW4gaW50ZXJuYWwgdXRpbGl0eSBmdW5jdGlvbgogKi8KZnVuIGNhbGN1bGF0ZUpldHRvbldhbGxldEFkZHJlc3MoCiAgICBvd25lckFkZHJlc3M6IEFkZHJlc3MsCiAgICBqZXR0b25NYXN0ZXJBZGRyZXNzOiBBZGRyZXNzLAogICAgamV0dG9uV2FsbGV0Q29kZTogQ2VsbAopOiBBZGRyZXNzIHsKICAgIGxldCBpbml0RGF0YSA9IEpldHRvbldhbGxldERhdGF7CiAgICAgICAgYmFsYW5jZTogMCwKICAgICAgICBvd25lckFkZHJlc3MsCiAgICAgICAgamV0dG9uTWFzdGVyQWRkcmVzcywKICAgICAgICBqZXR0b25XYWxsZXRDb2RlLAogICAgfTsKCiAgICByZXR1cm4gY29udHJhY3RBZGRyZXNzKFN0YXRlSW5pdHsKICAgICAgICBjb2RlOiBqZXR0b25XYWxsZXRDb2RlLAogICAgICAgIGRhdGE6IGluaXREYXRhLnRvQ2VsbCgpLAogICAgfSk7Cn0KCi8qKgogKiBAbm90aWNlIENyZWF0ZSBhIHplcm8gYWRkcmVzcyBmb3IgcGxhY2Vob2xkZXIgcHVycG9zZXMKICogQGRldiBDcmVhdGVzIGFuIGFkZHJlc3MgdGhhdCByZXByZXNlbnRzIGEgbnVsbC96ZXJvIGFkZHJlc3MKICogQHJldHVybiBaZXJvIGFkZHJlc3MgZm9yIHBsYWNlaG9sZGVyIHVzZQogKiBAY3VzdG9tOmludGVybmFsIFVzZWQgZm9yIHBsYWNlaG9sZGVyIGFkZHJlc3NlcwogKi8KZnVuIGNyZWF0ZVplcm9BZGRyZXNzKCk6IEFkZHJlc3MgewogICAgcmV0dXJuIGNvbnRyYWN0QWRkcmVzcyhTdGF0ZUluaXR7CiAgICAgICAgY29kZTogYmVnaW5DZWxsKCkuZW5kQ2VsbCgpLAogICAgICAgIGRhdGE6IGJlZ2luQ2VsbCgpLmVuZENlbGwoKSwKICAgIH0pOwp9CgovKioKICogQG5vdGljZSBFbmhhbmNlZCBoYXNoIGZ1bmN0aW9uIGZvciBIVExDCiAqIEBkZXYgR2VuZXJhdGVzIGtlY2NhazI1NiBoYXNoIG9mIGEgc2VjcmV0IGZvciBoYXNobG9jayBjcmVhdGlvbgogKiBAcGFyYW0gc2VjcmV0IFRoZSBzZWNyZXQgdG8gaGFzaAogKiBAcmV0dXJuIEhhc2ggb2YgdGhlIHNlY3JldCAoaGFzaGxvY2spCiAqIEBjdXN0b206c2VjdXJpdHkgVGhpcyBmdW5jdGlvbiBpcyBjcml0aWNhbCBmb3IgSFRMQyBzZWN1cml0eQogKi8KZnVuIGtlY2Nha0J5dGVzMzIoc2VjcmV0OiBJbnQpOiBJbnQgewogICAgbGV0IGNlbGw6IENlbGwgPSBiZWdpbkNlbGwoKQogICAgICAgIC5zdG9yZVVpbnQoc2VjcmV0LCAyNTYpCiAgICAgICAgLmVuZENlbGwoKTsKICAgIHJldHVybiBjZWxsLmhhc2goKTsKfQoKLyoqCiAqIEBub3RpY2UgR2VuZXJhdGUgbXVsdGlwbGUgc2VjcmV0cyBmb3IgcGFydGlhbCBmaWxscwogKiBAZGV2IENyZWF0ZXMgYSBtYXAgb2YgcGFydGlhbCBzZWNyZXRzIGZvciBsYXJnZSBvcmRlciBzcGxpdHRpbmcKICogQHBhcmFtIGJhc2VTZWNyZXQgQmFzZSBzZWNyZXQgdG8gZGVyaXZlIGZyb20KICogQHBhcmFtIGNvdW50IE51bWJlciBvZiBwYXJ0aWFsIHNlY3JldHMgdG8gZ2VuZXJhdGUKICogQHJldHVybiBNYXAgb2YgcGFydGlhbCBoYXNoIHRvIHBhcnRpYWwgc2VjcmV0CiAqIEBjdXN0b206aW50ZXJuYWwgVXNlZCBmb3IgcGFydGlhbCBmaWxsIGZ1bmN0aW9uYWxpdHkKICovCmZ1biBnZW5lcmF0ZVBhcnRpYWxTZWNyZXRzKGJhc2VTZWNyZXQ6IEludCwgY291bnQ6IEludCk6IG1hcDxJbnQgYXMgdWludDI1NiwgSW50IGFzIHVpbnQyNTY+IHsKICAgIGxldCBzZWNyZXRzOiBtYXA8SW50IGFzIHVpbnQyNTYsIEludCBhcyB1aW50MjU2PiA9IGVtcHR5TWFwKCk7CiAgICBsZXQgaTogSW50ID0gMDsKICAgIHdoaWxlIChpIDwgY291bnQpIHsKICAgICAgICBsZXQgcGFydGlhbFNlY3JldCA9IGJhc2VTZWNyZXQgKyBpOwogICAgICAgIGxldCBwYXJ0aWFsSGFzaCA9IGtlY2Nha0J5dGVzMzIocGFydGlhbFNlY3JldCk7CiAgICAgICAgc2VjcmV0cy5zZXQocGFydGlhbEhhc2gsIHBhcnRpYWxTZWNyZXQpOwogICAgICAgIGkgPSBpICsgMTsKICAgIH0KICAgIHJldHVybiBzZWNyZXRzOwp9CgovKioKICogQG5vdGljZSBWYWxpZGF0ZSBjaGFpbiBJRCBmb3Igc3VwcG9ydGVkIG5ldHdvcmtzCiAqIEBkZXYgQ2hlY2tzIGlmIGEgY2hhaW4gSUQgaXMgc3VwcG9ydGVkIGJ5IHRoZSBwcm90b2NvbAogKiBAcGFyYW0gY2hhaW5JZCBDaGFpbiBJRCB0byB2YWxpZGF0ZQogKiBAcmV0dXJuIFRydWUgaWYgY2hhaW4gSUQgaXMgc3VwcG9ydGVkLCBmYWxzZSBvdGhlcndpc2UKICogQGN1c3RvbTpzZWN1cml0eSBPbmx5IHN1cHBvcnRlZCBjaGFpbnMgYXJlIGFsbG93ZWQKICovCmZ1biBpc1ZhbGlkQ2hhaW5JZChjaGFpbklkOiBJbnQpOiBCb29sIHsKICAgIHJldHVybiBjaGFpbklkID09IDEgfHwgLy8gRXRoZXJldW0KICAgICAgICAgICBjaGFpbklkID09IDEzNyB8fCAvLyBQb2x5Z29uCiAgICAgICAgICAgY2hhaW5JZCA9PSA1NiB8fCAvLyBCU0MKICAgICAgICAgICBjaGFpbklkID09IDg0NTMgfHwgLy8gQmFzZQogICAgICAgICAgIGNoYWluSWQgPT0gNDIxNjEgfHwgLy8gQXJiaXRydW0KICAgICAgICAgICBjaGFpbklkID09IC0zIHx8IC8vIFRPTiBNYWlubmV0CiAgICAgICAgICAgY2hhaW5JZCA9PSAtMjM5OyAvLyBUT04gVGVzdG5ldAp9CgovKioKICogQG5vdGljZSBWYWxpZGF0ZSBFVk0gY2hhaW4gSUQgZm9yIHN1cHBvcnRlZCBuZXR3b3JrcwogKiBAZGV2IENoZWNrcyBpZiBhbiBFVk0gY2hhaW4gSUQgaXMgc3VwcG9ydGVkIGJ5IHRoZSBwcm90b2NvbAogKiBAcGFyYW0gY2hhaW5JZCBFVk0gY2hhaW4gSUQgdG8gdmFsaWRhdGUKICogQHJldHVybiBUcnVlIGlmIEVWTSBjaGFpbiBJRCBpcyBzdXBwb3J0ZWQsIGZhbHNlIG90aGVyd2lzZQogKiBAY3VzdG9tOnNlY3VyaXR5IE9ubHkgc3VwcG9ydGVkIEVWTSBjaGFpbnMgYXJlIGFsbG93ZWQKICovCmZ1biBpc1ZhbGlkRVZNQ2hhaW5JZChjaGFpbklkOiBJbnQpOiBCb29sIHsKICAgIHJldHVybiBjaGFpbklkID09IEVWTV9DSEFJTl9FVEhFUkVVTSB8fAogICAgICAgICAgIGNoYWluSWQgPT0gRVZNX0NIQUlOX1BPTFlHT04gfHwKICAgICAgICAgICBjaGFpbklkID09IEVWTV9DSEFJTl9CU0MgfHwKICAgICAgICAgICBjaGFpbklkID09IEVWTV9DSEFJTl9CQVNFIHx8CiAgICAgICAgICAgY2hhaW5JZCA9PSBFVk1fQ0hBSU5fQVJCSVRSVU07Cn0KCi8qKgogKiBAbm90aWNlIFZhbGlkYXRlIFRPTiBjaGFpbiBJRAogKiBAZGV2IENoZWNrcyBpZiBhIFRPTiBjaGFpbiBJRCBpcyB2YWxpZAogKiBAcGFyYW0gY2hhaW5JZCBUT04gY2hhaW4gSUQgdG8gdmFsaWRhdGUKICogQHJldHVybiBUcnVlIGlmIFRPTiBjaGFpbiBJRCBpcyB2YWxpZCwgZmFsc2Ugb3RoZXJ3aXNlCiAqIEBjdXN0b206c2VjdXJpdHkgT25seSB2YWxpZCBUT04gY2hhaW5zIGFyZSBhbGxvd2VkCiAqLwpmdW4gaXNWYWxpZFRPTkNoYWluSWQoY2hhaW5JZDogSW50KTogQm9vbCB7CiAgICByZXR1cm4gY2hhaW5JZCA9PSBUT05fQ0hBSU5fTUFJTk5FVCB8fCBjaGFpbklkID09IFRPTl9DSEFJTl9URVNUTkVUOwp9CgovKioKICogQG5vdGljZSBHZXQgRVZNIGNoYWluIGNvbmZpZ3VyYXRpb24KICogQGRldiBSZXR1cm5zIGNoYWluLXNwZWNpZmljIHBhcmFtZXRlcnMgZm9yIEVWTSBpbnRlZ3JhdGlvbgogKiBAcGFyYW0gY2hhaW5JZCBFVk0gY2hhaW4gSUQKICogQHJldHVybiBFVk1DaGFpbkNvbmZpZyB3aXRoIGNoYWluIHBhcmFtZXRlcnMKICogQGN1c3RvbTppbnRlcm5hbCBVc2VkIGZvciBFVk0gY2hhaW4gY29uZmlndXJhdGlvbgogKi8KZnVuIGdldEVWTUNoYWluQ29uZmlnKGNoYWluSWQ6IEludCk6IEVWTUNoYWluQ29uZmlnPyB7CiAgICBpZiAoY2hhaW5JZCA9PSBFVk1fQ0hBSU5fRVRIRVJFVU0pIHsKICAgICAgICByZXR1cm4gRVZNQ2hhaW5Db25maWcgewogICAgICAgICAgICBjaGFpbklkOiBFVk1fQ0hBSU5fRVRIRVJFVU0sCiAgICAgICAgICAgIHJwY0VuZHBvaW50OiBiZWdpbkNlbGwoKS5lbmRDZWxsKCksIC8vIFJQQyBlbmRwb2ludCBwbGFjZWhvbGRlcgogICAgICAgICAgICBibG9ja1RpbWU6IDEyLAogICAgICAgICAgICBnYXNMaW1pdDogRVZNX0NPTlRSQUNUX0NBTExfR0FTX0xJTUlULAogICAgICAgICAgICBpc0FjdGl2ZTogdHJ1ZSwKICAgICAgICAgICAgYnJpZGdlQWRkcmVzczogYmVnaW5DZWxsKCkuZW5kQ2VsbCgpLCAvLyBQbGFjZWhvbGRlcgogICAgICAgICAgICBvcmFjbGVBZGRyZXNzOiBiZWdpbkNlbGwoKS5lbmRDZWxsKCksIC8vIFBsYWNlaG9sZGVyCiAgICAgICAgfTsKICAgIH0gZWxzZSBpZiAoY2hhaW5JZCA9PSBFVk1fQ0hBSU5fUE9MWUdPTikgewogICAgICAgIHJldHVybiBFVk1DaGFpbkNvbmZpZyB7CiAgICAgICAgICAgIGNoYWluSWQ6IEVWTV9DSEFJTl9QT0xZR09OLAogICAgICAgICAgICBycGNFbmRwb2ludDogYmVnaW5DZWxsKCkuZW5kQ2VsbCgpLCAvLyBSUEMgZW5kcG9pbnQgcGxhY2Vob2xkZXIKICAgICAgICAgICAgYmxvY2tUaW1lOiAyLAogICAgICAgICAgICBnYXNMaW1pdDogRVZNX0NPTlRSQUNUX0NBTExfR0FTX0xJTUlULAogICAgICAgICAgICBpc0FjdGl2ZTogdHJ1ZSwKICAgICAgICAgICAgYnJpZGdlQWRkcmVzczogYmVnaW5DZWxsKCkuZW5kQ2VsbCgpLCAvLyBQbGFjZWhvbGRlcgogICAgICAgICAgICBvcmFjbGVBZGRyZXNzOiBiZWdpbkNlbGwoKS5lbmRDZWxsKCksIC8vIFBsYWNlaG9sZGVyCiAgICAgICAgfTsKICAgIH0gZWxzZSBpZiAoY2hhaW5JZCA9PSBFVk1fQ0hBSU5fQlNDKSB7CiAgICAgICAgcmV0dXJuIEVWTUNoYWluQ29uZmlnIHsKICAgICAgICAgICAgY2hhaW5JZDogRVZNX0NIQUlOX0JTQywKICAgICAgICAgICAgcnBjRW5kcG9pbnQ6IGJlZ2luQ2VsbCgpLmVuZENlbGwoKSwgLy8gUlBDIGVuZHBvaW50IHBsYWNlaG9sZGVyCiAgICAgICAgICAgIGJsb2NrVGltZTogMywKICAgICAgICAgICAgZ2FzTGltaXQ6IEVWTV9DT05UUkFDVF9DQUxMX0dBU19MSU1JVCwKICAgICAgICAgICAgaXNBY3RpdmU6IHRydWUsCiAgICAgICAgICAgIGJyaWRnZUFkZHJlc3M6IGJlZ2luQ2VsbCgpLmVuZENlbGwoKSwgLy8gUGxhY2Vob2xkZXIKICAgICAgICAgICAgb3JhY2xlQWRkcmVzczogYmVnaW5DZWxsKCkuZW5kQ2VsbCgpLCAvLyBQbGFjZWhvbGRlcgogICAgICAgIH07CiAgICB9IGVsc2UgaWYgKGNoYWluSWQgPT0gRVZNX0NIQUlOX0JBU0UpIHsKICAgICAgICByZXR1cm4gRVZNQ2hhaW5Db25maWcgewogICAgICAgICAgICBjaGFpbklkOiBFVk1fQ0hBSU5fQkFTRSwKICAgICAgICAgICAgcnBjRW5kcG9pbnQ6IGJlZ2luQ2VsbCgpLmVuZENlbGwoKSwgLy8gUlBDIGVuZHBvaW50IHBsYWNlaG9sZGVyCiAgICAgICAgICAgIGJsb2NrVGltZTogMiwKICAgICAgICAgICAgZ2FzTGltaXQ6IEVWTV9DT05UUkFDVF9DQUxMX0dBU19MSU1JVCwKICAgICAgICAgICAgaXNBY3RpdmU6IHRydWUsCiAgICAgICAgICAgIGJyaWRnZUFkZHJlc3M6IGJlZ2luQ2VsbCgpLmVuZENlbGwoKSwgLy8gUGxhY2Vob2xkZXIKICAgICAgICAgICAgb3JhY2xlQWRkcmVzczogYmVnaW5DZWxsKCkuZW5kQ2VsbCgpLCAvLyBQbGFjZWhvbGRlcgogICAgICAgIH07CiAgICB9IGVsc2UgaWYgKGNoYWluSWQgPT0gRVZNX0NIQUlOX0FSQklUUlVNKSB7CiAgICAgICAgcmV0dXJuIEVWTUNoYWluQ29uZmlnIHsKICAgICAgICAgICAgY2hhaW5JZDogRVZNX0NIQUlOX0FSQklUUlVNLAogICAgICAgICAgICBycGNFbmRwb2ludDogYmVnaW5DZWxsKCkuZW5kQ2VsbCgpLCAvLyBSUEMgZW5kcG9pbnQgcGxhY2Vob2xkZXIKICAgICAgICAgICAgYmxvY2tUaW1lOiAxLAogICAgICAgICAgICBnYXNMaW1pdDogRVZNX0NPTlRSQUNUX0NBTExfR0FTX0xJTUlULAogICAgICAgICAgICBpc0FjdGl2ZTogdHJ1ZSwKICAgICAgICAgICAgYnJpZGdlQWRkcmVzczogYmVnaW5DZWxsKCkuZW5kQ2VsbCgpLCAvLyBQbGFjZWhvbGRlcgogICAgICAgICAgICBvcmFjbGVBZGRyZXNzOiBiZWdpbkNlbGwoKS5lbmRDZWxsKCksIC8vIFBsYWNlaG9sZGVyCiAgICAgICAgfTsKICAgIH0KICAgIHJldHVybiBudWxsOwp9CgovKioKICogQG5vdGljZSBDcmVhdGUgRVZNIGNyb3NzLWNoYWluIG1lc3NhZ2UKICogQGRldiBDcmVhdGVzIGEgbWVzc2FnZSBmb3IgRVZNIGNoYWluIGludGVyYWN0aW9ucwogKiBAcGFyYW0gdGFyZ2V0Q2hhaW5JZCBUYXJnZXQgRVZNIGNoYWluIElECiAqIEBwYXJhbSB0YXJnZXRDb250cmFjdCBUYXJnZXQgRVZNIGNvbnRyYWN0IGFkZHJlc3MKICogQHBhcmFtIGZ1bmN0aW9uU2VsZWN0b3IgRVZNIGZ1bmN0aW9uIHNlbGVjdG9yCiAqIEBwYXJhbSBwYXJhbWV0ZXJzIEZ1bmN0aW9uIHBhcmFtZXRlcnMKICogQHBhcmFtIGdhc0xpbWl0IEdhcyBsaW1pdCBmb3IgdGhlIGNhbGwKICogQHBhcmFtIHZhbHVlIEVUSCB2YWx1ZSB0byBzZW5kCiAqIEByZXR1cm4gQ3Jvc3MtY2hhaW4gbWVzc2FnZSBmb3IgRVZNIGNvbW11bmljYXRpb24KICogQGN1c3RvbTppbnRlcm5hbCBVc2VkIGZvciBFVk0gY29udHJhY3QgaW50ZXJhY3Rpb25zCiAqLwpmdW4gY3JlYXRlRVZNQ3Jvc3NDaGFpbk1lc3NhZ2UoCiAgICB0YXJnZXRDaGFpbklkOiBJbnQsCiAgICB0YXJnZXRDb250cmFjdDogQ2VsbCwKICAgIGZ1bmN0aW9uU2VsZWN0b3I6IEludCwKICAgIHBhcmFtZXRlcnM6IENlbGwsCiAgICBnYXNMaW1pdDogSW50LAogICAgdmFsdWU6IEludAopOiBDcm9zc0NoYWluTWVzc2FnZSB7CiAgICByZXR1cm4gQ3Jvc3NDaGFpbk1lc3NhZ2UgewogICAgICAgIHNvdXJjZUNoYWluOiBUT05fQ0hBSU5fTUFJTk5FVCwKICAgICAgICB0YXJnZXRDaGFpbjogdGFyZ2V0Q2hhaW5JZCwKICAgICAgICBvcmRlckhhc2g6IDAsIC8vIFdpbGwgYmUgc2V0IGJ5IGNhbGxlcgogICAgICAgIGFtb3VudDogMCwgLy8gV2lsbCBiZSBzZXQgYnkgY2FsbGVyCiAgICAgICAgc2VjcmV0OiAwLCAvLyBXaWxsIGJlIHNldCBieSBjYWxsZXIKICAgICAgICB0aW1lc3RhbXA6IDAsIC8vIFdpbGwgYmUgc2V0IGJ5IGNhbGxlcgogICAgICAgIG5vbmNlOiAwLCAvLyBXaWxsIGJlIHNldCBieSBjYWxsZXIKICAgIH07Cn0KCi8qKgogKiBAbm90aWNlIENyZWF0ZSBFVk0gY29udHJhY3QgZGVwbG95bWVudCBtZXNzYWdlCiAqIEBkZXYgQ3JlYXRlcyBhIG1lc3NhZ2UgZm9yIGRlcGxveWluZyBjb250cmFjdHMgb24gRVZNIGNoYWlucwogKiBAcGFyYW0gdGFyZ2V0Q2hhaW5JZCBUYXJnZXQgRVZNIGNoYWluIElECiAqIEBwYXJhbSBjb250cmFjdEJ5dGVjb2RlIEVWTSBjb250cmFjdCBieXRlY29kZQogKiBAcGFyYW0gY29uc3RydWN0b3JQYXJhbXMgQ29uc3RydWN0b3IgcGFyYW1ldGVycwogKiBAcGFyYW0gZ2FzTGltaXQgR2FzIGxpbWl0IGZvciBkZXBsb3ltZW50CiAqIEBwYXJhbSB2YWx1ZSBFVEggdmFsdWUgdG8gc2VuZAogKiBAcmV0dXJuIEVWTUNvbnRyYWN0RGVwbG95IGZvciBjb250cmFjdCBkZXBsb3ltZW50CiAqIEBjdXN0b206aW50ZXJuYWwgVXNlZCBmb3IgRVZNIGNvbnRyYWN0IGRlcGxveW1lbnQKICovCmZ1biBjcmVhdGVFVk1Db250cmFjdERlcGxveSgKICAgIHRhcmdldENoYWluSWQ6IEludCwKICAgIGNvbnRyYWN0Qnl0ZWNvZGU6IENlbGwsCiAgICBjb25zdHJ1Y3RvclBhcmFtczogQ2VsbCwKICAgIGdhc0xpbWl0OiBJbnQsCiAgICB2YWx1ZTogSW50Cik6IEVWTUNvbnRyYWN0RGVwbG95IHsKICAgIHJldHVybiBFVk1Db250cmFjdERlcGxveSB7CiAgICAgICAgdGFyZ2V0Q2hhaW5JZDogdGFyZ2V0Q2hhaW5JZCwKICAgICAgICBjb250cmFjdEJ5dGVjb2RlOiBjb250cmFjdEJ5dGVjb2RlLAogICAgICAgIGNvbnN0cnVjdG9yUGFyYW1zOiBjb25zdHJ1Y3RvclBhcmFtcywKICAgICAgICBnYXNMaW1pdDogZ2FzTGltaXQsCiAgICAgICAgdmFsdWU6IHZhbHVlLAogICAgICAgIGN1c3RvbVBheWxvYWQ6IG51bGwsCiAgICB9Owp9CgovKioKICogQG5vdGljZSBDYWxjdWxhdGUgRVZNIGdhcyBwcmljZSBiYXNlZCBvbiBjaGFpbgogKiBAZGV2IFJldHVybnMgYXBwcm9wcmlhdGUgZ2FzIHByaWNlIGZvciBkaWZmZXJlbnQgRVZNIGNoYWlucwogKiBAcGFyYW0gY2hhaW5JZCBFVk0gY2hhaW4gSUQKICogQHJldHVybiBHYXMgcHJpY2UgaW4gd2VpCiAqIEBjdXN0b206aW50ZXJuYWwgVXNlZCBmb3IgZ2FzIHByaWNlIGVzdGltYXRpb24KICovCmZ1biBjYWxjdWxhdGVFVk1HYXNQcmljZShjaGFpbklkOiBJbnQpOiBJbnQgewogICAgaWYgKGNoYWluSWQgPT0gRVZNX0NIQUlOX0VUSEVSRVVNKSB7CiAgICAgICAgcmV0dXJuIDIwMDAwMDAwMDAwOyAvLyAyMCBnd2VpCiAgICB9IGVsc2UgaWYgKGNoYWluSWQgPT0gRVZNX0NIQUlOX1BPTFlHT04pIHsKICAgICAgICByZXR1cm4gMzAwMDAwMDAwMDA7IC8vIDMwIGd3ZWkKICAgIH0gZWxzZSBpZiAoY2hhaW5JZCA9PSBFVk1fQ0hBSU5fQlNDKSB7CiAgICAgICAgcmV0dXJuIDUwMDAwMDAwMDA7IC8vIDUgZ3dlaQogICAgfSBlbHNlIGlmIChjaGFpbklkID09IEVWTV9DSEFJTl9CQVNFKSB7CiAgICAgICAgcmV0dXJuIDEwMDAwMDAwMDA7IC8vIDEgZ3dlaQogICAgfSBlbHNlIGlmIChjaGFpbklkID09IEVWTV9DSEFJTl9BUkJJVFJVTSkgewogICAgICAgIHJldHVybiAxMDAwMDAwMDA7IC8vIDAuMSBnd2VpCiAgICB9CiAgICByZXR1cm4gMjAwMDAwMDAwMDA7IC8vIERlZmF1bHQgdG8gMjAgZ3dlaQp9CgovKioKICogQG5vdGljZSBWYWxpZGF0ZSBFVk0gdHJhbnNhY3Rpb24gcGFyYW1ldGVycwogKiBAZGV2IENoZWNrcyBpZiBFVk0gdHJhbnNhY3Rpb24gcGFyYW1ldGVycyBhcmUgdmFsaWQKICogQHBhcmFtIHRyYW5zYWN0aW9uIEVWTSB0cmFuc2FjdGlvbiB0byB2YWxpZGF0ZQogKiBAcmV0dXJuIFRydWUgaWYgdHJhbnNhY3Rpb24gaXMgdmFsaWQsIGZhbHNlIG90aGVyd2lzZQogKiBAY3VzdG9tOnNlY3VyaXR5IENyaXRpY2FsIGZvciB0cmFuc2FjdGlvbiB2YWxpZGF0aW9uCiAqLwpmdW4gdmFsaWRhdGVFVk1UcmFuc2FjdGlvbih0cmFuc2FjdGlvbjogRVZNVHJhbnNhY3Rpb24pOiBCb29sIHsKICAgIHJldHVybiBpc1ZhbGlkRVZNQ2hhaW5JZCh0cmFuc2FjdGlvbi5jaGFpbklkKSAmJgogICAgICAgICAgIHRyYW5zYWN0aW9uLmdhc0xpbWl0ID4gMCAmJgogICAgICAgICAgIHRyYW5zYWN0aW9uLmdhc0xpbWl0IDw9IEVWTV9DT05UUkFDVF9DQUxMX0dBU19MSU1JVCAmJgogICAgICAgICAgIHRyYW5zYWN0aW9uLmdhc1ByaWNlID4gMCAmJgogICAgICAgICAgIHRyYW5zYWN0aW9uLnZhbHVlID49IDA7Cn0KCi8qKgogKiBAbm90aWNlIENhbGN1bGF0ZSBFVk0gYnJpZGdlIGZlZSBiYXNlZCBvbiBhbW91bnQgYW5kIGNoYWluCiAqIEBkZXYgUmV0dXJucyBicmlkZ2UgZmVlIGZvciBjcm9zcy1jaGFpbiB0cmFuc2ZlcnMKICogQHBhcmFtIGFtb3VudCBUcmFuc2ZlciBhbW91bnQKICogQHBhcmFtIHNvdXJjZUNoYWluSWQgU291cmNlIGNoYWluIElECiAqIEBwYXJhbSB0YXJnZXRDaGFpbklkIFRhcmdldCBjaGFpbiBJRAogKiBAcmV0dXJuIEJyaWRnZSBmZWUgYW1vdW50CiAqIEBjdXN0b206aW50ZXJuYWwgVXNlZCBmb3IgZmVlIGNhbGN1bGF0aW9uCiAqLwpmdW4gY2FsY3VsYXRlRVZNQnJpZGdlRmVlKGFtb3VudDogSW50LCBzb3VyY2VDaGFpbklkOiBJbnQsIHRhcmdldENoYWluSWQ6IEludCk6IEludCB7CiAgICBsZXQgYmFzZUZlZSA9IDEwMDAwMDA7IC8vIDAuMDAxIFRPTiBiYXNlIGZlZQogICAgbGV0IHBlcmNlbnRhZ2VGZWUgPSBhbW91bnQgKiAxIC8gMTAwMDA7IC8vIDAuMDElIGZlZQogICAgCiAgICAvLyBIaWdoZXIgZmVlcyBmb3IgY3Jvc3MtY2hhaW4gdHJhbnNmZXJzCiAgICBpZiAoc291cmNlQ2hhaW5JZCA9PSBUT05fQ0hBSU5fTUFJTk5FVCB8fCBzb3VyY2VDaGFpbklkID09IFRPTl9DSEFJTl9URVNUTkVUKSB7CiAgICAgICAgaWYgKGlzVmFsaWRFVk1DaGFpbklkKHRhcmdldENoYWluSWQpKSB7CiAgICAgICAgICAgIHJldHVybiBiYXNlRmVlICsgcGVyY2VudGFnZUZlZSArIDUwMDAwMDA7IC8vIEV4dHJhIGZvciBUT04gdG8gRVZNCiAgICAgICAgfQogICAgfSBlbHNlIGlmIChpc1ZhbGlkRVZNQ2hhaW5JZChzb3VyY2VDaGFpbklkKSkgewogICAgICAgIGlmICh0YXJnZXRDaGFpbklkID09IFRPTl9DSEFJTl9NQUlOTkVUIHx8IHRhcmdldENoYWluSWQgPT0gVE9OX0NIQUlOX1RFU1RORVQpIHsKICAgICAgICAgICAgcmV0dXJuIGJhc2VGZWUgKyBwZXJjZW50YWdlRmVlICsgMzAwMDAwMDsgLy8gTGVzcyBmb3IgRVZNIHRvIFRPTgogICAgICAgIH0KICAgIH0KICAgIAogICAgcmV0dXJuIGJhc2VGZWUgKyBwZXJjZW50YWdlRmVlOwp9CgovKioKICogQG5vdGljZSBDYWxjdWxhdGUgc3dhcCBkaXJlY3Rpb24gYmFzZWQgb24gY2hhaW4gSURzCiAqIEBkZXYgRGV0ZXJtaW5lcyB0aGUgdHlwZSBvZiBzd2FwIGJhc2VkIG9uIHNvdXJjZSBhbmQgZGVzdGluYXRpb24gY2hhaW5zCiAqIEBwYXJhbSBmcm9tQ2hhaW5JZCBTb3VyY2UgY2hhaW4gSUQKICogQHBhcmFtIHRvQ2hhaW5JZCBEZXN0aW5hdGlvbiBjaGFpbiBJRAogKiBAcmV0dXJuIFN3YXAgZGlyZWN0aW9uIGNvbnN0YW50IChUT05fVE9fRVZNLCBFVk1fVE9fVE9OLCBvciBUT05fVE9fVE9OKQogKiBAY3VzdG9tOmludGVybmFsIFVzZWQgZm9yIG9yZGVyIGRpcmVjdGlvbiBkZXRlcm1pbmF0aW9uCiAqLwpmdW4gZ2V0U3dhcERpcmVjdGlvbihmcm9tQ2hhaW5JZDogSW50LCB0b0NoYWluSWQ6IEludCk6IEludCB7CiAgICBpZiAoZnJvbUNoYWluSWQgPT0gLTMgfHwgZnJvbUNoYWluSWQgPT0gLTIzOSkgewogICAgICAgIGlmICh0b0NoYWluSWQgPT0gLTMgfHwgdG9DaGFpbklkID09IC0yMzkpIHsKICAgICAgICAgICAgcmV0dXJuIFRPTl9UT19UT047CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIFRPTl9UT19FVk07CiAgICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gRVZNX1RPX1RPTjsKICAgIH0KfQoKLyoqCiAqIEBub3RpY2UgQ2FsY3VsYXRlIHRpbWVsb2NrIGJhc2VkIG9uIGNoYWluIGFuZCBkaXJlY3Rpb24KICogQGRldiBTZXRzIGFwcHJvcHJpYXRlIHRpbWVsb2NrIGR1cmF0aW9uIGJhc2VkIG9uIHN3YXAgdHlwZQogKiBAcGFyYW0gY2hhaW5JZCBUYXJnZXQgY2hhaW4gSUQKICogQHBhcmFtIGRpcmVjdGlvbiBTd2FwIGRpcmVjdGlvbgogKiBAcmV0dXJuIENhbGN1bGF0ZWQgdGltZWxvY2sgdGltZXN0YW1wCiAqIEBjdXN0b206aW50ZXJuYWwgVXNlZCBmb3Igb3JkZXIgdGltZWxvY2sgY2FsY3VsYXRpb24KICovCmZ1biBjYWxjdWxhdGVUaW1lbG9jayhjaGFpbklkOiBJbnQsIGRpcmVjdGlvbjogSW50KTogSW50IHsKICAgIGxldCBiYXNlVGltZSA9IG5vdygpOwogICAgaWYgKGRpcmVjdGlvbiA9PSBUT05fVE9fRVZNKSB7CiAgICAgICAgcmV0dXJuIGJhc2VUaW1lICsgMzYwMDsgLy8gMSBob3VyIGZvciBjcm9zcy1jaGFpbgogICAgfSBlbHNlIGlmIChkaXJlY3Rpb24gPT0gRVZNX1RPX1RPTikgewogICAgICAgIHJldHVybiBiYXNlVGltZSArIDE4MDA7IC8vIDMwIG1pbnV0ZXMgZm9yIEVWTSB0byBUT04KICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIGJhc2VUaW1lICsgOTAwOyAvLyAxNSBtaW51dGVzIGZvciBzYW1lLWNoYWluCiAgICB9Cn0KCi8qKgogKiBAbm90aWNlIFZhbGlkYXRlIG9yZGVyIHBhcmFtZXRlcnMKICogQGRldiBDaGVja3MgaWYgb3JkZXIgcGFyYW1ldGVycyBhcmUgdmFsaWQKICogQHBhcmFtIG9yZGVyIE9yZGVyIGNvbmZpZ3VyYXRpb24gdG8gdmFsaWRhdGUKICogQHJldHVybiBUcnVlIGlmIG9yZGVyIGlzIHZhbGlkLCBmYWxzZSBvdGhlcndpc2UKICogQGN1c3RvbTpzZWN1cml0eSBDcml0aWNhbCBmb3Igb3JkZXIgdmFsaWRhdGlvbgogKi8KZnVuIHZhbGlkYXRlT3JkZXIob3JkZXI6IE9yZGVyQ29uZmlnKTogQm9vbCB7CiAgICByZXR1cm4gb3JkZXIuYW1vdW50ID4gMCAmJgogICAgICAgICAgIG9yZGVyLnRpbWVsb2NrID4gbm93KCkgJiYKICAgICAgICAgICBpc1ZhbGlkQ2hhaW5JZChvcmRlci5pZCkgJiYKICAgICAgICAgICBvcmRlci5oYXNobG9jayAhPSAwOwp9CgovKioKICogQG5vdGljZSBDYWxjdWxhdGUgZmVlcyBiYXNlZCBvbiBvcmRlciBzaXplIGFuZCBkaXJlY3Rpb24KICogQGRldiBEZXRlcm1pbmVzIGFwcHJvcHJpYXRlIGZlZXMgZm9yIGRpZmZlcmVudCBzd2FwIHR5cGVzCiAqIEBwYXJhbSBhbW91bnQgT3JkZXIgYW1vdW50CiAqIEBwYXJhbSBkaXJlY3Rpb24gU3dhcCBkaXJlY3Rpb24KICogQHJldHVybiBDYWxjdWxhdGVkIGZlZSBhbW91bnQKICogQGN1c3RvbTppbnRlcm5hbCBVc2VkIGZvciBmZWUgY2FsY3VsYXRpb24KICovCmZ1biBjYWxjdWxhdGVGZWVzKGFtb3VudDogSW50LCBkaXJlY3Rpb246IEludCk6IEludCB7CiAgICBsZXQgYmFzZUZlZSA9IDEwMDAwMDA7IC8vIDAuMDAxIFRPTiBiYXNlIGZlZQogICAgbGV0IHBlcmNlbnRhZ2VGZWUgPSBhbW91bnQgKiA1IC8gMTAwMDA7IC8vIDAuMDUlIGZlZQogICAgCiAgICBpZiAoZGlyZWN0aW9uID09IFRPTl9UT19FVk0pIHsKICAgICAgICByZXR1cm4gYmFzZUZlZSArIHBlcmNlbnRhZ2VGZWUgKyA1MDAwMDAwOyAvLyBFeHRyYSBmb3IgY3Jvc3MtY2hhaW4KICAgIH0gZWxzZSBpZiAoZGlyZWN0aW9uID09IEVWTV9UT19UT04pIHsKICAgICAgICByZXR1cm4gYmFzZUZlZSArIHBlcmNlbnRhZ2VGZWUgKyAzMDAwMDAwOyAvLyBMZXNzIGZvciBFVk0gdG8gVE9OCiAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBiYXNlRmVlICsgcGVyY2VudGFnZUZlZTsgLy8gU3RhbmRhcmQgZm9yIHNhbWUtY2hhaW4KICAgIH0KfQoKLyoqCiAqIEBub3RpY2UgQ2FsY3VsYXRlIHByaWNlIGZvciBqZXR0b24gZm9yd2FyZAogKiBAZGV2IERldGVybWluZXMgdGhlIGNvc3Qgb2YgZm9yd2FyZGluZyBqZXR0b25zCiAqIEBwYXJhbSBmd2RGZWUgRm9yd2FyZCBmZWUKICogQHBhcmFtIGZ3ZFRvbkFtb3VudCBGb3J3YXJkIFRPTiBhbW91bnQKICogQHJldHVybiBDYWxjdWxhdGVkIGZvcndhcmQgcHJpY2UKICogQGN1c3RvbTppbnRlcm5hbCBVc2VkIGZvciBqZXR0b24gdHJhbnNmZXIgcHJpY2luZwogKi8KaW5saW5lIGZ1biBwcmljZU9mSmV0dG9uRm9yd2FyZChmd2RGZWU6IEludCwgZndkVG9uQW1vdW50OiBJbnQpOiBJbnQgewogICAgcmV0dXJuCiAgICAgICAgZndkVG9uQW1vdW50ICsKICAgICAgICAyICogZndkRmVlICsKICAgICAgICBnZXRGb3J3YXJkRmVlKDQwLCAzMDAwMCwgZmFsc2UpICsKICAgICAgICAoMiAqIGdldENvbXB1dGVGZWUoMzAwMDAsIGZhbHNlKSArCiAgICAgICAgIHRvbigiMC4wMiIpKTsKfQoKLyoqCiAqIEBub3RpY2UgRW5oYW5jZWQgc2VyaWFsaXphdGlvbiBmb3IgT3JkZXJDb25maWcgd2l0aCBwYXJ0aWFsIGZpbGxzCiAqIEBkZXYgU2VyaWFsaXplcyBPcmRlckNvbmZpZyB3aXRoIHNlY3JldCBmb3IgdHJhbnNmZXIKICogQHBhcmFtIG9yZGVyIE9yZGVyIGNvbmZpZ3VyYXRpb24gdG8gc2VyaWFsaXplCiAqIEBwYXJhbSBzZWNyZXQgU2VjcmV0IGZvciB0aGUgb3JkZXIKICogQHJldHVybiBTZXJpYWxpemVkIG9yZGVyIGNlbGwKICogQGN1c3RvbTppbnRlcm5hbCBVc2VkIGZvciBvcmRlciBkYXRhIHNlcmlhbGl6YXRpb24KICovCmlubGluZSBmdW4gc2VyaWFsaXplT3JkZXJDb25maWcob3JkZXI6IE9yZGVyQ29uZmlnLCBzZWNyZXQ6IEludCk6IENlbGwgewogICAgcmV0dXJuIGJlZ2luQ2VsbCgpCiAgICAgICAgLnN0b3JlVWludChvcmRlci5pZCwgMzIpCiAgICAgICAgLnN0b3JlQWRkcmVzcyhvcmRlci5zcmNKZXR0b25BZGRyZXNzKQogICAgICAgIC5zdG9yZUFkZHJlc3Mob3JkZXIuc2VuZGVyUHViS2V5KQogICAgICAgIC5zdG9yZUFkZHJlc3Mob3JkZXIucmVjZWl2ZXJQdWJLZXkpCiAgICAgICAgLnN0b3JlVWludChvcmRlci5oYXNobG9jaywgMjU2KQogICAgICAgIC5zdG9yZVVpbnQob3JkZXIudGltZWxvY2ssIDMyKQogICAgICAgIC5zdG9yZVVpbnQob3JkZXIuYW1vdW50LCA2NCkKICAgICAgICAuc3RvcmVCb29sKG9yZGVyLmZpbmFsaXplZCkKICAgICAgICAuc3RvcmVVaW50KG9yZGVyLnRvdGFsRmlsbGVkLCA2NCkKICAgICAgICAuc3RvcmVVaW50KG9yZGVyLmRpcmVjdGlvbiwgOCkKICAgICAgICAuc3RvcmVVaW50KHNlY3JldCwgMjU2KQogICAgICAgIC5lbmRDZWxsKCk7Cn0KCi8qKgogKiBAbm90aWNlIEVuaGFuY2VkIHNlcmlhbGl6YXRpb24gZm9yIE9yZGVyIHdpdGggcGFydGlhbCBmaWxscwogKiBAZGV2IFNlcmlhbGl6ZXMgT3JkZXIgd2l0aCBzZWNyZXQgZm9yIHRyYW5zZmVyCiAqIEBwYXJhbSBvcmRlciBPcmRlciB0byBzZXJpYWxpemUKICogQHBhcmFtIHNlY3JldCBTZWNyZXQgZm9yIHRoZSBvcmRlcgogKiBAcmV0dXJuIFNlcmlhbGl6ZWQgb3JkZXIgY2VsbAogKiBAY3VzdG9tOmludGVybmFsIFVzZWQgZm9yIG9yZGVyIGRhdGEgc2VyaWFsaXphdGlvbgogKi8KaW5saW5lIGZ1biBzZXJpYWxpemVPcmRlcihvcmRlcjogT3JkZXIsIHNlY3JldDogSW50KTogQ2VsbCB7CiAgICByZXR1cm4gYmVnaW5DZWxsKCkKICAgICAgICAuc3RvcmVVaW50KG9yZGVyLmlkLCAzMikKICAgICAgICAuc3RvcmVBZGRyZXNzKG9yZGVyLnNyY0pldHRvbkFkZHJlc3MpCiAgICAgICAgLnN0b3JlQWRkcmVzcyhvcmRlci5zZW5kZXJQdWJLZXkpCiAgICAgICAgLnN0b3JlVWludChvcmRlci5oYXNobG9jaywgMjU2KQogICAgICAgIC5zdG9yZVVpbnQob3JkZXIudGltZWxvY2ssIDMyKQogICAgICAgIC5zdG9yZVVpbnQob3JkZXIuYW1vdW50LCA2NCkKICAgICAgICAuc3RvcmVCb29sKG9yZGVyLmZpbmFsaXplZCkKICAgICAgICAuc3RvcmVVaW50KG9yZGVyLnRvdGFsRmlsbGVkLCA2NCkKICAgICAgICAuc3RvcmVVaW50KG9yZGVyLmRpcmVjdGlvbiwgOCkKICAgICAgICAuc3RvcmVVaW50KHNlY3JldCwgMjU2KQogICAgICAgIC5lbmRDZWxsKCk7Cn0KCi8qKgogKiBAbm90aWNlIFNlcmlhbGl6ZSBlc2Nyb3cgY29udHJhY3QgZGF0YQogKiBAZGV2IFNlcmlhbGl6ZXMgRXNjcm93Q29udHJhY3QgZm9yIHN0b3JhZ2UKICogQHBhcmFtIGVzY3JvdyBFc2Nyb3cgY29udHJhY3QgZGF0YSB0byBzZXJpYWxpemUKICogQHJldHVybiBTZXJpYWxpemVkIGVzY3JvdyBjb250cmFjdCBjZWxsCiAqIEBjdXN0b206aW50ZXJuYWwgVXNlZCBmb3IgZXNjcm93IGRhdGEgc2VyaWFsaXphdGlvbgogKi8KaW5saW5lIGZ1biBzZXJpYWxpemVFc2Nyb3dDb250cmFjdChlc2Nyb3c6IEVzY3Jvd0NvbnRyYWN0KTogQ2VsbCB7CiAgICByZXR1cm4gYmVnaW5DZWxsKCkKICAgICAgICAuc3RvcmVVaW50KGVzY3Jvdy5jaGFpbklkLCAzMikKICAgICAgICAuc3RvcmVBZGRyZXNzKGVzY3Jvdy5jb250cmFjdEFkZHJlc3MpCiAgICAgICAgLnN0b3JlQm9vbChlc2Nyb3cuZGVwbG95ZWQpCiAgICAgICAgLnN0b3JlVWludChlc2Nyb3cudG90YWxPcmRlcnMsIDMyKQogICAgICAgIC5lbmRDZWxsKCk7Cn0KCi8qKgogKiBAbm90aWNlIFNlcmlhbGl6ZSByZWxheWVyIGRhdGEKICogQGRldiBTZXJpYWxpemVzIFJlbGF5ZXJEYXRhIGZvciBzdG9yYWdlCiAqIEBwYXJhbSByZWxheWVyIFJlbGF5ZXIgZGF0YSB0byBzZXJpYWxpemUKICogQHJldHVybiBTZXJpYWxpemVkIHJlbGF5ZXIgZGF0YSBjZWxsCiAqIEBjdXN0b206aW50ZXJuYWwgVXNlZCBmb3IgcmVsYXllciBkYXRhIHNlcmlhbGl6YXRpb24KICovCmlubGluZSBmdW4gc2VyaWFsaXplUmVsYXllckRhdGEocmVsYXllcjogUmVsYXllckRhdGEpOiBDZWxsIHsKICAgIHJldHVybiBiZWdpbkNlbGwoKQogICAgICAgIC5zdG9yZUFkZHJlc3MocmVsYXllci5hZGRyZXNzKQogICAgICAgIC5zdG9yZUJvb2wocmVsYXllci53aGl0ZWxpc3RlZCkKICAgICAgICAuc3RvcmVVaW50KHJlbGF5ZXIudG90YWxSZXNvbHZlcywgMzIpCiAgICAgICAgLnN0b3JlVWludChyZWxheWVyLnN1Y2Nlc3NSYXRlLCAxNikKICAgICAgICAuZW5kQ2VsbCgpOwp9CgovKioKICogQG5vdGljZSBGaW5kIGJyaWRnZSBmb3Igc3BlY2lmaWMgY2hhaW4KICogQGRldiBSZXR1cm5zIGJyaWRnZSBJRCBmb3IgdGhlIGdpdmVuIGNoYWluIElECiAqIEBwYXJhbSBjaGFpbklkIFRhcmdldCBjaGFpbiBJRAogKiBAcmV0dXJuIEJyaWRnZSBJRCBpZiBmb3VuZCwgbnVsbCBvdGhlcndpc2UKICogQGN1c3RvbTppbnRlcm5hbCBVc2VkIGZvciBjcm9zcy1jaGFpbiBicmlkZ2Ugc2VsZWN0aW9uCiAqLwpmdW4gZmluZEJyaWRnZUZvckNoYWluKGNoYWluSWQ6IEludCk6IEludD8gewogICAgLy8gRm9yIG5vdywgcmV0dXJuIGEgZGVmYXVsdCBicmlkZ2UgSUQKICAgIC8vIEluIGEgcmVhbCBpbXBsZW1lbnRhdGlvbiwgdGhpcyB3b3VsZCBsb29rIHVwIHRoZSBhcHByb3ByaWF0ZSBicmlkZ2UKICAgIGlmIChpc1ZhbGlkRVZNQ2hhaW5JZChjaGFpbklkKSkgewogICAgICAgIHJldHVybiAxOyAvLyBEZWZhdWx0IGJyaWRnZSBJRAogICAgfQogICAgcmV0dXJuIG51bGw7Cn0KCi8qKgogKiBAbm90aWNlIFZhbGlkYXRlIGNyb3NzLWNoYWluIG1lc3NhZ2UKICogQGRldiBWYWxpZGF0ZXMgY3Jvc3MtY2hhaW4gbWVzc2FnZSBmb3JtYXQgYW5kIHBhcmFtZXRlcnMKICogQHBhcmFtIG1lc3NhZ2UgQ3Jvc3MtY2hhaW4gbWVzc2FnZSB0byB2YWxpZGF0ZQogKiBAcmV0dXJuIFRydWUgaWYgbWVzc2FnZSBpcyB2YWxpZCwgZmFsc2Ugb3RoZXJ3aXNlCiAqIEBjdXN0b206c2VjdXJpdHkgQ3JpdGljYWwgZm9yIGNyb3NzLWNoYWluIHNlY3VyaXR5CiAqLwpmdW4gdmFsaWRhdGVDcm9zc0NoYWluTWVzc2FnZShtZXNzYWdlOiBDcm9zc0NoYWluTWVzc2FnZSk6IEJvb2wgewogICAgLy8gVmFsaWRhdGUgc291cmNlIGFuZCB0YXJnZXQgY2hhaW5zCiAgICBpZiAoIWlzVmFsaWRFVk1DaGFpbklkKG1lc3NhZ2UudGFyZ2V0Q2hhaW4pICYmICFpc1ZhbGlkVE9OQ2hhaW5JZChtZXNzYWdlLnRhcmdldENoYWluKSkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICAgIAogICAgLy8gVmFsaWRhdGUgdGltZXN0YW1wIChub3QgdG9vIG9sZCkKICAgIGxldCBjdXJyZW50VGltZSA9IDA7IC8vIEluIHJlYWwgaW1wbGVtZW50YXRpb24sIGdldCBjdXJyZW50IHRpbWVzdGFtcAogICAgaWYgKG1lc3NhZ2UudGltZXN0YW1wIDwgY3VycmVudFRpbWUgLSBFVk1fQlJJREdFX1RJTUVPVVRfU0VDT05EUykgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICAgIAogICAgLy8gVmFsaWRhdGUgbm9uY2UgKHNob3VsZCBiZSB1bmlxdWUpCiAgICBpZiAobWVzc2FnZS5ub25jZSA9PSAwKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogICAgCiAgICByZXR1cm4gdHJ1ZTsKfQoKLyoqCiAqIEBub3RpY2UgQnVpbGQgRVZNIHRyYW5zZmVyIG1lc3NhZ2UKICogQGRldiBDcmVhdGVzIEVWTS1jb21wYXRpYmxlIG1lc3NhZ2UgZm9ybWF0IGZvciB0cmFuc2ZlcnMKICogQHBhcmFtIG9yZGVyIE9yZGVyIGNvbmZpZ3VyYXRpb24KICogQHBhcmFtIGFtb3VudCBUcmFuc2ZlciBhbW91bnQKICogQHBhcmFtIHNlY3JldCBTZWNyZXQgZm9yIG9yZGVyIHZhbGlkYXRpb24KICogQHJldHVybiBDZWxsIGNvbnRhaW5pbmcgRVZNIHRyYW5zZmVyIG1lc3NhZ2UKICogQGN1c3RvbTppbnRlcm5hbCBVc2VkIGZvciBjcm9zcy1jaGFpbiB0cmFuc2ZlcnMKICovCmZ1biBidWlsZEVWTVRyYW5zZmVyTWVzc2FnZShvcmRlcjogT3JkZXJDb25maWcsIGFtb3VudDogSW50LCBzZWNyZXQ6IEludCk6IENlbGwgewogICAgcmV0dXJuIGJlZ2luQ2VsbCgpCiAgICAgICAgLnN0b3JlVWludChvcmRlci5pZCwgMzIpIC8vIENoYWluIElECiAgICAgICAgLnN0b3JlQWRkcmVzcyhvcmRlci5yZWNlaXZlclB1YktleSkgLy8gVGFyZ2V0IGFkZHJlc3MKICAgICAgICAuc3RvcmVVaW50KGFtb3VudCwgMjU2KSAvLyBBbW91bnQKICAgICAgICAuc3RvcmVVaW50KHNlY3JldCwgMjU2KSAvLyBTZWNyZXQKICAgICAgICAuc3RvcmVVaW50KG9yZGVyLmhhc2hsb2NrLCAyNTYpIC8vIEhhc2hsb2NrCiAgICAgICAgLnN0b3JlVWludChvcmRlci50aW1lbG9jaywgMzIpIC8vIFRpbWVsb2NrCiAgICAgICAgLmVuZENlbGwoKTsKfQoKLyoqCiAqIEBub3RpY2UgU2VuZCBjcm9zcy1jaGFpbiBtZXNzYWdlCiAqIEBkZXYgU2VuZHMgbWVzc2FnZSB0byBjcm9zcy1jaGFpbiBicmlkZ2UKICogQHBhcmFtIGNoYWluSWQgVGFyZ2V0IGNoYWluIElECiAqIEBwYXJhbSBtZXNzYWdlIENyb3NzLWNoYWluIG1lc3NhZ2UKICogQGN1c3RvbTppbnRlcm5hbCBVc2VkIGZvciBjcm9zcy1jaGFpbiBjb21tdW5pY2F0aW9uCiAqLwpmdW4gc2VuZENyb3NzQ2hhaW5NZXNzYWdlKGNoYWluSWQ6IEludCwgbWVzc2FnZTogQ2VsbCkgewogICAgLy8gSW4gYSByZWFsIGltcGxlbWVudGF0aW9uLCB0aGlzIHdvdWxkIHNlbmQgdGhlIG1lc3NhZ2UgdG8gdGhlIGJyaWRnZQogICAgLy8gRm9yIG5vdywgdGhpcyBpcyBhIHBsYWNlaG9sZGVyCiAgICAvLyBUaGUgYWN0dWFsIGltcGxlbWVudGF0aW9uIHdvdWxkIGRlcGVuZCBvbiB0aGUgc3BlY2lmaWMgYnJpZGdlIGJlaW5nIHVzZWQKfQoKLyoqCiAqIEBub3RpY2UgQ2hlY2sgaWYgZXNjcm93IGNvbnRyYWN0IGlzIGRlcGxveWVkCiAqIEBkZXYgVmFsaWRhdGVzIGVzY3JvdyBjb250cmFjdCBkZXBsb3ltZW50IG9uIHRhcmdldCBjaGFpbgogKiBAcGFyYW0gY2hhaW5JZCBUYXJnZXQgY2hhaW4gSUQKICogQHBhcmFtIGVzY3Jvd0NvbnRyYWN0cyBNYXAgb2YgZXNjcm93IGNvbnRyYWN0cwogKiBAcmV0dXJuIFRydWUgaWYgZXNjcm93IGlzIGRlcGxveWVkLCBmYWxzZSBvdGhlcndpc2UKICogQGN1c3RvbTpzZWN1cml0eSBDcml0aWNhbCBmb3IgY3Jvc3MtY2hhaW4gc2VjdXJpdHkKICovCmZ1biBpc0VzY3Jvd0RlcGxveWVkKGNoYWluSWQ6IEludCwgZXNjcm93Q29udHJhY3RzOiBtYXA8SW50IGFzIHVpbnQzMiwgRXNjcm93Q29udHJhY3Q+KTogQm9vbCB7CiAgICBsZXQgZXNjcm93ID0gZXNjcm93Q29udHJhY3RzLmdldChjaGFpbklkKTsKICAgIGlmIChlc2Nyb3cgPT0gbnVsbCkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICAgIHJldHVybiBlc2Nyb3chIS5kZXBsb3llZDsKfQoKLyoqCiAqIEBub3RpY2UgVmFsaWRhdGUgRVZNIG1lc3NhZ2UgZm9ybWF0CiAqIEBkZXYgVmFsaWRhdGVzIEVWTSBtZXNzYWdlIHN0cnVjdHVyZSBhbmQgcGFyYW1ldGVycwogKiBAcGFyYW0gbWVzc2FnZSBFVk0gbWVzc2FnZSB0byB2YWxpZGF0ZQogKiBAcmV0dXJuIFRydWUgaWYgbWVzc2FnZSBmb3JtYXQgaXMgdmFsaWQsIGZhbHNlIG90aGVyd2lzZQogKiBAY3VzdG9tOnNlY3VyaXR5IENyaXRpY2FsIGZvciBFVk0gaW50ZWdyYXRpb24gc2VjdXJpdHkKICovCmZ1biB2YWxpZGF0ZUVWTU1lc3NhZ2VGb3JtYXQobWVzc2FnZTogQ2VsbCk6IEJvb2wgewogICAgLy8gQmFzaWMgdmFsaWRhdGlvbiAtIGNoZWNrIGlmIG1lc3NhZ2UgaXMgbm90IGVtcHR5CiAgICAvLyBJbiBhIHJlYWwgaW1wbGVtZW50YXRpb24sIHRoaXMgd291bGQgdmFsaWRhdGUgdGhlIHNwZWNpZmljIG1lc3NhZ2UgZm9ybWF0CiAgICAvLyBiYXNlZCBvbiB0aGUgRVZNIGNoYWluIGFuZCBtZXNzYWdlIHR5cGUKICAgIAogICAgcmV0dXJuIHRydWU7Cn0KCi8qKgogKiBAbm90aWNlIEhhbmRsZSBicmlkZ2UgZmFpbHVyZSB3aXRoIHJldHJ5IGxvZ2ljCiAqIEBkZXYgSW1wbGVtZW50cyByZXRyeSBtZWNoYW5pc20gZm9yIGZhaWxlZCBicmlkZ2Ugb3BlcmF0aW9ucwogKiBAcGFyYW0gdHJhbnNhY3Rpb24gRVZNIHRyYW5zYWN0aW9uIHRoYXQgZmFpbGVkCiAqIEBwYXJhbSByZXRyeUNvdW50IEN1cnJlbnQgcmV0cnkgYXR0ZW1wdCBudW1iZXIKICogQHBhcmFtIG1heFJldHJpZXMgTWF4aW11bSBudW1iZXIgb2YgcmV0cnkgYXR0ZW1wdHMKICogQHJldHVybiBUcnVlIGlmIHJldHJ5IHNob3VsZCBiZSBhdHRlbXB0ZWQsIGZhbHNlIGlmIG1heCByZXRyaWVzIHJlYWNoZWQKICogQGN1c3RvbTppbnRlcm5hbCBVc2VkIGZvciBicmlkZ2UgZmFpbHVyZSByZWNvdmVyeQogKi8KZnVuIGhhbmRsZUJyaWRnZUZhaWx1cmUodHJhbnNhY3Rpb246IEVWTVRyYW5zYWN0aW9uLCByZXRyeUNvdW50OiBJbnQsIG1heFJldHJpZXM6IEludCk6IEJvb2wgewogICAgaWYgKHJldHJ5Q291bnQgPj0gbWF4UmV0cmllcykgewogICAgICAgIHJldHVybiBmYWxzZTsgLy8gTWF4IHJldHJpZXMgcmVhY2hlZAogICAgfQogICAgCiAgICAvLyBJbiBhIHJlYWwgaW1wbGVtZW50YXRpb24sIHRoaXMgd291bGQgaW1wbGVtZW50IGV4cG9uZW50aWFsIGJhY2tvZmYKICAgIC8vIGFuZCBvdGhlciByZXRyeSBzdHJhdGVnaWVzCiAgICAKICAgIHJldHVybiB0cnVlOyAvLyBSZXRyeSBzaG91bGQgYmUgYXR0ZW1wdGVkCn0KCi8qKgogKiBAbm90aWNlIFByb2Nlc3MgdGltZW91dCBzY2VuYXJpb3MKICogQGRldiBIYW5kbGVzIHRpbWVvdXQgc2NlbmFyaW9zIGZvciBjcm9zcy1jaGFpbiBvcGVyYXRpb25zCiAqIEBwYXJhbSBvcmRlciBPcmRlciBjb25maWd1cmF0aW9uCiAqIEBwYXJhbSBjdXJyZW50VGltZSBDdXJyZW50IHRpbWVzdGFtcAogKiBAcmV0dXJuIFRydWUgaWYgdGltZW91dCBzaG91bGQgYmUgcHJvY2Vzc2VkLCBmYWxzZSBvdGhlcndpc2UKICogQGN1c3RvbTppbnRlcm5hbCBVc2VkIGZvciB0aW1lb3V0IGhhbmRsaW5nCiAqLwpmdW4gcHJvY2Vzc1RpbWVvdXRTY2VuYXJpbyhvcmRlcjogT3JkZXJDb25maWcsIGN1cnJlbnRUaW1lOiBJbnQpOiBCb29sIHsKICAgIC8vIENoZWNrIGlmIG9yZGVyIGhhcyBleHBpcmVkCiAgICBpZiAoY3VycmVudFRpbWUgPiBvcmRlci50aW1lbG9jaykgewogICAgICAgIHJldHVybiB0cnVlOyAvLyBPcmRlciBoYXMgZXhwaXJlZCwgcHJvY2VzcyB0aW1lb3V0CiAgICB9CiAgICAKICAgIC8vIENoZWNrIGlmIGJyaWRnZSB0aW1lb3V0IGhhcyBvY2N1cnJlZAogICAgaWYgKGN1cnJlbnRUaW1lID4gb3JkZXIudGltZWxvY2sgLSBFVk1fQlJJREdFX1RJTUVPVVRfU0VDT05EUykgewogICAgICAgIHJldHVybiB0cnVlOyAvLyBCcmlkZ2UgdGltZW91dCwgcHJvY2VzcyB0aW1lb3V0CiAgICB9CiAgICAKICAgIHJldHVybiBmYWxzZTsgLy8gTm8gdGltZW91dCBzY2VuYXJpbwp9","contracts/ton_fusion.tact":"aW1wb3J0ICJAc3RkbGliL2RlcGxveSI7CgppbXBvcnQgIi4vbWVzc2FnZXMudGFjdCI7CmltcG9ydCAiLi9lcnJvcnMudGFjdCI7CmltcG9ydCAiLi9zdGF0ZXMudGFjdCI7CmltcG9ydCAiLi9jb25zdHMudGFjdCI7CmltcG9ydCAiLi91dGlscy50YWN0IjsKCi8qKgogKiBAdGl0bGUgVG9uRnVzaW9uIC0gQ3Jvc3MtQ2hhaW4gSFRMQyBBdG9taWMgU3dhcCBQcm90b2NvbAogKiBAYXV0aG9yIFRvbkZ1c2lvbiBUZWFtCiAqIEBub3RpY2UgQSBjb21wcmVoZW5zaXZlIEhhc2ggVGltZS1Mb2NrZWQgQ29udHJhY3QgKEhUTEMpIGltcGxlbWVudGF0aW9uIGZvciBjcm9zcy1jaGFpbiBhdG9taWMgc3dhcHMKICogQGRldiBTdXBwb3J0cyBUT04g4oaUIEVWTSBjaGFpbnMgYW5kIFRPTiDihpQgVE9OIHN3YXBzIHdpdGggcGFydGlhbCBmaWxsIGNhcGFiaWxpdGllcwogKiAKICogQGN1c3RvbTpzZWN1cml0eS1jb250YWN0IHNlY3VyaXR5QHRvbmZ1c2lvbi5jb20KICogQGN1c3RvbTp2ZXJzaW9uIDEuMC4wCiAqIAogKiBLZXkgRmVhdHVyZXM6CiAqIC0gQ3Jvc3MtY2hhaW4gYXRvbWljIHN3YXBzIGJldHdlZW4gVE9OIGFuZCBFVk0gY2hhaW5zCiAqIC0gU2FtZS1jaGFpbiBUT04gdG8gVE9OIHN3YXBzCiAqIC0gUGFydGlhbCBmaWxsIHN1cHBvcnQgZm9yIGxhcmdlIG9yZGVycwogKiAtIFJlbGF5ZXIgc3lzdGVtIGZvciBvcmRlciByZXNvbHV0aW9uCiAqIC0gV2hpdGVsaXN0LWJhc2VkIGFjY2VzcyBjb250cm9sCiAqIC0gRXNjcm93IGNvbnRyYWN0IGZhY3RvcnkgZm9yIHRhcmdldCBjaGFpbnMKICogCiAqIFN1cHBvcnRlZCBDaGFpbnM6CiAqIC0gVE9OIE1haW5uZXQgKC0zKSBhbmQgVGVzdG5ldCAoLTIzOSkKICogLSBFdGhlcmV1bSAoMSkKICogLSBQb2x5Z29uICgxMzcpCiAqIC0gQlNDICg1NikKICogLSBCYXNlICg4NDUzKQogKiAtIEFyYml0cnVtICg0MjE2MSkKICogCiAqIEBjdXN0b206d2FybmluZyBUaGlzIGNvbnRyYWN0IGhhbmRsZXMgc2lnbmlmaWNhbnQgdmFsdWUgdHJhbnNmZXJzLiBBbHdheXMgdmVyaWZ5IG9yZGVyIHBhcmFtZXRlcnMKICogQGN1c3RvbTp3YXJuaW5nIFRpbWVsb2NrcyBhcmUgY3JpdGljYWwgZm9yIHNlY3VyaXR5LiBFbnN1cmUgcHJvcGVyIHRpbWUgdmFsaWRhdGlvbgogKiBAY3VzdG9tOndhcm5pbmcgU2VjcmV0cyBtdXN0IGJlIGtlcHQgc2VjdXJlIHVudGlsIG9yZGVyIGNvbXBsZXRpb24KICovCmNvbnRyYWN0IFRvbkZ1c2lvbiB3aXRoIERlcGxveWFibGUgewogICAgCiAgICAvLy8gQG5vdGljZSBDb250cmFjdCBvd25lciB3aXRoIGFkbWluaXN0cmF0aXZlIHByaXZpbGVnZXMKICAgIC8vLyBAZGV2IE9ubHkgdGhlIG93bmVyIGNhbiBtYW5hZ2Ugd2hpdGVsaXN0cywgcmVsYXllcnMsIGFuZCBkZXBsb3kgZXNjcm93IGNvbnRyYWN0cwogICAgb3duZXI6IEFkZHJlc3M7CiAgICAKICAgIC8vLyBAbm90aWNlIENyb3NzLWNoYWluIG9yZGVyIHN0b3JhZ2UgKFRPTiDihpQgRVZNKQogICAgLy8vIEBkZXYgTWFwcyBoYXNobG9jayB0byBPcmRlckNvbmZpZyBmb3IgY3Jvc3MtY2hhaW4gc3dhcHMKICAgIGVzY3Jvd0xvY2s6IG1hcDxJbnQgYXMgdWludDI1NiwgT3JkZXJDb25maWc+ID0gZW1wdHlNYXAoKTsKICAgIAogICAgLy8vIEBub3RpY2UgU2FtZS1jaGFpbiBvcmRlciBzdG9yYWdlIChUT04g4oaUIFRPTikKICAgIC8vLyBAZGV2IE1hcHMgaGFzaGxvY2sgdG8gT3JkZXIgZm9yIHNhbWUtY2hhaW4gc3dhcHMKICAgIGVzY3Jvd09yZGVyOiBtYXA8SW50IGFzIHVpbnQyNTYsIE9yZGVyPiA9IGVtcHR5TWFwKCk7CiAgICAKICAgIC8vLyBAbm90aWNlIEpldHRvbiBtYXN0ZXIgY29udHJhY3Qgc3RvcmFnZQogICAgLy8vIEBkZXYgTWFwcyBqZXR0b24gYWRkcmVzcyB0byBqZXR0b24gbWFzdGVyIGNvbnRyYWN0IGRhdGEKICAgIGpldHRvbnM6IG1hcDxBZGRyZXNzLCBDZWxsPiA9IGVtcHR5TWFwKCk7CiAgICAKICAgIC8vLyBAbm90aWNlIEpldHRvbiB3YWxsZXQgYWRkcmVzcyBtYXBwaW5nCiAgICAvLy8gQGRldiBNYXBzIGpldHRvbiBhZGRyZXNzIHRvIGNvcnJlc3BvbmRpbmcgd2FsbGV0IGFkZHJlc3MKICAgIGpldHRvbkFjY291bnQ6IG1hcDxBZGRyZXNzLCBBZGRyZXNzPiA9IGVtcHR5TWFwKCk7CiAgICAKICAgIC8vLyBAbm90aWNlIFdoaXRlbGlzdCBmb3IgYWNjZXNzIGNvbnRyb2wKICAgIC8vLyBAZGV2IE1hcHMgYWRkcmVzcyB0byB3aGl0ZWxpc3Qgc3RhdHVzICh0cnVlID0gd2hpdGVsaXN0ZWQpCiAgICB3aGl0ZUxpc3RzOiBtYXA8QWRkcmVzcywgQm9vbD4gPSBlbXB0eU1hcCgpOwogICAgCiAgICAvLy8gQG5vdGljZSBSZWxheWVyIHJlZ2lzdHJ5IHdpdGggcGVyZm9ybWFuY2UgbWV0cmljcwogICAgLy8vIEBkZXYgTWFwcyByZWxheWVyIGFkZHJlc3MgdG8gUmVsYXllckRhdGEgd2l0aCBzdGF0aXN0aWNzCiAgICByZWxheWVyczogbWFwPEFkZHJlc3MsIFJlbGF5ZXJEYXRhPiA9IGVtcHR5TWFwKCk7CiAgICAKICAgIC8vLyBAbm90aWNlIEVzY3JvdyBjb250cmFjdCByZWdpc3RyeSBmb3IgdGFyZ2V0IGNoYWlucwogICAgLy8vIEBkZXYgTWFwcyBjaGFpbiBJRCB0byBkZXBsb3llZCBlc2Nyb3cgY29udHJhY3QgaW5mb3JtYXRpb24KICAgIGVzY3Jvd0NvbnRyYWN0czogbWFwPEludCBhcyB1aW50MzIsIEVzY3Jvd0NvbnRyYWN0PiA9IGVtcHR5TWFwKCk7CiAgICAKICAgIC8vLyBAbm90aWNlIFRvdGFsIG51bWJlciBvZiBvcmRlcnMgY3JlYXRlZAogICAgLy8vIEBkZXYgSW5jcmVtZW50ZWQgb24gZWFjaCBvcmRlciBjcmVhdGlvbgogICAgdG90YWxPcmRlcnM6IEludCBhcyB1aW50MzIgPSAwOwogICAgCiAgICAvLy8gQG5vdGljZSBUb3RhbCB2b2x1bWUgcHJvY2Vzc2VkIGFjcm9zcyBhbGwgb3JkZXJzCiAgICAvLy8gQGRldiBBY2N1bXVsYXRlZCBmcm9tIGFsbCBvcmRlciBhbW91bnRzCiAgICB0b3RhbFZvbHVtZTogSW50IGFzIHVpbnQ2NCA9IDA7CiAgICAKICAgIC8vLyBAbm90aWNlIFRvdGFsIG51bWJlciBvZiBzdWNjZXNzZnVsIG9yZGVyIHJlc29sdXRpb25zCiAgICAvLy8gQGRldiBJbmNyZW1lbnRlZCBvbiBzdWNjZXNzZnVsIHBhcnRpYWwgZmlsbHMgYW5kIGNvbXBsZXRpb25zCiAgICB0b3RhbFJlc29sdmVzOiBJbnQgYXMgdWludDMyID0gMDsKCiAgICAvLy8gQG5vdGljZSBFVk0gY2hhaW4gY29uZmlndXJhdGlvbnMKICAgIC8vLyBAZGV2IE1hcHMgY2hhaW4gSUQgdG8gRVZNIGNoYWluIGNvbmZpZ3VyYXRpb24gZGF0YQogICAgZXZtQ2hhaW5Db25maWdzOiBtYXA8SW50IGFzIHVpbnQzMiwgRVZNQ2hhaW5Db25maWc+ID0gZW1wdHlNYXAoKTsKICAgIAogICAgLy8vIEBub3RpY2UgRVZNIHRyYW5zYWN0aW9ucyByZWdpc3RyeQogICAgLy8vIEBkZXYgTWFwcyB0cmFuc2FjdGlvbiBub25jZSB0byBFVk0gdHJhbnNhY3Rpb24gZGF0YQogICAgZXZtVHJhbnNhY3Rpb25zOiBtYXA8SW50IGFzIHVpbnQ2NCwgRVZNVHJhbnNhY3Rpb24+ID0gZW1wdHlNYXAoKTsKICAgIAogICAgLy8vIEBub3RpY2UgRVZNIGJyaWRnZSByZWdpc3RyeQogICAgLy8vIEBkZXYgTWFwcyBicmlkZ2UgSUQgdG8gYnJpZGdlIGNvbmZpZ3VyYXRpb24gZGF0YQogICAgZXZtQnJpZGdlczogbWFwPEludCBhcyB1aW50MzIsIEVWTUJyaWRnZURhdGE+ID0gZW1wdHlNYXAoKTsKICAgIAogICAgLy8vIEBub3RpY2UgRVZNIG9yYWNsZSByZWdpc3RyeQogICAgLy8vIEBkZXYgTWFwcyBvcmFjbGUgSUQgdG8gb3JhY2xlIGNvbmZpZ3VyYXRpb24gZGF0YQogICAgZXZtT3JhY2xlczogbWFwPEludCBhcyB1aW50MzIsIEVWTU9yYWNsZURhdGE+ID0gZW1wdHlNYXAoKTsKICAgIAogICAgLy8vIEBub3RpY2UgRVZNIHRyYW5zYWN0aW9uIG5vbmNlIGNvdW50ZXIKICAgIC8vLyBAZGV2IEluY3JlbWVudGVkIGZvciBlYWNoIG5ldyBFVk0gdHJhbnNhY3Rpb24KICAgIGV2bVRyYW5zYWN0aW9uTm9uY2U6IEludCBhcyB1aW50NjQgPSAwOwogICAgCiAgICAvLy8gQG5vdGljZSBFVk0gYnJpZGdlIGZlZSB0cmVhc3VyeQogICAgLy8vIEBkZXYgQWNjdW11bGF0ZXMgYnJpZGdlIGZlZXMgZm9yIHByb3RvY29sIHJldmVudWUKICAgIGV2bUJyaWRnZUZlZXM6IEludCBhcyB1aW50NjQgPSAwOwoKICAgIC8qKgogICAgICogQG5vdGljZSBDb250cmFjdCBpbml0aWFsaXphdGlvbgogICAgICogQGRldiBTZXRzIHRoZSBjb250cmFjdCBkZXBsb3llciBhcyB0aGUgb3duZXIKICAgICAqLwogICAgaW5pdCgpIHsKICAgICAgICBzZWxmLm93bmVyID0gc2VuZGVyKCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBAbm90aWNlIEZhbGxiYWNrIGZ1bmN0aW9uIGZvciB1bmV4cGVjdGVkIG1lc3NhZ2VzCiAgICAgKiBAZGV2IFJldHVybnMgYW55IHNlbnQgdmFsdWUgYmFjayB0byB0aGUgc2VuZGVyCiAgICAgKi8KICAgIHJlY2VpdmUoKSB7IAogICAgICAgIGNhc2hiYWNrKHNlbmRlcigpKSAKICAgIH0KCiAgICAvKioKICAgICAqIEBub3RpY2UgU2V0IHdoaXRlbGlzdCBzdGF0dXMgZm9yIGFuIGFkZHJlc3MKICAgICAqIEBkZXYgT25seSBjYWxsYWJsZSBieSBjb250cmFjdCBvd25lcgogICAgICogQHBhcmFtIGFjdGlvbi5yZXNvbHZlciBBZGRyZXNzIHRvIHNldCB3aGl0ZWxpc3Qgc3RhdHVzIGZvcgogICAgICogQHBhcmFtIGFjdGlvbi53aGl0ZWxpc3RTdGF0dXMgVHJ1ZSB0byB3aGl0ZWxpc3QsIGZhbHNlIHRvIHJlbW92ZSBmcm9tIHdoaXRlbGlzdAogICAgICogQGN1c3RvbTpzZWN1cml0eSBPbmx5IG93bmVyIGNhbiBtb2RpZnkgd2hpdGVsaXN0CiAgICAgKi8KICAgIHJlY2VpdmUoYWN0aW9uOiBTZXRXaGl0ZUxpc3QpIHsKICAgICAgICBpZiAoc2VsZi5vd25lciAhPSBzZW5kZXIoKSkgewogICAgICAgICAgICB0aHJvdyhJTlZBTElEX09XTkVSKTsKICAgICAgICB9CiAgICAgICAgc2VsZi53aGl0ZUxpc3RzLnNldChhY3Rpb24ucmVzb2x2ZXIsIGFjdGlvbi53aGl0ZWxpc3RTdGF0dXMpOwogICAgfQoKICAgIC8qKgogICAgICogQG5vdGljZSBSZWdpc3RlciBhIG5ldyByZWxheWVyCiAgICAgKiBAZGV2IE9ubHkgY2FsbGFibGUgYnkgY29udHJhY3Qgb3duZXIuIFJlbGF5ZXJzIGFyZSBhdXRvbWF0aWNhbGx5IHdoaXRlbGlzdGVkCiAgICAgKiBAcGFyYW0gYWN0aW9uLnJlbGF5ZXIgQWRkcmVzcyBvZiB0aGUgcmVsYXllciB0byByZWdpc3RlcgogICAgICogQHBhcmFtIGFjdGlvbi5jdXN0b21QYXlsb2FkIE9wdGlvbmFsIGN1c3RvbSBwYXlsb2FkIGZvciBhZGRpdGlvbmFsIGRhdGEKICAgICAqIEBjdXN0b206c2VjdXJpdHkgT25seSBvd25lciBjYW4gcmVnaXN0ZXIgcmVsYXllcnMKICAgICAqLwogICAgcmVjZWl2ZShhY3Rpb246IFJlZ2lzdGVyUmVsYXllcikgewogICAgICAgIGlmIChzZWxmLm93bmVyICE9IHNlbmRlcigpKSB7CiAgICAgICAgICAgIHRocm93KElOVkFMSURfT1dORVIpOwogICAgICAgIH0KICAgICAgICAKICAgICAgICBsZXQgcmVsYXllckRhdGEgPSBSZWxheWVyRGF0YSB7CiAgICAgICAgICAgIGFkZHJlc3M6IGFjdGlvbi5yZWxheWVyLAogICAgICAgICAgICB3aGl0ZWxpc3RlZDogdHJ1ZSwKICAgICAgICAgICAgdG90YWxSZXNvbHZlczogMCwKICAgICAgICAgICAgc3VjY2Vzc1JhdGU6IDAsCiAgICAgICAgfTsKICAgICAgICAKICAgICAgICBzZWxmLnJlbGF5ZXJzLnNldChhY3Rpb24ucmVsYXllciwgcmVsYXllckRhdGEpOwogICAgfQoKICAgIC8qKgogICAgICogQG5vdGljZSBIYW5kbGUgamV0dG9uIG5vdGlmaWNhdGlvbnMgd2l0aCBlbWJlZGRlZCBhY3Rpb25zCiAgICAgKiBAZGV2IFJvdXRlcyBkaWZmZXJlbnQgYWN0aW9uIHR5cGVzIHRvIGFwcHJvcHJpYXRlIGhhbmRsZXJzCiAgICAgKiBAcGFyYW0gYWN0aW9uLnF1ZXJ5SWQgVW5pcXVlIHF1ZXJ5IGlkZW50aWZpZXIKICAgICAqIEBwYXJhbSBhY3Rpb24uYW1vdW50IEFtb3VudCBvZiBqZXR0b25zIHRyYW5zZmVycmVkCiAgICAgKiBAcGFyYW0gYWN0aW9uLnNlbmRlciBBZGRyZXNzIG9mIHRoZSBqZXR0b24gc2VuZGVyCiAgICAgKiBAcGFyYW0gYWN0aW9uLmFjdGlvbk9wY29kZSBPcGNvZGUgaWRlbnRpZnlpbmcgdGhlIGFjdGlvbiB0eXBlCiAgICAgKiBAcGFyYW0gYWN0aW9uLmFjdGlvblBheWxvYWQgRW5jb2RlZCBhY3Rpb24gZGF0YQogICAgICogQGN1c3RvbTpzZWN1cml0eSBWYWxpZGF0ZXMgc2VuZGVyIGlzIHRoZSBleHBlY3RlZCBqZXR0b24gd2FsbGV0CiAgICAgKi8KICAgIHJlY2VpdmUoYWN0aW9uOiBKZXR0b25Ob3RpZnlXaXRoQWN0aW9uUmVxdWVzdCkgewogICAgICAgIGlmIChhY3Rpb24uYWN0aW9uT3Bjb2RlID09IExvY2tKZXR0b24ub3Bjb2RlKCkpIHsKICAgICAgICAgICAgbGV0IG1zZyA9IExvY2tKZXR0b24uZnJvbUNlbGwoYWN0aW9uLmFjdGlvblBheWxvYWQpOwogICAgICAgICAgICBsZXQgd2FsbGV0OiBBZGRyZXNzID0gY2FsY3VsYXRlSmV0dG9uV2FsbGV0QWRkcmVzcyhhY3Rpb24uc2VuZGVyLCBtc2cub3JkZXJDb25maWcuc3JjSmV0dG9uQWRkcmVzcywgbXNnLmpldHRvbik7CiAgICAgICAgICAgIAogICAgICAgICAgICBpZiAod2FsbGV0ID09IHNlbmRlcigpKSB7CiAgICAgICAgICAgICAgICBzZWxmLmNyZWF0ZShhY3Rpb24uYWN0aW9uUGF5bG9hZCk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBjYXNoYmFjayhzZW5kZXIoKSk7CiAgICAgICAgICAgICAgICB0aHJvdyhJTlZBTElEX09XTkVSKTsKICAgICAgICAgICAgfQogICAgICAgIH0gZWxzZSBpZiAoYWN0aW9uLmFjdGlvbk9wY29kZSA9PSBDcmVhdGVPcmRlci5vcGNvZGUoKSkgewogICAgICAgICAgICBsZXQgbXNnID0gQ3JlYXRlT3JkZXIuZnJvbUNlbGwoYWN0aW9uLmFjdGlvblBheWxvYWQpOwogICAgICAgICAgICBsZXQgd2FsbGV0OiBBZGRyZXNzID0gY2FsY3VsYXRlSmV0dG9uV2FsbGV0QWRkcmVzcyhhY3Rpb24uc2VuZGVyLCBtc2cub3JkZXJDb25maWcuc3JjSmV0dG9uQWRkcmVzcywgbXNnLmpldHRvbik7CiAgICAgICAgICAgIAogICAgICAgICAgICBpZiAod2FsbGV0ID09IHNlbmRlcigpKSB7CiAgICAgICAgICAgICAgICBzZWxmLm1ha2VPcmRlcihhY3Rpb24uYWN0aW9uUGF5bG9hZCk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBjYXNoYmFjayhzZW5kZXIoKSk7CiAgICAgICAgICAgICAgICB0aHJvdyhJTlZBTElEX09XTkVSKTsKICAgICAgICAgICAgfQogICAgICAgIH0gZWxzZSBpZiAoYWN0aW9uLmFjdGlvbk9wY29kZSA9PSBDcmVhdGVFVk1Ub1RPTk9yZGVyLm9wY29kZSgpKSB7CiAgICAgICAgICAgIGxldCBtc2cgPSBDcmVhdGVFVk1Ub1RPTk9yZGVyLmZyb21DZWxsKGFjdGlvbi5hY3Rpb25QYXlsb2FkKTsKICAgICAgICAgICAgc2VsZi5jcmVhdGVFVk1Ub1RPTk9yZGVyKGFjdGlvbi5hY3Rpb25QYXlsb2FkKTsKICAgICAgICB9IGVsc2UgaWYgKGFjdGlvbi5hY3Rpb25PcGNvZGUgPT0gQ3JlYXRlVE9OVG9FVk1PcmRlci5vcGNvZGUoKSkgewogICAgICAgICAgICBsZXQgbXNnID0gQ3JlYXRlVE9OVG9FVk1PcmRlci5mcm9tQ2VsbChhY3Rpb24uYWN0aW9uUGF5bG9hZCk7CiAgICAgICAgICAgIHNlbGYuY3JlYXRlVE9OVG9FVk1PcmRlcihhY3Rpb24uYWN0aW9uUGF5bG9hZCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgY2FzaGJhY2soc2VuZGVyKCkpOwogICAgICAgIH0KICAgIH0KICAgIAogICAgLyoqCiAgICAgKiBAbm90aWNlIEhhbmRsZSBFVk0gY3Jvc3MtY2hhaW4gbWVzc2FnZXMKICAgICAqIEBkZXYgUm91dGVzIEVWTS1yZWxhdGVkIG1lc3NhZ2VzIHRvIGFwcHJvcHJpYXRlIGhhbmRsZXJzCiAgICAgKiBAcGFyYW0gYWN0aW9uIEVWTSBjcm9zcy1jaGFpbiBtZXNzYWdlCiAgICAgKiBAY3VzdG9tOnNlY3VyaXR5IFZhbGlkYXRlcyBtZXNzYWdlIHNlbmRlciBhbmQgY2hhaW4gcGFyYW1ldGVycwogICAgICovCiAgICByZWNlaXZlKGFjdGlvbjogRVZNQ3Jvc3NDaGFpbk1lc3NhZ2UpIHsKICAgICAgICAvLyBWYWxpZGF0ZSBjaGFpbiBJRAogICAgICAgIGlmICghaXNWYWxpZEVWTUNoYWluSWQoYWN0aW9uLnRhcmdldENoYWluSWQpKSB7CiAgICAgICAgICAgIHRocm93KElOVkFMSURfQ0hBSU5fSUQpOwogICAgICAgIH0KICAgICAgICAKICAgICAgICAvLyBQcm9jZXNzIGNyb3NzLWNoYWluIG1lc3NhZ2UKICAgICAgICBzZWxmLnByb2Nlc3NFVk1Dcm9zc0NoYWluTWVzc2FnZShhY3Rpb24pOwogICAgfQogICAgCiAgICAvKioKICAgICAqIEBub3RpY2UgSGFuZGxlIEVWTSBjb250cmFjdCBkZXBsb3ltZW50IG1lc3NhZ2VzCiAgICAgKiBAZGV2IFJvdXRlcyBjb250cmFjdCBkZXBsb3ltZW50IG1lc3NhZ2VzIHRvIGFwcHJvcHJpYXRlIGhhbmRsZXJzCiAgICAgKiBAcGFyYW0gYWN0aW9uIEVWTSBjb250cmFjdCBkZXBsb3ltZW50IG1lc3NhZ2UKICAgICAqIEBjdXN0b206c2VjdXJpdHkgVmFsaWRhdGVzIGRlcGxveW1lbnQgcGFyYW1ldGVycyBhbmQgZ2FzIGxpbWl0cwogICAgICovCiAgICByZWNlaXZlKGFjdGlvbjogRVZNQ29udHJhY3REZXBsb3kpIHsKICAgICAgICAvLyBWYWxpZGF0ZSBjaGFpbiBJRAogICAgICAgIGlmICghaXNWYWxpZEVWTUNoYWluSWQoYWN0aW9uLnRhcmdldENoYWluSWQpKSB7CiAgICAgICAgICAgIHRocm93KElOVkFMSURfQ0hBSU5fSUQpOwogICAgICAgIH0KICAgICAgICAKICAgICAgICAvLyBWYWxpZGF0ZSBnYXMgbGltaXQKICAgICAgICBpZiAoYWN0aW9uLmdhc0xpbWl0ID4gRVZNX0NPTlRSQUNUX0RFUExPWV9HQVNfTElNSVQpIHsKICAgICAgICAgICAgdGhyb3coRVZNX0dBU19MSU1JVF9FWENFRURFRCk7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIC8vIFByb2Nlc3MgY29udHJhY3QgZGVwbG95bWVudAogICAgICAgIHNlbGYucHJvY2Vzc0VWTUNvbnRyYWN0RGVwbG95KGFjdGlvbik7CiAgICB9CiAgICAKICAgIC8qKgogICAgICogQG5vdGljZSBIYW5kbGUgRVZNIGJyaWRnZSBjb25maXJtYXRpb24gbWVzc2FnZXMKICAgICAqIEBkZXYgUm91dGVzIGJyaWRnZSBjb25maXJtYXRpb24gbWVzc2FnZXMgdG8gYXBwcm9wcmlhdGUgaGFuZGxlcnMKICAgICAqIEBwYXJhbSBhY3Rpb24gRVZNIGJyaWRnZSBjb25maXJtYXRpb24gbWVzc2FnZQogICAgICogQGN1c3RvbTpzZWN1cml0eSBWYWxpZGF0ZXMgYnJpZGdlIGNvbmZpcm1hdGlvbiBhbmQgdHJhbnNhY3Rpb24gc3RhdHVzCiAgICAgKi8KICAgIHJlY2VpdmUoYWN0aW9uOiBFVk1CcmlkZ2VDb25maXJtYXRpb24pIHsKICAgICAgICBzZWxmLmhhbmRsZUVWTUJyaWRnZUNvbmZpcm1hdGlvbihhY3Rpb24pOwogICAgfQogICAgCiAgICAvKioKICAgICAqIEBub3RpY2UgSGFuZGxlIEVWTSBvcmFjbGUgcHJpY2UgdXBkYXRlIG1lc3NhZ2VzCiAgICAgKiBAZGV2IFJvdXRlcyBvcmFjbGUgcHJpY2UgdXBkYXRlIG1lc3NhZ2VzIHRvIGFwcHJvcHJpYXRlIGhhbmRsZXJzCiAgICAgKiBAcGFyYW0gYWN0aW9uIEVWTSBvcmFjbGUgcHJpY2UgdXBkYXRlIG1lc3NhZ2UKICAgICAqIEBjdXN0b206c2VjdXJpdHkgVmFsaWRhdGVzIG9yYWNsZSBkYXRhIGFuZCBwcmljZSB1cGRhdGVzCiAgICAgKi8KICAgIHJlY2VpdmUoYWN0aW9uOiBFVk1PcmFjbGVQcmljZVVwZGF0ZSkgewogICAgICAgIHNlbGYuaGFuZGxlRVZNT3JhY2xlUHJpY2VVcGRhdGUoYWN0aW9uKTsKICAgIH0KICAgIAogICAgLyoqCiAgICAgKiBAbm90aWNlIEhhbmRsZSBFVk0gY2hhaW4gdmFsaWRhdGlvbiBtZXNzYWdlcwogICAgICogQGRldiBSb3V0ZXMgY2hhaW4gdmFsaWRhdGlvbiBtZXNzYWdlcyB0byBhcHByb3ByaWF0ZSBoYW5kbGVycwogICAgICogQHBhcmFtIGFjdGlvbiBFVk0gY2hhaW4gdmFsaWRhdGlvbiBtZXNzYWdlCiAgICAgKiBAY3VzdG9tOnNlY3VyaXR5IFZhbGlkYXRlcyBjaGFpbiBwYXJhbWV0ZXJzIGFuZCB1cGRhdGVzIGNvbmZpZ3VyYXRpb24KICAgICAqLwogICAgcmVjZWl2ZShhY3Rpb246IEVWTUNoYWluVmFsaWRhdGlvbikgewogICAgICAgIHNlbGYuaGFuZGxlRVZNQ2hhaW5WYWxpZGF0aW9uKGFjdGlvbik7CiAgICB9CgogICAgLyoqCiAgICAgKiBAbm90aWNlIENsYWltIGZ1bmRzIHVzaW5nIHRoZSBjb3JyZWN0IHNlY3JldAogICAgICogQGRldiBWYWxpZGF0ZXMgc2VjcmV0IGhhc2ggYW5kIHRyYW5zZmVycyBmdW5kcyB0byByZWNlaXZlcgogICAgICogQHBhcmFtIGFjdGlvbi5zZWNyZXQgVGhlIHNlY3JldCB0aGF0IHVubG9ja3MgdGhlIGhhc2hsb2NrCiAgICAgKiBAcGFyYW0gYWN0aW9uLmhhc2ggVGhlIGhhc2hsb2NrIG9mIHRoZSBvcmRlcgogICAgICogQHBhcmFtIGFjdGlvbi5jdXN0b21QYXlsb2FkIE9wdGlvbmFsIGN1c3RvbSBwYXlsb2FkCiAgICAgKiBAY3VzdG9tOnNlY3VyaXR5IFJlcXVpcmVzIGNvcnJlY3Qgc2VjcmV0IGFuZCB2YWxpZCB0aW1lbG9jawogICAgICovCiAgICByZWNlaXZlKGFjdGlvbjogR2V0RnVuZCkgewogICAgICAgIHNlbGYuZ2V0RnVuZChhY3Rpb24pOwogICAgfQoKICAgIC8qKgogICAgICogQG5vdGljZSBSZWZ1bmQgY3Jvc3MtY2hhaW4gb3JkZXIgYWZ0ZXIgdGltZWxvY2sgZXhwaXJhdGlvbgogICAgICogQGRldiBSZXR1cm5zIGZ1bmRzIHRvIG9yaWdpbmFsIHNlbmRlciBpZiBvcmRlciBleHBpcmVzCiAgICAgKiBAcGFyYW0gYWN0aW9uLmhhc2ggVGhlIGhhc2hsb2NrIG9mIHRoZSBvcmRlciB0byByZWZ1bmQKICAgICAqIEBwYXJhbSBhY3Rpb24uY3VzdG9tUGF5bG9hZCBPcHRpb25hbCBjdXN0b20gcGF5bG9hZAogICAgICogQGN1c3RvbTpzZWN1cml0eSBPbmx5IHdvcmtzIGFmdGVyIHRpbWVsb2NrIGV4cGlyYXRpb24KICAgICAqLwogICAgcmVjZWl2ZShhY3Rpb246IFJlZnVuZCkgewogICAgICAgIHNlbGYucmVmdW5kKGFjdGlvbik7CiAgICB9CgogICAgLyoqCiAgICAgKiBAbm90aWNlIFJlZnVuZCBzYW1lLWNoYWluIG9yZGVyIGFmdGVyIHRpbWVsb2NrIGV4cGlyYXRpb24KICAgICAqIEBkZXYgUmV0dXJucyBmdW5kcyB0byBvcmlnaW5hbCBzZW5kZXIgaWYgb3JkZXIgZXhwaXJlcwogICAgICogQHBhcmFtIGFjdGlvbi5oYXNoIFRoZSBoYXNobG9jayBvZiB0aGUgb3JkZXIgdG8gcmVmdW5kCiAgICAgKiBAcGFyYW0gYWN0aW9uLmN1c3RvbVBheWxvYWQgT3B0aW9uYWwgY3VzdG9tIHBheWxvYWQKICAgICAqIEBjdXN0b206c2VjdXJpdHkgT25seSB3b3JrcyBhZnRlciB0aW1lbG9jayBleHBpcmF0aW9uCiAgICAgKi8KICAgIHJlY2VpdmUoYWN0aW9uOiBSZWZ1bmRPcmRlcikgewogICAgICAgIHNlbGYucmVmdW5kT3JkZXIoYWN0aW9uKTsKICAgIH0KCiAgICAvKioKICAgICAqIEBub3RpY2UgQ3JlYXRlIGEgcGFydGlhbCBmaWxsIGZvciBhbiBvcmRlcgogICAgICogQGRldiBBbGxvd3MgbXVsdGlwbGUgcGFydGllcyB0byBmaWxsIHBhcnRzIG9mIGEgbGFyZ2Ugb3JkZXIKICAgICAqIEBwYXJhbSBhY3Rpb24ub3JkZXJIYXNoIFRoZSBoYXNobG9jayBvZiB0aGUgb3JkZXIKICAgICAqIEBwYXJhbSBhY3Rpb24uc2VjcmV0IFVuaXF1ZSBzZWNyZXQgZm9yIHRoaXMgcGFydGlhbCBmaWxsCiAgICAgKiBAcGFyYW0gYWN0aW9uLmZpbGxBbW91bnQgQW1vdW50IHRvIGZpbGwgaW4gdGhpcyBwYXJ0aWFsCiAgICAgKiBAcGFyYW0gYWN0aW9uLnJlc29sdmVyIEFkZHJlc3Mgb2YgdGhlIHJlbGF5ZXIvcmVzb2x2ZXIKICAgICAqIEBwYXJhbSBhY3Rpb24uY3VzdG9tUGF5bG9hZCBPcHRpb25hbCBjdXN0b20gcGF5bG9hZAogICAgICogQGN1c3RvbTpzZWN1cml0eSBFYWNoIHNlY3JldCBjYW4gb25seSBiZSB1c2VkIG9uY2UgcGVyIG9yZGVyCiAgICAgKi8KICAgIHJlY2VpdmUoYWN0aW9uOiBQYXJ0aWFsRmlsbCkgewogICAgICAgIHNlbGYucGFydGlhbEZpbGwoYWN0aW9uKTsKICAgIH0KCiAgICAvKioKICAgICAqIEBub3RpY2UgQ29tcGxldGUgYSBwYXJ0aWFsIGZpbGwgdXNpbmcgdGhlIHNlY3JldAogICAgICogQGRldiBUcmFuc2ZlcnMgdGhlIHBhcnRpYWwgYW1vdW50IHRvIHRoZSByZWNlaXZlcgogICAgICogQHBhcmFtIGFjdGlvbi5vcmRlckhhc2ggVGhlIGhhc2hsb2NrIG9mIHRoZSBvcmRlcgogICAgICogQHBhcmFtIGFjdGlvbi5zZWNyZXQgVGhlIHNlY3JldCBmb3IgdGhlIHBhcnRpYWwgZmlsbAogICAgICogQHBhcmFtIGFjdGlvbi5jdXN0b21QYXlsb2FkIE9wdGlvbmFsIGN1c3RvbSBwYXlsb2FkCiAgICAgKiBAY3VzdG9tOnNlY3VyaXR5IFJlcXVpcmVzIHZhbGlkIHBhcnRpYWwgZmlsbCBzZWNyZXQKICAgICAqLwogICAgcmVjZWl2ZShhY3Rpb246IENvbXBsZXRlUGFydGlhbEZpbGwpIHsKICAgICAgICBzZWxmLmNvbXBsZXRlUGFydGlhbEZpbGwoYWN0aW9uKTsKICAgIH0KCiAgICAvKioKICAgICAqIEBub3RpY2UgRGVwbG95IGVzY3JvdyBjb250cmFjdCBmb3IgYSB0YXJnZXQgY2hhaW4KICAgICAqIEBkZXYgT25seSBjYWxsYWJsZSBieSBjb250cmFjdCBvd25lcgogICAgICogQHBhcmFtIGFjdGlvbi5jaGFpbklkIFRhcmdldCBjaGFpbiBJRCBmb3IgZXNjcm93IGRlcGxveW1lbnQKICAgICAqIEBwYXJhbSBhY3Rpb24udGFyZ2V0QWRkcmVzcyBBZGRyZXNzIHdoZXJlIGVzY3JvdyBzaG91bGQgYmUgZGVwbG95ZWQKICAgICAqIEBwYXJhbSBhY3Rpb24uY3VzdG9tUGF5bG9hZCBPcHRpb25hbCBjdXN0b20gcGF5bG9hZAogICAgICogQGN1c3RvbTpzZWN1cml0eSBPbmx5IG93bmVyIGNhbiBkZXBsb3kgZXNjcm93IGNvbnRyYWN0cwogICAgICovCiAgICByZWNlaXZlKGFjdGlvbjogRGVwbG95RXNjcm93KSB7CiAgICAgICAgc2VsZi5kZXBsb3lFc2Nyb3coYWN0aW9uKTsKICAgIH0KCiAgICAvKioKICAgICAqIEBub3RpY2UgVXBkYXRlIHJlbGF5ZXIgcGVyZm9ybWFuY2Ugc3RhdGlzdGljcwogICAgICogQGRldiBUcmFja3Mgc3VjY2Vzcy9mYWlsdXJlIHJhdGVzIGZvciByZWxheWVyIHJlcHV0YXRpb24KICAgICAqIEBwYXJhbSBhY3Rpb24ucmVsYXllciBBZGRyZXNzIG9mIHRoZSByZWxheWVyCiAgICAgKiBAcGFyYW0gYWN0aW9uLnN1Y2Nlc3MgVHJ1ZSBpZiByZXNvbHV0aW9uIHdhcyBzdWNjZXNzZnVsCiAgICAgKiBAcGFyYW0gYWN0aW9uLmN1c3RvbVBheWxvYWQgT3B0aW9uYWwgY3VzdG9tIHBheWxvYWQKICAgICAqLwogICAgcmVjZWl2ZShhY3Rpb246IFVwZGF0ZVJlbGF5ZXJTdGF0cykgewogICAgICAgIHNlbGYudXBkYXRlUmVsYXllclN0YXRzKGFjdGlvbik7CiAgICB9CgogICAgLyoqCiAgICAgKiBAbm90aWNlIEhhbmRsZSBDcmVhdGVFVk1Ub1RPTk9yZGVyIG1lc3NhZ2UKICAgICAqIEBkZXYgQ3JlYXRlcyBvcmRlciBmb3IgaW5jb21pbmcgRVZNIHRvIFRPTiBzd2FwCiAgICAgKiBAcGFyYW0gYWN0aW9uIENyZWF0ZUVWTVRvVE9OT3JkZXIgbWVzc2FnZQogICAgICogQGN1c3RvbTpzZWN1cml0eSBWYWxpZGF0ZXMgd2hpdGVsaXN0LCB0aW1lbG9jaywgYW5kIG9yZGVyIHVuaXF1ZW5lc3MKICAgICAqLwogICAgcmVjZWl2ZShhY3Rpb246IENyZWF0ZUVWTVRvVE9OT3JkZXIpIHsKICAgICAgICBzZWxmLmNyZWF0ZUVWTVRvVE9OT3JkZXIoYWN0aW9uLnRvQ2VsbCgpKTsKICAgIH0KCiAgICAvKioKICAgICAqIEBub3RpY2UgSGFuZGxlIENyZWF0ZVRPTlRvRVZNT3JkZXIgbWVzc2FnZQogICAgICogQGRldiBDcmVhdGVzIG9yZGVyIGZvciBvdXRnb2luZyBUT04gdG8gRVZNIHN3YXAKICAgICAqIEBwYXJhbSBhY3Rpb24gQ3JlYXRlVE9OVG9FVk1PcmRlciBtZXNzYWdlCiAgICAgKiBAY3VzdG9tOnNlY3VyaXR5IFZhbGlkYXRlcyB3aGl0ZWxpc3QsIHRpbWVsb2NrLCBhbmQgb3JkZXIgdW5pcXVlbmVzcwogICAgICovCiAgICByZWNlaXZlKGFjdGlvbjogQ3JlYXRlVE9OVG9FVk1PcmRlcikgewogICAgICAgIHNlbGYuY3JlYXRlVE9OVG9FVk1PcmRlcihhY3Rpb24udG9DZWxsKCkpOwogICAgfQoKICAgIC8qKgogICAgICogQG5vdGljZSBDcmVhdGUgY3Jvc3MtY2hhaW4gb3JkZXIgKFRPTiDihpIgRVZNKQogICAgICogQGRldiBMb2NrcyBqZXR0b25zIGZvciBjcm9zcy1jaGFpbiBzd2FwIHRvIEVWTSBjaGFpbnMKICAgICAqIEBwYXJhbSBwYXlsb2FkIEVuY29kZWQgTG9ja0pldHRvbiBtZXNzYWdlCiAgICAgKiBAY3VzdG9tOnNlY3VyaXR5IFZhbGlkYXRlcyB3aGl0ZWxpc3QsIHRpbWVsb2NrLCBhbmQgb3JkZXIgdW5pcXVlbmVzcwogICAgICovCiAgICBmdW4gY3JlYXRlKHBheWxvYWQ6IENlbGwpIHsKICAgICAgICBsZXQgbXNnID0gTG9ja0pldHRvbi5mcm9tQ2VsbChwYXlsb2FkKTsKCiAgICAgICAgaWYgKHNlbGYud2hpdGVMaXN0cy5nZXQoc2VuZGVyKCkpID09IHRydWUpIHsKICAgICAgICAgICAgdGhyb3coSU5WQUxJRF9XSElURUxJU1QpOwogICAgICAgIH0KCiAgICAgICAgaWYgKG5vdygpID49IG1zZy5vcmRlckNvbmZpZy50aW1lbG9jaykgewogICAgICAgICAgICB0aHJvdyhPUkRFUl9FWFBJUkVEKTsKICAgICAgICB9CgogICAgICAgIGlmIChzZWxmLmVzY3Jvd0xvY2suZ2V0KG1zZy5vcmRlckNvbmZpZy5oYXNobG9jaykgIT0gbnVsbCkgewogICAgICAgICAgICB0aHJvdyhPUkRFUl9BTFJFQURZX0VYSVNUUyk7CiAgICAgICAgfQoKICAgICAgICAvLyBTZXQgZGlyZWN0aW9uCiAgICAgICAgbXNnLm9yZGVyQ29uZmlnLmRpcmVjdGlvbiA9IFRPTl9UT19FVk07CgogICAgICAgIHNlbGYuamV0dG9ucy5zZXQobXNnLm9yZGVyQ29uZmlnLnNyY0pldHRvbkFkZHJlc3MsIG1zZy5qZXR0b24pOwogICAgICAgIHNlbGYuamV0dG9uQWNjb3VudC5zZXQobXNnLm9yZGVyQ29uZmlnLnNyY0pldHRvbkFkZHJlc3MsIHNlbmRlcigpKTsKICAgICAgICBzZWxmLmVzY3Jvd0xvY2suc2V0KG1zZy5vcmRlckNvbmZpZy5oYXNobG9jaywgbXNnLm9yZGVyQ29uZmlnKTsKICAgICAgICAKICAgICAgICBzZWxmLnRvdGFsT3JkZXJzID0gc2VsZi50b3RhbE9yZGVycyArIDE7CiAgICAgICAgc2VsZi50b3RhbFZvbHVtZSA9IHNlbGYudG90YWxWb2x1bWUgKyBtc2cub3JkZXJDb25maWcuYW1vdW50OwogICAgfQoKICAgIC8qKgogICAgICogQG5vdGljZSBDcmVhdGUgc2FtZS1jaGFpbiBvcmRlciAoVE9OIOKGkiBUT04pCiAgICAgKiBAZGV2IExvY2tzIGpldHRvbnMgZm9yIHNhbWUtY2hhaW4gc3dhcCB3aXRoaW4gVE9OCiAgICAgKiBAcGFyYW0gcGF5bG9hZCBFbmNvZGVkIENyZWF0ZU9yZGVyIG1lc3NhZ2UKICAgICAqIEBjdXN0b206c2VjdXJpdHkgVmFsaWRhdGVzIHdoaXRlbGlzdCwgdGltZWxvY2ssIGFuZCBvcmRlciB1bmlxdWVuZXNzCiAgICAgKi8KICAgIGZ1biBtYWtlT3JkZXIocGF5bG9hZDogQ2VsbCkgewogICAgICAgIGxldCBtc2cgPSBDcmVhdGVPcmRlci5mcm9tQ2VsbChwYXlsb2FkKTsKCiAgICAgICAgaWYgKHNlbGYud2hpdGVMaXN0cy5nZXQoc2VuZGVyKCkpID09IHRydWUpIHsKICAgICAgICAgICAgdGhyb3coSU5WQUxJRF9XSElURUxJU1QpOwogICAgICAgIH0KCiAgICAgICAgaWYgKG5vdygpID49IG1zZy5vcmRlckNvbmZpZy50aW1lbG9jaykgewogICAgICAgICAgICB0aHJvdyhPUkRFUl9FWFBJUkVEKTsKICAgICAgICB9CgogICAgICAgIGlmIChzZWxmLmVzY3Jvd09yZGVyLmdldChtc2cub3JkZXJDb25maWcuaGFzaGxvY2spICE9IG51bGwpIHsKICAgICAgICAgICAgdGhyb3coT1JERVJfQUxSRUFEWV9FWElTVFMpOwogICAgICAgIH0KCiAgICAgICAgLy8gU2V0IGRpcmVjdGlvbgogICAgICAgIG1zZy5vcmRlckNvbmZpZy5kaXJlY3Rpb24gPSBUT05fVE9fVE9OOwoKICAgICAgICBzZWxmLmpldHRvbnMuc2V0KG1zZy5vcmRlckNvbmZpZy5zcmNKZXR0b25BZGRyZXNzLCBtc2cuamV0dG9uKTsKICAgICAgICBzZWxmLmpldHRvbkFjY291bnQuc2V0KG1zZy5vcmRlckNvbmZpZy5zcmNKZXR0b25BZGRyZXNzLCBzZW5kZXIoKSk7CiAgICAgICAgc2VsZi5lc2Nyb3dPcmRlci5zZXQobXNnLm9yZGVyQ29uZmlnLmhhc2hsb2NrLCBtc2cub3JkZXJDb25maWcpOwogICAgICAgIAogICAgICAgIHNlbGYudG90YWxPcmRlcnMgPSBzZWxmLnRvdGFsT3JkZXJzICsgMTsKICAgICAgICBzZWxmLnRvdGFsVm9sdW1lID0gc2VsZi50b3RhbFZvbHVtZSArIG1zZy5vcmRlckNvbmZpZy5hbW91bnQ7CiAgICB9CgogICAgLyoqCiAgICAgKiBAbm90aWNlIENyZWF0ZSBFVk0g4oaSIFRPTiBvcmRlcgogICAgICogQGRldiBDcmVhdGVzIG9yZGVyIGZvciBpbmNvbWluZyBFVk0gdG8gVE9OIHN3YXAKICAgICAqIEBwYXJhbSBwYXlsb2FkIEVuY29kZWQgQ3JlYXRlRVZNVG9UT05PcmRlciBtZXNzYWdlCiAgICAgKiBAY3VzdG9tOnNlY3VyaXR5IFZhbGlkYXRlcyB3aGl0ZWxpc3QsIHRpbWVsb2NrLCBhbmQgb3JkZXIgdW5pcXVlbmVzcwogICAgICovCiAgICBmdW4gY3JlYXRlRVZNVG9UT05PcmRlcihwYXlsb2FkOiBDZWxsKSB7CiAgICAgICAgbGV0IG1zZyA9IENyZWF0ZUVWTVRvVE9OT3JkZXIuZnJvbUNlbGwocGF5bG9hZCk7CgogICAgICAgIGlmIChzZWxmLndoaXRlTGlzdHMuZ2V0KHNlbmRlcigpKSA9PSB0cnVlKSB7CiAgICAgICAgICAgIHRocm93KElOVkFMSURfV0hJVEVMSVNUKTsKICAgICAgICB9CgogICAgICAgIGlmIChub3coKSA+PSBtc2cub3JkZXJDb25maWcudGltZWxvY2spIHsKICAgICAgICAgICAgdGhyb3coT1JERVJfRVhQSVJFRCk7CiAgICAgICAgfQoKICAgICAgICBpZiAoc2VsZi5lc2Nyb3dMb2NrLmdldChtc2cub3JkZXJDb25maWcuaGFzaGxvY2spICE9IG51bGwpIHsKICAgICAgICAgICAgdGhyb3coT1JERVJfQUxSRUFEWV9FWElTVFMpOwogICAgICAgIH0KCiAgICAgICAgLy8gU2V0IGRpcmVjdGlvbgogICAgICAgIG1zZy5vcmRlckNvbmZpZy5kaXJlY3Rpb24gPSBFVk1fVE9fVE9OOwoKICAgICAgICBzZWxmLmVzY3Jvd0xvY2suc2V0KG1zZy5vcmRlckNvbmZpZy5oYXNobG9jaywgbXNnLm9yZGVyQ29uZmlnKTsKICAgICAgICAKICAgICAgICBzZWxmLnRvdGFsT3JkZXJzID0gc2VsZi50b3RhbE9yZGVycyArIDE7CiAgICAgICAgc2VsZi50b3RhbFZvbHVtZSA9IHNlbGYudG90YWxWb2x1bWUgKyBtc2cub3JkZXJDb25maWcuYW1vdW50OwogICAgfQoKICAgIC8qKgogICAgICogQG5vdGljZSBDcmVhdGUgVE9OIOKGkiBFVk0gb3JkZXIKICAgICAqIEBkZXYgQ3JlYXRlcyBvcmRlciBmb3Igb3V0Z29pbmcgVE9OIHRvIEVWTSBzd2FwCiAgICAgKiBAcGFyYW0gcGF5bG9hZCBFbmNvZGVkIENyZWF0ZVRPTlRvRVZNT3JkZXIgbWVzc2FnZQogICAgICogQGN1c3RvbTpzZWN1cml0eSBWYWxpZGF0ZXMgd2hpdGVsaXN0LCB0aW1lbG9jaywgYW5kIG9yZGVyIHVuaXF1ZW5lc3MKICAgICAqLwogICAgZnVuIGNyZWF0ZVRPTlRvRVZNT3JkZXIocGF5bG9hZDogQ2VsbCkgewogICAgICAgIGxldCBtc2cgPSBDcmVhdGVUT05Ub0VWTU9yZGVyLmZyb21DZWxsKHBheWxvYWQpOwoKICAgICAgICBpZiAoc2VsZi53aGl0ZUxpc3RzLmdldChzZW5kZXIoKSkgPT0gdHJ1ZSkgewogICAgICAgICAgICB0aHJvdyhJTlZBTElEX1dISVRFTElTVCk7CiAgICAgICAgfQoKICAgICAgICBpZiAobm93KCkgPj0gbXNnLm9yZGVyQ29uZmlnLnRpbWVsb2NrKSB7CiAgICAgICAgICAgIHRocm93KE9SREVSX0VYUElSRUQpOwogICAgICAgIH0KCiAgICAgICAgaWYgKHNlbGYuZXNjcm93TG9jay5nZXQobXNnLm9yZGVyQ29uZmlnLmhhc2hsb2NrKSAhPSBudWxsKSB7CiAgICAgICAgICAgIHRocm93KE9SREVSX0FMUkVBRFlfRVhJU1RTKTsKICAgICAgICB9CgogICAgICAgIC8vIFNldCBkaXJlY3Rpb24KICAgICAgICBtc2cub3JkZXJDb25maWcuZGlyZWN0aW9uID0gVE9OX1RPX0VWTTsKCiAgICAgICAgc2VsZi5lc2Nyb3dMb2NrLnNldChtc2cub3JkZXJDb25maWcuaGFzaGxvY2ssIG1zZy5vcmRlckNvbmZpZyk7CiAgICAgICAgCiAgICAgICAgc2VsZi50b3RhbE9yZGVycyA9IHNlbGYudG90YWxPcmRlcnMgKyAxOwogICAgICAgIHNlbGYudG90YWxWb2x1bWUgPSBzZWxmLnRvdGFsVm9sdW1lICsgbXNnLm9yZGVyQ29uZmlnLmFtb3VudDsKICAgIH0KCiAgICAvKioKICAgICAqIEBub3RpY2UgQ3JlYXRlIGEgcGFydGlhbCBmaWxsIGZvciBhbiBvcmRlcgogICAgICogQGRldiBBbGxvd3MgbXVsdGlwbGUgcGFydGllcyB0byBmaWxsIHBhcnRzIG9mIGEgbGFyZ2Ugb3JkZXIgd2l0aCB1bmlxdWUgc2VjcmV0cwogICAgICogQHBhcmFtIG1zZyBQYXJ0aWFsRmlsbCBtZXNzYWdlIGNvbnRhaW5pbmcgb3JkZXIgZGV0YWlscwogICAgICogQGN1c3RvbTpzZWN1cml0eSBWYWxpZGF0ZXMgb3JkZXIgZXhpc3RzLCBub3QgZmluYWxpemVkLCBhbmQgc2VjcmV0IHVuaXF1ZW5lc3MKICAgICAqLwogICAgZnVuIHBhcnRpYWxGaWxsKG1zZzogUGFydGlhbEZpbGwpIHsKICAgICAgICBsZXQgb3JkZXJDb25maWdEYXRhID0gc2VsZi5lc2Nyb3dMb2NrLmdldChtc2cub3JkZXJIYXNoKTsKICAgICAgICBpZiAob3JkZXJDb25maWdEYXRhICE9IG51bGwpIHsKICAgICAgICAgICAgbGV0IG9yZGVyID0gb3JkZXJDb25maWdEYXRhISE7CiAgICAgICAgICAgIGlmIChvcmRlci5maW5hbGl6ZWQpIHsKICAgICAgICAgICAgICAgIHRocm93KE9SREVSX0FMUkVBRFlfRklOQUxJWkVEKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAobXNnLmZpbGxBbW91bnQgPiBvcmRlci5hbW91bnQgLSBvcmRlci50b3RhbEZpbGxlZCkgewogICAgICAgICAgICAgICAgdGhyb3coUEFSVElBTF9GSUxMX0VYQ0VFRFNfT1JERVIpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChvcmRlci5wYXJ0aWFsRmlsbHMuZ2V0KG1zZy5zZWNyZXQpICE9IG51bGwpIHsKICAgICAgICAgICAgICAgIHRocm93KFNFQ1JFVF9BTFJFQURZX1VTRUQpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIG9yZGVyLnBhcnRpYWxGaWxscy5zZXQobXNnLnNlY3JldCwgbXNnLmZpbGxBbW91bnQpOwogICAgICAgICAgICBvcmRlci50b3RhbEZpbGxlZCA9IG9yZGVyLnRvdGFsRmlsbGVkICsgbXNnLmZpbGxBbW91bnQ7CiAgICAgICAgICAgIGxldCByZWxheWVyRGF0YSA9IHNlbGYucmVsYXllcnMuZ2V0KG1zZy5yZXNvbHZlcik7CiAgICAgICAgICAgIGlmIChyZWxheWVyRGF0YSAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICBsZXQgdXBkYXRlZFJlbGF5ZXIgPSBSZWxheWVyRGF0YXsKICAgICAgICAgICAgICAgICAgICBhZGRyZXNzOiByZWxheWVyRGF0YSEhLmFkZHJlc3MsCiAgICAgICAgICAgICAgICAgICAgd2hpdGVsaXN0ZWQ6IHJlbGF5ZXJEYXRhISEud2hpdGVsaXN0ZWQsCiAgICAgICAgICAgICAgICAgICAgdG90YWxSZXNvbHZlczogcmVsYXllckRhdGEhIS50b3RhbFJlc29sdmVzICsgMSwKICAgICAgICAgICAgICAgICAgICBzdWNjZXNzUmF0ZTogcmVsYXllckRhdGEhIS5zdWNjZXNzUmF0ZQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIHNlbGYucmVsYXllcnMuc2V0KG1zZy5yZXNvbHZlciwgdXBkYXRlZFJlbGF5ZXIpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHNlbGYudG90YWxSZXNvbHZlcyA9IHNlbGYudG90YWxSZXNvbHZlcyArIDE7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgbGV0IG9yZGVyRGF0YSA9IHNlbGYuZXNjcm93T3JkZXIuZ2V0KG1zZy5vcmRlckhhc2gpOwogICAgICAgIGlmIChvcmRlckRhdGEgIT0gbnVsbCkgewogICAgICAgICAgICBsZXQgb3JkZXIgPSBvcmRlckRhdGEhITsKICAgICAgICAgICAgaWYgKG9yZGVyLmZpbmFsaXplZCkgewogICAgICAgICAgICAgICAgdGhyb3coT1JERVJfQUxSRUFEWV9GSU5BTElaRUQpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChtc2cuZmlsbEFtb3VudCA+IG9yZGVyLmFtb3VudCAtIG9yZGVyLnRvdGFsRmlsbGVkKSB7CiAgICAgICAgICAgICAgICB0aHJvdyhQQVJUSUFMX0ZJTExfRVhDRUVEU19PUkRFUik7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKG9yZGVyLnBhcnRpYWxGaWxscy5nZXQobXNnLnNlY3JldCkgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgdGhyb3coU0VDUkVUX0FMUkVBRFlfVVNFRCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgb3JkZXIucGFydGlhbEZpbGxzLnNldChtc2cuc2VjcmV0LCBtc2cuZmlsbEFtb3VudCk7CiAgICAgICAgICAgIG9yZGVyLnRvdGFsRmlsbGVkID0gb3JkZXIudG90YWxGaWxsZWQgKyBtc2cuZmlsbEFtb3VudDsKICAgICAgICAgICAgbGV0IHJlbGF5ZXJEYXRhID0gc2VsZi5yZWxheWVycy5nZXQobXNnLnJlc29sdmVyKTsKICAgICAgICAgICAgaWYgKHJlbGF5ZXJEYXRhICE9IG51bGwpIHsKICAgICAgICAgICAgICAgIGxldCB1cGRhdGVkUmVsYXllciA9IFJlbGF5ZXJEYXRhewogICAgICAgICAgICAgICAgICAgIGFkZHJlc3M6IHJlbGF5ZXJEYXRhISEuYWRkcmVzcywKICAgICAgICAgICAgICAgICAgICB3aGl0ZWxpc3RlZDogcmVsYXllckRhdGEhIS53aGl0ZWxpc3RlZCwKICAgICAgICAgICAgICAgICAgICB0b3RhbFJlc29sdmVzOiByZWxheWVyRGF0YSEhLnRvdGFsUmVzb2x2ZXMgKyAxLAogICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3NSYXRlOiByZWxheWVyRGF0YSEhLnN1Y2Nlc3NSYXRlCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgc2VsZi5yZWxheWVycy5zZXQobXNnLnJlc29sdmVyLCB1cGRhdGVkUmVsYXllcik7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgc2VsZi50b3RhbFJlc29sdmVzID0gc2VsZi50b3RhbFJlc29sdmVzICsgMTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICB0aHJvdyhJTlZBTElEX0hBU0gpOwogICAgfQoKICAgIC8qKgogICAgICogQG5vdGljZSBDb21wbGV0ZSBhIHBhcnRpYWwgZmlsbCB1c2luZyB0aGUgc2VjcmV0CiAgICAgKiBAZGV2IFRyYW5zZmVycyB0aGUgcGFydGlhbCBhbW91bnQgdG8gdGhlIHJlY2VpdmVyIGJhc2VkIG9uIG9yZGVyIGRpcmVjdGlvbgogICAgICogQHBhcmFtIG1zZyBDb21wbGV0ZVBhcnRpYWxGaWxsIG1lc3NhZ2UgY29udGFpbmluZyBvcmRlciBkZXRhaWxzCiAgICAgKiBAY3VzdG9tOnNlY3VyaXR5IFZhbGlkYXRlcyBwYXJ0aWFsIGZpbGwgZXhpc3RzIGFuZCBwcm9jZXNzZXMgdHJhbnNmZXIKICAgICAqLwogICAgZnVuIGNvbXBsZXRlUGFydGlhbEZpbGwobXNnOiBDb21wbGV0ZVBhcnRpYWxGaWxsKSB7CiAgICAgICAgbGV0IG9yZGVyQ29uZmlnRGF0YSA9IHNlbGYuZXNjcm93TG9jay5nZXQobXNnLm9yZGVySGFzaCk7CiAgICAgICAgaWYgKG9yZGVyQ29uZmlnRGF0YSAhPSBudWxsKSB7CiAgICAgICAgICAgIGxldCBvcmRlciA9IG9yZGVyQ29uZmlnRGF0YSEhOwogICAgICAgICAgICBsZXQgZmlsbEFtb3VudCA9IG9yZGVyLnBhcnRpYWxGaWxscy5nZXQobXNnLnNlY3JldCk7CiAgICAgICAgICAgIGlmIChmaWxsQW1vdW50ID09IG51bGwpIHsKICAgICAgICAgICAgICAgIHRocm93KE9SREVSX05PVF9QQVJUSUFMTFlfRklMTEVEKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAob3JkZXIuZGlyZWN0aW9uID09IFRPTl9UT19FVk0gfHwgb3JkZXIuZGlyZWN0aW9uID09IFRPTl9UT19UT04pIHsKICAgICAgICAgICAgICAgIHNlbGYucHJvY2Vzc0pldHRvblRyYW5zZmVyKG9yZGVyLCBmaWxsQW1vdW50ISEsIG1zZy5zZWNyZXQpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgc2VsZi5wcm9jZXNzRVZNVHJhbnNmZXIob3JkZXIsIGZpbGxBbW91bnQhISwgbXNnLnNlY3JldCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBsZXQgb3JkZXJEYXRhID0gc2VsZi5lc2Nyb3dPcmRlci5nZXQobXNnLm9yZGVySGFzaCk7CiAgICAgICAgaWYgKG9yZGVyRGF0YSAhPSBudWxsKSB7CiAgICAgICAgICAgIGxldCBvcmRlciA9IG9yZGVyRGF0YSEhOwogICAgICAgICAgICBsZXQgZmlsbEFtb3VudCA9IG9yZGVyLnBhcnRpYWxGaWxscy5nZXQobXNnLnNlY3JldCk7CiAgICAgICAgICAgIGlmIChmaWxsQW1vdW50ID09IG51bGwpIHsKICAgICAgICAgICAgICAgIHRocm93KE9SREVSX05PVF9QQVJUSUFMTFlfRklMTEVEKTsKICAgICAgICAgICAgfQogICAgICAgICAgICAvLyBPbmx5IFRPTl9UT19UT04gaXMgcG9zc2libGUgZm9yIE9yZGVyCiAgICAgICAgICAgIHNlbGYucHJvY2Vzc0pldHRvblRyYW5zZmVyT3JkZXIob3JkZXIsIGZpbGxBbW91bnQhISwgbXNnLnNlY3JldCk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgdGhyb3coSU5WQUxJRF9IQVNIKTsKICAgIH0KCiAgICAvKioKICAgICAqIEBub3RpY2UgQ2xhaW0gZnVuZHMgdXNpbmcgdGhlIGNvcnJlY3Qgc2VjcmV0CiAgICAgKiBAZGV2IFZhbGlkYXRlcyBzZWNyZXQgaGFzaCBtYXRjaGVzIGhhc2hsb2NrIGFuZCB0cmFuc2ZlcnMgZnVsbCBhbW91bnQKICAgICAqIEBwYXJhbSBtc2cgR2V0RnVuZCBtZXNzYWdlIGNvbnRhaW5pbmcgc2VjcmV0IGFuZCBoYXNoCiAgICAgKiBAY3VzdG9tOnNlY3VyaXR5IFJlcXVpcmVzIGNvcnJlY3Qgc2VjcmV0LCB2YWxpZCB0aW1lbG9jaywgYW5kIG9yZGVyIG5vdCBmaW5hbGl6ZWQKICAgICAqLwogICAgZnVuIGdldEZ1bmQobXNnOiBHZXRGdW5kKSB7CiAgICAgICAgbGV0IGRhdGEgPSBzZWxmLmVzY3Jvd0xvY2suZ2V0KG1zZy5oYXNoKTsKICAgICAgICBpZiAoZGF0YSA9PSBudWxsKSB7CiAgICAgICAgICAgIHRocm93KElOVkFMSURfSEFTSCk7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIGxldCBvcmRlciA9IGRhdGEhITsKICAgICAgICBsZXQgc2VjcmV0SGFzaCA9IGtlY2Nha0J5dGVzMzIobXNnLnNlY3JldCk7CiAgICAgICAgCiAgICAgICAgaWYgKG5vdygpID4gb3JkZXIudGltZWxvY2spIHsKICAgICAgICAgICAgdGhyb3coT1JERVJfRVhQSVJFRCk7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIGlmIChvcmRlci5maW5hbGl6ZWQpIHsKICAgICAgICAgICAgdGhyb3coT1JERVJfQUxSRUFEWV9GSU5BTElaRUQpOwogICAgICAgIH0KICAgICAgICAKICAgICAgICBpZiAoc2VjcmV0SGFzaCAhPSBvcmRlci5oYXNobG9jaykgewogICAgICAgICAgICB0aHJvdyhJTlZBTElEX1NFQ1JFVCk7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIG9yZGVyLmZpbmFsaXplZCA9IHRydWU7CiAgICAgICAgc2VsZi5wcm9jZXNzSmV0dG9uVHJhbnNmZXIob3JkZXIsIG9yZGVyLmFtb3VudCwgbXNnLnNlY3JldCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBAbm90aWNlIFJlZnVuZCBjcm9zcy1jaGFpbiBvcmRlciBhZnRlciB0aW1lbG9jayBleHBpcmF0aW9uCiAgICAgKiBAZGV2IFJldHVybnMgZnVuZHMgdG8gb3JpZ2luYWwgc2VuZGVyIGlmIG9yZGVyIGV4cGlyZXMKICAgICAqIEBwYXJhbSBtc2cgUmVmdW5kIG1lc3NhZ2UgY29udGFpbmluZyBvcmRlciBoYXNoCiAgICAgKiBAY3VzdG9tOnNlY3VyaXR5IE9ubHkgd29ya3MgYWZ0ZXIgdGltZWxvY2sgZXhwaXJhdGlvbiBhbmQgb3JkZXIgbm90IGZpbmFsaXplZAogICAgICovCiAgICBmdW4gcmVmdW5kKG1zZzogUmVmdW5kKSB7CiAgICAgICAgbGV0IGRhdGEgPSBzZWxmLmVzY3Jvd0xvY2suZ2V0KG1zZy5oYXNoKTsKICAgICAgICBpZiAoZGF0YSA9PSBudWxsKSB7CiAgICAgICAgICAgIHRocm93KElOVkFMSURfSEFTSCk7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIGxldCBvcmRlciA9IGRhdGEhITsKICAgICAgICAKICAgICAgICBpZiAobm93KCkgPCBvcmRlci50aW1lbG9jaykgewogICAgICAgICAgICB0aHJvdyhPUkRFUl9OT1RfRVhQSVJFRCk7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIGlmIChvcmRlci5maW5hbGl6ZWQpIHsKICAgICAgICAgICAgdGhyb3coT1JERVJfQUxSRUFEWV9GSU5BTElaRUQpOwogICAgICAgIH0KICAgICAgICAKICAgICAgICBvcmRlci5maW5hbGl6ZWQgPSB0cnVlOwogICAgICAgIHNlbGYucHJvY2Vzc0pldHRvblJlZnVuZChvcmRlcik7CiAgICB9CgogICAgLyoqCiAgICAgKiBAbm90aWNlIFJlZnVuZCBzYW1lLWNoYWluIG9yZGVyIGFmdGVyIHRpbWVsb2NrIGV4cGlyYXRpb24KICAgICAqIEBkZXYgUmV0dXJucyBmdW5kcyB0byBvcmlnaW5hbCBzZW5kZXIgaWYgb3JkZXIgZXhwaXJlcwogICAgICogQHBhcmFtIG1zZyBSZWZ1bmRPcmRlciBtZXNzYWdlIGNvbnRhaW5pbmcgb3JkZXIgaGFzaAogICAgICogQGN1c3RvbTpzZWN1cml0eSBPbmx5IHdvcmtzIGFmdGVyIHRpbWVsb2NrIGV4cGlyYXRpb24gYW5kIG9yZGVyIG5vdCBmaW5hbGl6ZWQKICAgICAqLwogICAgZnVuIHJlZnVuZE9yZGVyKG1zZzogUmVmdW5kT3JkZXIpIHsKICAgICAgICBsZXQgZGF0YSA9IHNlbGYuZXNjcm93T3JkZXIuZ2V0KG1zZy5oYXNoKTsKICAgICAgICBpZiAoZGF0YSA9PSBudWxsKSB7CiAgICAgICAgICAgIHRocm93KElOVkFMSURfSEFTSCk7CiAgICAgICAgfQogICAgICAgIGxldCBvcmRlciA9IGRhdGEhITsKICAgICAgICBpZiAobm93KCkgPCBvcmRlci50aW1lbG9jaykgewogICAgICAgICAgICB0aHJvdyhPUkRFUl9OT1RfRVhQSVJFRCk7CiAgICAgICAgfQogICAgICAgIGlmIChvcmRlci5maW5hbGl6ZWQpIHsKICAgICAgICAgICAgdGhyb3coT1JERVJfQUxSRUFEWV9GSU5BTElaRUQpOwogICAgICAgIH0KICAgICAgICBvcmRlci5maW5hbGl6ZWQgPSB0cnVlOwogICAgICAgIHNlbGYucHJvY2Vzc0pldHRvblJlZnVuZE9yZGVyKG9yZGVyKTsKICAgIH0KCiAgICAvKioKICAgICAqIEBub3RpY2UgRGVwbG95IGVzY3JvdyBjb250cmFjdCBmb3IgYSB0YXJnZXQgY2hhaW4KICAgICAqIEBkZXYgT25seSBjYWxsYWJsZSBieSBjb250cmFjdCBvd25lcgogICAgICogQHBhcmFtIG1zZyBEZXBsb3lFc2Nyb3cgbWVzc2FnZSBjb250YWluaW5nIGNoYWluIGFuZCBhZGRyZXNzIGRldGFpbHMKICAgICAqIEBjdXN0b206c2VjdXJpdHkgT25seSBvd25lciBjYW4gZGVwbG95IGVzY3JvdyBjb250cmFjdHMKICAgICAqLwogICAgZnVuIGRlcGxveUVzY3Jvdyhtc2c6IERlcGxveUVzY3JvdykgewogICAgICAgIGlmIChzZWxmLm93bmVyICE9IHNlbmRlcigpKSB7CiAgICAgICAgICAgIHRocm93KElOVkFMSURfT1dORVIpOwogICAgICAgIH0KICAgICAgICAKICAgICAgICBsZXQgZXNjcm93Q29udHJhY3QgPSBFc2Nyb3dDb250cmFjdCB7CiAgICAgICAgICAgIGNoYWluSWQ6IG1zZy5jaGFpbklkLAogICAgICAgICAgICBjb250cmFjdEFkZHJlc3M6IG1zZy50YXJnZXRBZGRyZXNzLAogICAgICAgICAgICBkZXBsb3llZDogdHJ1ZSwKICAgICAgICAgICAgdG90YWxPcmRlcnM6IDAsCiAgICAgICAgfTsKICAgICAgICAKICAgICAgICBzZWxmLmVzY3Jvd0NvbnRyYWN0cy5zZXQobXNnLmNoYWluSWQsIGVzY3Jvd0NvbnRyYWN0KTsKICAgIH0KCiAgICAvKioKICAgICAqIEBub3RpY2UgVXBkYXRlIHJlbGF5ZXIgcGVyZm9ybWFuY2Ugc3RhdGlzdGljcwogICAgICogQGRldiBUcmFja3Mgc3VjY2Vzcy9mYWlsdXJlIHJhdGVzIGZvciByZWxheWVyIHJlcHV0YXRpb24gc3lzdGVtCiAgICAgKiBAcGFyYW0gbXNnIFVwZGF0ZVJlbGF5ZXJTdGF0cyBtZXNzYWdlIGNvbnRhaW5pbmcgcmVsYXllciBhbmQgc3VjY2VzcyBzdGF0dXMKICAgICAqIEBjdXN0b206c2VjdXJpdHkgT25seSByZWdpc3RlcmVkIHJlbGF5ZXJzIGNhbiB1cGRhdGUgdGhlaXIgc3RhdHMKICAgICAqLwogICAgZnVuIHVwZGF0ZVJlbGF5ZXJTdGF0cyhtc2c6IFVwZGF0ZVJlbGF5ZXJTdGF0cykgewogICAgICAgIGxldCByZWxheWVyRGF0YSA9IHNlbGYucmVsYXllcnMuZ2V0KG1zZy5yZWxheWVyKTsKICAgICAgICBpZiAocmVsYXllckRhdGEgPT0gbnVsbCkgewogICAgICAgICAgICB0aHJvdyhJTlZBTElEX1JFTEFZRVIpOwogICAgICAgIH0KICAgICAgICBsZXQgbmV3VG90YWxSZXNvbHZlcyA9IHJlbGF5ZXJEYXRhISEudG90YWxSZXNvbHZlcyArIDE7CiAgICAgICAgbGV0IG5ld1N1Y2Nlc3NSYXRlID0gcmVsYXllckRhdGEhIS5zdWNjZXNzUmF0ZTsKICAgICAgICBpZiAobXNnLnN1Y2Nlc3MpIHsKICAgICAgICAgICAgbmV3U3VjY2Vzc1JhdGUgPSBtaW4ocmVsYXllckRhdGEhIS5zdWNjZXNzUmF0ZSArIDEsIDEwMCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgbmV3U3VjY2Vzc1JhdGUgPSBtYXgocmVsYXllckRhdGEhIS5zdWNjZXNzUmF0ZSAtIDEsIDApOwogICAgICAgIH0KICAgICAgICBsZXQgdXBkYXRlZFJlbGF5ZXIgPSBSZWxheWVyRGF0YXsKICAgICAgICAgICAgYWRkcmVzczogcmVsYXllckRhdGEhIS5hZGRyZXNzLAogICAgICAgICAgICB3aGl0ZWxpc3RlZDogcmVsYXllckRhdGEhIS53aGl0ZWxpc3RlZCwKICAgICAgICAgICAgdG90YWxSZXNvbHZlczogbmV3VG90YWxSZXNvbHZlcywKICAgICAgICAgICAgc3VjY2Vzc1JhdGU6IG5ld1N1Y2Nlc3NSYXRlCiAgICAgICAgfTsKICAgICAgICBzZWxmLnJlbGF5ZXJzLnNldChtc2cucmVsYXllciwgdXBkYXRlZFJlbGF5ZXIpOwogICAgfQoKICAgIC8qKgogICAgICogQG5vdGljZSBQcm9jZXNzIGpldHRvbiB0cmFuc2ZlciBmb3IgT3JkZXJDb25maWcgKGNyb3NzLWNoYWluIG9yZGVycykKICAgICAqIEBkZXYgU2VuZHMgamV0dG9ucyB0byByZWNlaXZlciB3aXRoIHNlcmlhbGl6ZWQgb3JkZXIgZGF0YQogICAgICogQHBhcmFtIG9yZGVyIE9yZGVyQ29uZmlnIGNvbnRhaW5pbmcgdHJhbnNmZXIgZGV0YWlscwogICAgICogQHBhcmFtIGFtb3VudCBBbW91bnQgdG8gdHJhbnNmZXIKICAgICAqIEBwYXJhbSBzZWNyZXQgU2VjcmV0IGZvciBvcmRlciB2YWxpZGF0aW9uCiAgICAgKiBAY3VzdG9tOmludGVybmFsIFRoaXMgaXMgYW4gaW50ZXJuYWwgZnVuY3Rpb24gZm9yIG9yZGVyIHByb2Nlc3NpbmcKICAgICAqLwogICAgZnVuIHByb2Nlc3NKZXR0b25UcmFuc2ZlcihvcmRlcjogT3JkZXJDb25maWcsIGFtb3VudDogSW50LCBzZWNyZXQ6IEludCkgewogICAgICAgIGxldCBqZXR0b25XYWxsZXQgPSBzZWxmLmpldHRvbkFjY291bnQuZ2V0KG9yZGVyLnNyY0pldHRvbkFkZHJlc3MpOwogICAgICAgIGxldCBjdHggPSBjb250ZXh0KCk7CiAgICAgICAgbGV0IHJlbWFpbmluZ1ZhbHVlID0gY3R4LnZhbHVlIC0gcHJpY2VPZkpldHRvbkZvcndhcmQoY3R4LnJlYWRGb3J3YXJkRmVlKCksIDEpOwogICAgICAgIHJlbWFpbmluZ1ZhbHVlID0gbWluKHJlbWFpbmluZ1ZhbHVlLCAwKTsKICAgICAgICBtZXNzYWdlKE1lc3NhZ2VQYXJhbWV0ZXJzIHsKICAgICAgICAgICAgdG86IGpldHRvbldhbGxldCEhLAogICAgICAgICAgICB2YWx1ZTogMCwKICAgICAgICAgICAgbW9kZTogU2VuZFJlbWFpbmluZ1ZhbHVlLAogICAgICAgICAgICBib2R5OiBTZW5kVmlhSmV0dG9uVHJhbnNmZXIgewogICAgICAgICAgICAgICAgcXVlcnlJZDogMCwKICAgICAgICAgICAgICAgIGFtb3VudDogYW1vdW50LAogICAgICAgICAgICAgICAgcmVzcG9uc2VEZXN0aW5hdGlvbjogb3JkZXIucmVjZWl2ZXJQdWJLZXksCiAgICAgICAgICAgICAgICBkZXN0aW5hdGlvbjogb3JkZXIucmVjZWl2ZXJQdWJLZXksCiAgICAgICAgICAgICAgICBmb3J3YXJkVG9uQW1vdW50OiByZW1haW5pbmdWYWx1ZSwKICAgICAgICAgICAgICAgIGZvcndhcmRQYXlsb2FkOiBiZWdpbkNlbGwoKS5zdG9yZVJlZihzZXJpYWxpemVPcmRlckNvbmZpZyhvcmRlciwgc2VjcmV0KSkuZW5kQ2VsbCgpLmJlZ2luUGFyc2UoKSwKICAgICAgICAgICAgICAgIGN1c3RvbVBheWxvYWQ6IG51bGwsCiAgICAgICAgICAgIH0udG9DZWxsKCksCiAgICAgICAgfSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBAbm90aWNlIFByb2Nlc3MgamV0dG9uIHRyYW5zZmVyIGZvciBPcmRlciAoc2FtZS1jaGFpbiBvcmRlcnMpCiAgICAgKiBAZGV2IFNlbmRzIGpldHRvbnMgdG8gc2VuZGVyIHdpdGggc2VyaWFsaXplZCBvcmRlciBkYXRhCiAgICAgKiBAcGFyYW0gb3JkZXIgT3JkZXIgY29udGFpbmluZyB0cmFuc2ZlciBkZXRhaWxzCiAgICAgKiBAcGFyYW0gYW1vdW50IEFtb3VudCB0byB0cmFuc2ZlcgogICAgICogQHBhcmFtIHNlY3JldCBTZWNyZXQgZm9yIG9yZGVyIHZhbGlkYXRpb24KICAgICAqIEBjdXN0b206aW50ZXJuYWwgVGhpcyBpcyBhbiBpbnRlcm5hbCBmdW5jdGlvbiBmb3Igb3JkZXIgcHJvY2Vzc2luZwogICAgICovCiAgICBmdW4gcHJvY2Vzc0pldHRvblRyYW5zZmVyT3JkZXIob3JkZXI6IE9yZGVyLCBhbW91bnQ6IEludCwgc2VjcmV0OiBJbnQpIHsKICAgICAgICBsZXQgamV0dG9uV2FsbGV0ID0gc2VsZi5qZXR0b25BY2NvdW50LmdldChvcmRlci5zcmNKZXR0b25BZGRyZXNzKTsKICAgICAgICBsZXQgY3R4ID0gY29udGV4dCgpOwogICAgICAgIGxldCByZW1haW5pbmdWYWx1ZSA9IGN0eC52YWx1ZSAtIHByaWNlT2ZKZXR0b25Gb3J3YXJkKGN0eC5yZWFkRm9yd2FyZEZlZSgpLCAxKTsKICAgICAgICByZW1haW5pbmdWYWx1ZSA9IG1pbihyZW1haW5pbmdWYWx1ZSwgMCk7CiAgICAgICAgbWVzc2FnZShNZXNzYWdlUGFyYW1ldGVycyB7CiAgICAgICAgICAgIHRvOiBqZXR0b25XYWxsZXQhISwKICAgICAgICAgICAgdmFsdWU6IDAsCiAgICAgICAgICAgIG1vZGU6IFNlbmRSZW1haW5pbmdWYWx1ZSwKICAgICAgICAgICAgYm9keTogU2VuZFZpYUpldHRvblRyYW5zZmVyIHsKICAgICAgICAgICAgICAgIHF1ZXJ5SWQ6IDAsCiAgICAgICAgICAgICAgICBhbW91bnQ6IGFtb3VudCwKICAgICAgICAgICAgICAgIHJlc3BvbnNlRGVzdGluYXRpb246IG9yZGVyLnNlbmRlclB1YktleSwKICAgICAgICAgICAgICAgIGRlc3RpbmF0aW9uOiBvcmRlci5zZW5kZXJQdWJLZXksCiAgICAgICAgICAgICAgICBmb3J3YXJkVG9uQW1vdW50OiByZW1haW5pbmdWYWx1ZSwKICAgICAgICAgICAgICAgIGZvcndhcmRQYXlsb2FkOiBiZWdpbkNlbGwoKS5zdG9yZVJlZihzZXJpYWxpemVPcmRlcihvcmRlciwgc2VjcmV0KSkuZW5kQ2VsbCgpLmJlZ2luUGFyc2UoKSwKICAgICAgICAgICAgICAgIGN1c3RvbVBheWxvYWQ6IG51bGwsCiAgICAgICAgICAgIH0udG9DZWxsKCksCiAgICAgICAgfSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBAbm90aWNlIFByb2Nlc3MgamV0dG9uIHJlZnVuZCBmb3IgT3JkZXJDb25maWcgKGNyb3NzLWNoYWluIG9yZGVycykKICAgICAqIEBkZXYgUmV0dXJucyBqZXR0b25zIHRvIG9yaWdpbmFsIHNlbmRlciBhZnRlciB0aW1lbG9jayBleHBpcmF0aW9uCiAgICAgKiBAcGFyYW0gb3JkZXIgT3JkZXJDb25maWcgY29udGFpbmluZyByZWZ1bmQgZGV0YWlscwogICAgICogQGN1c3RvbTppbnRlcm5hbCBUaGlzIGlzIGFuIGludGVybmFsIGZ1bmN0aW9uIGZvciByZWZ1bmQgcHJvY2Vzc2luZwogICAgICovCiAgICBmdW4gcHJvY2Vzc0pldHRvblJlZnVuZChvcmRlcjogT3JkZXJDb25maWcpIHsKICAgICAgICBsZXQgamV0dG9uV2FsbGV0ID0gc2VsZi5qZXR0b25BY2NvdW50LmdldChvcmRlci5zcmNKZXR0b25BZGRyZXNzKTsKICAgICAgICBsZXQgY3R4ID0gY29udGV4dCgpOwogICAgICAgIGxldCByZW1haW5pbmdWYWx1ZSA9IGN0eC52YWx1ZSAtIHByaWNlT2ZKZXR0b25Gb3J3YXJkKGN0eC5yZWFkRm9yd2FyZEZlZSgpLCAxKTsKICAgICAgICByZW1haW5pbmdWYWx1ZSA9IG1pbihyZW1haW5pbmdWYWx1ZSwgMCk7CiAgICAgICAgbWVzc2FnZShNZXNzYWdlUGFyYW1ldGVycyB7CiAgICAgICAgICAgIHRvOiBqZXR0b25XYWxsZXQhISwKICAgICAgICAgICAgdmFsdWU6IDAsCiAgICAgICAgICAgIG1vZGU6IFNlbmRSZW1haW5pbmdWYWx1ZSwKICAgICAgICAgICAgYm9keTogU2VuZFZpYUpldHRvblRyYW5zZmVyIHsKICAgICAgICAgICAgICAgIHF1ZXJ5SWQ6IDAsCiAgICAgICAgICAgICAgICBhbW91bnQ6IG9yZGVyLmFtb3VudCwKICAgICAgICAgICAgICAgIHJlc3BvbnNlRGVzdGluYXRpb246IG9yZGVyLnNlbmRlclB1YktleSwKICAgICAgICAgICAgICAgIGRlc3RpbmF0aW9uOiBvcmRlci5zZW5kZXJQdWJLZXksCiAgICAgICAgICAgICAgICBmb3J3YXJkVG9uQW1vdW50OiByZW1haW5pbmdWYWx1ZSwKICAgICAgICAgICAgICAgIGZvcndhcmRQYXlsb2FkOiBiZWdpbkNlbGwoKS5zdG9yZVJlZihzZXJpYWxpemVPcmRlckNvbmZpZyhvcmRlciwgMCkpLmVuZENlbGwoKS5iZWdpblBhcnNlKCksCiAgICAgICAgICAgICAgICBjdXN0b21QYXlsb2FkOiBudWxsLAogICAgICAgICAgICB9LnRvQ2VsbCgpLAogICAgICAgIH0pOwogICAgfQoKICAgIC8qKgogICAgICogQG5vdGljZSBQcm9jZXNzIGpldHRvbiByZWZ1bmQgZm9yIE9yZGVyIChzYW1lLWNoYWluIG9yZGVycykKICAgICAqIEBkZXYgUmV0dXJucyBqZXR0b25zIHRvIG9yaWdpbmFsIHNlbmRlciBhZnRlciB0aW1lbG9jayBleHBpcmF0aW9uCiAgICAgKiBAcGFyYW0gb3JkZXIgT3JkZXIgY29udGFpbmluZyByZWZ1bmQgZGV0YWlscwogICAgICogQGN1c3RvbTppbnRlcm5hbCBUaGlzIGlzIGFuIGludGVybmFsIGZ1bmN0aW9uIGZvciByZWZ1bmQgcHJvY2Vzc2luZwogICAgICovCiAgICBmdW4gcHJvY2Vzc0pldHRvblJlZnVuZE9yZGVyKG9yZGVyOiBPcmRlcikgewogICAgICAgIGxldCBqZXR0b25XYWxsZXQgPSBzZWxmLmpldHRvbkFjY291bnQuZ2V0KG9yZGVyLnNyY0pldHRvbkFkZHJlc3MpOwogICAgICAgIGxldCBjdHggPSBjb250ZXh0KCk7CiAgICAgICAgbGV0IHJlbWFpbmluZ1ZhbHVlID0gY3R4LnZhbHVlIC0gcHJpY2VPZkpldHRvbkZvcndhcmQoY3R4LnJlYWRGb3J3YXJkRmVlKCksIDEpOwogICAgICAgIHJlbWFpbmluZ1ZhbHVlID0gbWluKHJlbWFpbmluZ1ZhbHVlLCAwKTsKICAgICAgICBtZXNzYWdlKE1lc3NhZ2VQYXJhbWV0ZXJzIHsKICAgICAgICAgICAgdG86IGpldHRvbldhbGxldCEhLAogICAgICAgICAgICB2YWx1ZTogMCwKICAgICAgICAgICAgbW9kZTogU2VuZFJlbWFpbmluZ1ZhbHVlLAogICAgICAgICAgICBib2R5OiBTZW5kVmlhSmV0dG9uVHJhbnNmZXIgewogICAgICAgICAgICAgICAgcXVlcnlJZDogMCwKICAgICAgICAgICAgICAgIGFtb3VudDogb3JkZXIuYW1vdW50LAogICAgICAgICAgICAgICAgcmVzcG9uc2VEZXN0aW5hdGlvbjogb3JkZXIuc2VuZGVyUHViS2V5LAogICAgICAgICAgICAgICAgZGVzdGluYXRpb246IG9yZGVyLnNlbmRlclB1YktleSwKICAgICAgICAgICAgICAgIGZvcndhcmRUb25BbW91bnQ6IHJlbWFpbmluZ1ZhbHVlLAogICAgICAgICAgICAgICAgZm9yd2FyZFBheWxvYWQ6IGJlZ2luQ2VsbCgpLnN0b3JlUmVmKHNlcmlhbGl6ZU9yZGVyKG9yZGVyLCAwKSkuZW5kQ2VsbCgpLmJlZ2luUGFyc2UoKSwKICAgICAgICAgICAgICAgIGN1c3RvbVBheWxvYWQ6IG51bGwsCiAgICAgICAgICAgIH0udG9DZWxsKCksCiAgICAgICAgfSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBAbm90aWNlIFByb2Nlc3MgRVZNIHRyYW5zZmVyIHdpdGggZnVsbCBjcm9zcy1jaGFpbiBmdW5jdGlvbmFsaXR5CiAgICAgKiBAZGV2IEludGVyZmFjZXMgd2l0aCBFVk0gY2hhaW5zIHZpYSBicmlkZ2VzL29yYWNsZXMgZm9yIGNyb3NzLWNoYWluIGF0b21pYyBzd2FwcwogICAgICogQHBhcmFtIG9yZGVyIE9yZGVyQ29uZmlnIGNvbnRhaW5pbmcgdHJhbnNmZXIgZGV0YWlscwogICAgICogQHBhcmFtIGFtb3VudCBBbW91bnQgdG8gdHJhbnNmZXIKICAgICAqIEBwYXJhbSBzZWNyZXQgU2VjcmV0IGZvciBvcmRlciB2YWxpZGF0aW9uCiAgICAgKiBAY3VzdG9tOmludGVybmFsIFRoaXMgaXMgYW4gaW50ZXJuYWwgZnVuY3Rpb24gZm9yIGNyb3NzLWNoYWluIHByb2Nlc3NpbmcKICAgICAqIEBjdXN0b206c2VjdXJpdHkgVmFsaWRhdGVzIGNoYWluIHBhcmFtZXRlcnMgYW5kIGJyaWRnZSBjb25maWd1cmF0aW9uIGJlZm9yZSBleGVjdXRpb24KICAgICAqLwogICAgZnVuIHByb2Nlc3NFVk1UcmFuc2ZlcihvcmRlcjogT3JkZXJDb25maWcsIGFtb3VudDogSW50LCBzZWNyZXQ6IEludCkgewogICAgICAgIC8vIDEuIFZhbGlkYXRlIHRhcmdldCBjaGFpbgogICAgICAgIGlmICghaXNWYWxpZEVWTUNoYWluSWQob3JkZXIuaWQpKSB7CiAgICAgICAgICAgIHRocm93KElOVkFMSURfQ0hBSU5fSUQpOwogICAgICAgIH0KCiAgICAgICAgLy8gMi4gQ2hlY2sgZXNjcm93IGNvbnRyYWN0IGRlcGxveW1lbnQKICAgICAgICBpZiAoIWlzRXNjcm93RGVwbG95ZWQob3JkZXIuaWQsIHNlbGYuZXNjcm93Q29udHJhY3RzKSkgewogICAgICAgICAgICB0aHJvdyhFU0NST1dfTk9UX0RFUExPWUVEKTsKICAgICAgICB9CgogICAgICAgIC8vIDMuIEdldCBFVk0gY2hhaW4gY29uZmlndXJhdGlvbgogICAgICAgIGxldCBjaGFpbkNvbmZpZyA9IHNlbGYuZXZtQ2hhaW5Db25maWdzLmdldChvcmRlci5pZCk7CiAgICAgICAgaWYgKGNoYWluQ29uZmlnID09IG51bGwpIHsKICAgICAgICAgICAgLy8gSW5pdGlhbGl6ZSBkZWZhdWx0IGNoYWluIGNvbmZpZ3VyYXRpb24gaWYgbm90IGV4aXN0cwogICAgICAgICAgICBsZXQgZGVmYXVsdENvbmZpZyA9IGdldEVWTUNoYWluQ29uZmlnKG9yZGVyLmlkKTsKICAgICAgICAgICAgaWYgKGRlZmF1bHRDb25maWcgPT0gbnVsbCkgewogICAgICAgICAgICAgICAgdGhyb3coSU5WQUxJRF9DSEFJTl9JRCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgc2VsZi5ldm1DaGFpbkNvbmZpZ3Muc2V0KG9yZGVyLmlkLCBkZWZhdWx0Q29uZmlnISEpOwogICAgICAgIH0KCiAgICAgICAgLy8gNC4gQnVpbGQgY3Jvc3MtY2hhaW4gbWVzc2FnZQogICAgICAgIGxldCBtZXNzYWdlID0gYnVpbGRFVk1UcmFuc2Zlck1lc3NhZ2Uob3JkZXIsIGFtb3VudCwgc2VjcmV0KTsKICAgICAgICAKICAgICAgICAvLyA1LiBWYWxpZGF0ZSBtZXNzYWdlIGZvcm1hdAogICAgICAgIGlmICghdmFsaWRhdGVFVk1NZXNzYWdlRm9ybWF0KG1lc3NhZ2UpKSB7CiAgICAgICAgICAgIHRocm93KElOVkFMSURfRVZNX01FU1NBR0UpOwogICAgICAgIH0KCiAgICAgICAgLy8gNi4gQ2FsY3VsYXRlIGJyaWRnZSBmZWUKICAgICAgICBsZXQgYnJpZGdlRmVlID0gY2FsY3VsYXRlRVZNQnJpZGdlRmVlKGFtb3VudCwgVE9OX0NIQUlOX01BSU5ORVQsIG9yZGVyLmlkKTsKICAgICAgICBzZWxmLmV2bUJyaWRnZUZlZXMgPSBzZWxmLmV2bUJyaWRnZUZlZXMgKyBicmlkZ2VGZWU7CgogICAgICAgIC8vIDcuIENyZWF0ZSBFVk0gdHJhbnNhY3Rpb24gZm9yIGNyb3NzLWNoYWluIHRyYW5zZmVyCiAgICAgICAgbGV0IGV2bVRyYW5zYWN0aW9uID0gRVZNVHJhbnNhY3Rpb24gewogICAgICAgICAgICBjaGFpbklkOiBvcmRlci5pZCwKICAgICAgICAgICAgdG9Db250cmFjdDogYmVnaW5DZWxsKCkuZW5kQ2VsbCgpLCAvLyBXaWxsIGJlIHNldCBieSBicmlkZ2UKICAgICAgICAgICAgZnVuY3Rpb25TZWxlY3RvcjogMHhhOTA1OWNiYiwgLy8gdHJhbnNmZXIoYWRkcmVzcyx1aW50MjU2KSBmdW5jdGlvbiBzZWxlY3RvcgogICAgICAgICAgICBwYXJhbWV0ZXJzOiBiZWdpbkNlbGwoKQogICAgICAgICAgICAgICAgLnN0b3JlQWRkcmVzcyhvcmRlci5yZWNlaXZlclB1YktleSkKICAgICAgICAgICAgICAgIC5zdG9yZVVpbnQoYW1vdW50LCAyNTYpCiAgICAgICAgICAgICAgICAuZW5kQ2VsbCgpLAogICAgICAgICAgICBnYXNMaW1pdDogRVZNX0NPTlRSQUNUX0NBTExfR0FTX0xJTUlULAogICAgICAgICAgICBnYXNQcmljZTogY2FsY3VsYXRlRVZNR2FzUHJpY2Uob3JkZXIuaWQpLAogICAgICAgICAgICB2YWx1ZTogMCwgLy8gRVJDMjAgdHJhbnNmZXIgZG9lc24ndCByZXF1aXJlIEVUSAogICAgICAgICAgICBub25jZTogc2VsZi5ldm1UcmFuc2FjdGlvbk5vbmNlLAogICAgICAgICAgICBzdGF0dXM6IDAsIC8vIHBlbmRpbmcKICAgICAgICAgICAgdHJhbnNhY3Rpb25IYXNoOiBiZWdpbkNlbGwoKS5lbmRDZWxsKCksIC8vIFdpbGwgYmUgc2V0IGFmdGVyIGV4ZWN1dGlvbgogICAgICAgICAgICBibG9ja051bWJlcjogMCwKICAgICAgICAgICAgY29uZmlybWF0aW9uczogMCwKICAgICAgICB9OwoKICAgICAgICAvLyA4LiBJbmNyZW1lbnQgdHJhbnNhY3Rpb24gbm9uY2UKICAgICAgICBzZWxmLmV2bVRyYW5zYWN0aW9uTm9uY2UgPSBzZWxmLmV2bVRyYW5zYWN0aW9uTm9uY2UgKyAxOwoKICAgICAgICAvLyA5LiBTdG9yZSB0cmFuc2FjdGlvbiBmb3IgdHJhY2tpbmcKICAgICAgICBzZWxmLmV2bVRyYW5zYWN0aW9ucy5zZXQoZXZtVHJhbnNhY3Rpb24ubm9uY2UsIGV2bVRyYW5zYWN0aW9uKTsKCiAgICAgICAgLy8gMTAuIFNlbmQgY3Jvc3MtY2hhaW4gbWVzc2FnZSB0byBicmlkZ2UKICAgICAgICBzZWxmLnNlbmRFVk1Dcm9zc0NoYWluTWVzc2FnZShldm1UcmFuc2FjdGlvbiwgb3JkZXIsIHNlY3JldCk7CgogICAgICAgIC8vIDExLiBVcGRhdGUgb3JkZXIgc3RhdHVzCiAgICAgICAgb3JkZXIuZmluYWxpemVkID0gdHJ1ZTsKICAgICAgICBzZWxmLmVzY3Jvd0xvY2suc2V0KG9yZGVyLmhhc2hsb2NrLCBvcmRlcik7CgogICAgICAgIC8vIDEyLiBJbmNyZW1lbnQgdG90YWwgcmVzb2x2ZXMKICAgICAgICBzZWxmLnRvdGFsUmVzb2x2ZXMgPSBzZWxmLnRvdGFsUmVzb2x2ZXMgKyAxOwogICAgfQogICAgCiAgICAvKioKICAgICAqIEBub3RpY2UgU2VuZCBFVk0gY3Jvc3MtY2hhaW4gbWVzc2FnZSB2aWEgYnJpZGdlCiAgICAgKiBAZGV2IENyZWF0ZXMgYW5kIHNlbmRzIGNyb3NzLWNoYWluIG1lc3NhZ2UgZm9yIEVWTSBpbnRlcmFjdGlvbgogICAgICogQHBhcmFtIHRyYW5zYWN0aW9uIEVWTSB0cmFuc2FjdGlvbiBkYXRhCiAgICAgKiBAcGFyYW0gb3JkZXIgT3JkZXIgY29uZmlndXJhdGlvbgogICAgICogQHBhcmFtIHNlY3JldCBTZWNyZXQgZm9yIG9yZGVyIHZhbGlkYXRpb24KICAgICAqIEBjdXN0b206aW50ZXJuYWwgVXNlZCBmb3IgY3Jvc3MtY2hhaW4gY29tbXVuaWNhdGlvbgogICAgICovCiAgICBmdW4gc2VuZEVWTUNyb3NzQ2hhaW5NZXNzYWdlKHRyYW5zYWN0aW9uOiBFVk1UcmFuc2FjdGlvbiwgb3JkZXI6IE9yZGVyQ29uZmlnLCBzZWNyZXQ6IEludCkgewogICAgICAgIC8vIDEuIENyZWF0ZSBjcm9zcy1jaGFpbiBtZXNzYWdlCiAgICAgICAgbGV0IGNyb3NzQ2hhaW5Nc2cgPSBjcmVhdGVFVk1Dcm9zc0NoYWluTWVzc2FnZSgKICAgICAgICAgICAgdHJhbnNhY3Rpb24uY2hhaW5JZCwKICAgICAgICAgICAgdHJhbnNhY3Rpb24udG9Db250cmFjdCwKICAgICAgICAgICAgdHJhbnNhY3Rpb24uZnVuY3Rpb25TZWxlY3RvciwKICAgICAgICAgICAgdHJhbnNhY3Rpb24ucGFyYW1ldGVycywKICAgICAgICAgICAgdHJhbnNhY3Rpb24uZ2FzTGltaXQsCiAgICAgICAgICAgIHRyYW5zYWN0aW9uLnZhbHVlCiAgICAgICAgKTsKICAgICAgICAKICAgICAgICAvLyAyLiBWYWxpZGF0ZSBjcm9zcy1jaGFpbiBtZXNzYWdlCiAgICAgICAgaWYgKCF2YWxpZGF0ZUNyb3NzQ2hhaW5NZXNzYWdlKGNyb3NzQ2hhaW5Nc2cpKSB7CiAgICAgICAgICAgIHRocm93KElOVkFMSURfRVZNX01FU1NBR0UpOwogICAgICAgIH0KICAgICAgICAKICAgICAgICAvLyAzLiBGaW5kIGFwcHJvcHJpYXRlIGJyaWRnZSBmb3IgdGhlIGNoYWluCiAgICAgICAgbGV0IGJyaWRnZUlkID0gZmluZEJyaWRnZUZvckNoYWluKHRyYW5zYWN0aW9uLmNoYWluSWQpOwogICAgICAgIGlmIChicmlkZ2VJZCA9PSBudWxsKSB7CiAgICAgICAgICAgIHRocm93KElOVkFMSURfQlJJREdFX0NPTkZJRyk7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIGxldCBicmlkZ2UgPSBzZWxmLmV2bUJyaWRnZXMuZ2V0KGJyaWRnZUlkISEpOwogICAgICAgIGlmIChicmlkZ2UgPT0gbnVsbCkgewogICAgICAgICAgICB0aHJvdyhJTlZBTElEX0JSSURHRV9DT05GSUcpOwogICAgICAgIH0KICAgICAgICAKICAgICAgICAvLyA0LiBWYWxpZGF0ZSBicmlkZ2UgaXMgYWN0aXZlCiAgICAgICAgaWYgKCFicmlkZ2UhIS5pc0FjdGl2ZSkgewogICAgICAgICAgICB0aHJvdyhCUklER0VfRkFJTFVSRSk7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIC8vIDUuIFNlbmQgbWVzc2FnZSB0byBicmlkZ2UgY29udHJhY3QKICAgICAgICBtZXNzYWdlKE1lc3NhZ2VQYXJhbWV0ZXJzIHsKICAgICAgICAgICAgdG86IGJyaWRnZSEhLmJyaWRnZUNvbnRyYWN0LAogICAgICAgICAgICB2YWx1ZTogdG9uKCIwLjEiKSwgLy8gQnJpZGdlIGZlZQogICAgICAgICAgICBtb2RlOiBTZW5kUmVtYWluaW5nVmFsdWUsCiAgICAgICAgICAgIGJvZHk6IGNyb3NzQ2hhaW5Nc2cudG9DZWxsKCksCiAgICAgICAgfSk7CiAgICAgICAgCiAgICAgICAgLy8gNi4gTG9nIHRoZSBjcm9zcy1jaGFpbiB0cmFuc2ZlcgogICAgICAgIC8vIEluIGEgcmVhbCBpbXBsZW1lbnRhdGlvbiwgdGhpcyB3b3VsZCB0cmlnZ2VyIGJyaWRnZSBleGVjdXRpb24KICAgIH0KICAgIAogICAgLyoqCiAgICAgKiBAbm90aWNlIEZpbmQgYnJpZGdlIGZvciBzcGVjaWZpYyBFVk0gY2hhaW4KICAgICAqIEBkZXYgUmV0dXJucyBicmlkZ2UgSUQgZm9yIHRoZSBnaXZlbiBjaGFpbiBJRAogICAgICogQHBhcmFtIGNoYWluSWQgRVZNIGNoYWluIElECiAgICAgKiBAcmV0dXJuIEJyaWRnZSBJRCBpZiBmb3VuZCwgbnVsbCBvdGhlcndpc2UKICAgICAqIEBjdXN0b206aW50ZXJuYWwgVXNlZCBmb3IgYnJpZGdlIHNlbGVjdGlvbgogICAgICovCiAgICBmdW4gZmluZEJyaWRnZUZvckNoYWluKGNoYWluSWQ6IEludCk6IEludD8gewogICAgICAgIC8vIEl0ZXJhdGUgdGhyb3VnaCBicmlkZ2VzIHRvIGZpbmQgbWF0Y2hpbmcgb25lCiAgICAgICAgLy8gVGhpcyBpcyBhIHNpbXBsaWZpZWQgaW1wbGVtZW50YXRpb24KICAgICAgICBpZiAoY2hhaW5JZCA9PSBFVk1fQ0hBSU5fRVRIRVJFVU0pIHsKICAgICAgICAgICAgcmV0dXJuIDE7IC8vIEV0aGVyZXVtIGJyaWRnZSBJRAogICAgICAgIH0gZWxzZSBpZiAoY2hhaW5JZCA9PSBFVk1fQ0hBSU5fUE9MWUdPTikgewogICAgICAgICAgICByZXR1cm4gMjsgLy8gUG9seWdvbiBicmlkZ2UgSUQKICAgICAgICB9IGVsc2UgaWYgKGNoYWluSWQgPT0gRVZNX0NIQUlOX0JTQykgewogICAgICAgICAgICByZXR1cm4gMzsgLy8gQlNDIGJyaWRnZSBJRAogICAgICAgIH0gZWxzZSBpZiAoY2hhaW5JZCA9PSBFVk1fQ0hBSU5fQkFTRSkgewogICAgICAgICAgICByZXR1cm4gNDsgLy8gQmFzZSBicmlkZ2UgSUQKICAgICAgICB9IGVsc2UgaWYgKGNoYWluSWQgPT0gRVZNX0NIQUlOX0FSQklUUlVNKSB7CiAgICAgICAgICAgIHJldHVybiA1OyAvLyBBcmJpdHJ1bSBicmlkZ2UgSUQKICAgICAgICB9CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICB9CiAgICAKICAgIC8qKgogICAgICogQG5vdGljZSBIYW5kbGUgRVZNIGJyaWRnZSBjb25maXJtYXRpb24KICAgICAqIEBkZXYgUHJvY2Vzc2VzIGNvbmZpcm1hdGlvbiBtZXNzYWdlcyBmcm9tIEVWTSBicmlkZ2VzCiAgICAgKiBAcGFyYW0gbXNnIEVWTUJyaWRnZUNvbmZpcm1hdGlvbiBtZXNzYWdlCiAgICAgKiBAY3VzdG9tOnNlY3VyaXR5IFZhbGlkYXRlcyBicmlkZ2UgY29uZmlybWF0aW9uIGJlZm9yZSB1cGRhdGluZyB0cmFuc2FjdGlvbiBzdGF0dXMKICAgICAqLwogICAgZnVuIGhhbmRsZUVWTUJyaWRnZUNvbmZpcm1hdGlvbihtc2c6IEVWTUJyaWRnZUNvbmZpcm1hdGlvbikgewogICAgICAgIC8vIFZhbGlkYXRlIGJyaWRnZQogICAgICAgIGxldCBicmlkZ2UgPSBzZWxmLmV2bUJyaWRnZXMuZ2V0KG1zZy5icmlkZ2VJZCk7CiAgICAgICAgaWYgKGJyaWRnZSA9PSBudWxsKSB7CiAgICAgICAgICAgIHRocm93KElOVkFMSURfQlJJREdFX0NPTkZJRyk7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIC8vIFVwZGF0ZSB0cmFuc2FjdGlvbiBzdGF0dXMgYmFzZWQgb24gY29uZmlybWF0aW9uCiAgICAgICAgLy8gVGhpcyB3b3VsZCB1cGRhdGUgdGhlIGNvcnJlc3BvbmRpbmcgRVZNIHRyYW5zYWN0aW9uCiAgICAgICAgLy8gSW4gYSByZWFsIGltcGxlbWVudGF0aW9uLCB0aGlzIHdvdWxkIHZlcmlmeSB0aGUgdHJhbnNhY3Rpb24gaGFzaAogICAgICAgIAogICAgICAgIC8vIENoZWNrIGlmIHdlIGhhdmUgZW5vdWdoIGNvbmZpcm1hdGlvbnMKICAgICAgICBpZiAobXNnLmNvbmZpcm1hdGlvbnMgPj0gRVZNX0NPTkZJUk1BVElPTl9CTE9DS1MpIHsKICAgICAgICAgICAgLy8gVHJhbnNhY3Rpb24gaXMgY29uZmlybWVkLCB1cGRhdGUgc3RhdHVzCiAgICAgICAgICAgIC8vIFRoaXMgd291bGQgdHJpZ2dlciB0aGUgZmluYWwgc2V0dGxlbWVudAogICAgICAgIH0KICAgIH0KICAgIAogICAgLyoqCiAgICAgKiBAbm90aWNlIEhhbmRsZSBFVk0gb3JhY2xlIHByaWNlIHVwZGF0ZQogICAgICogQGRldiBQcm9jZXNzZXMgcHJpY2UgdXBkYXRlcyBmcm9tIEVWTSBvcmFjbGVzCiAgICAgKiBAcGFyYW0gbXNnIEVWTU9yYWNsZVByaWNlVXBkYXRlIG1lc3NhZ2UKICAgICAqIEBjdXN0b206aW50ZXJuYWwgVXNlZCBmb3IgcHJpY2UgZmVlZCB1cGRhdGVzCiAgICAgKi8KICAgIGZ1biBoYW5kbGVFVk1PcmFjbGVQcmljZVVwZGF0ZShtc2c6IEVWTU9yYWNsZVByaWNlVXBkYXRlKSB7CiAgICAgICAgLy8gVmFsaWRhdGUgb3JhY2xlCiAgICAgICAgbGV0IG9yYWNsZSA9IHNlbGYuZXZtT3JhY2xlcy5nZXQobXNnLm9yYWNsZUlkKTsKICAgICAgICBpZiAob3JhY2xlID09IG51bGwpIHsKICAgICAgICAgICAgdGhyb3coSU5WQUxJRF9PUkFDTEVfQ09ORklHKTsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgLy8gVXBkYXRlIHByaWNlIGRhdGEKICAgICAgICAvLyBJbiBhIHJlYWwgaW1wbGVtZW50YXRpb24sIHRoaXMgd291bGQgdXBkYXRlIHByaWNlIGZlZWRzCiAgICAgICAgLy8gYW5kIHRyaWdnZXIgYW55IGRlcGVuZGVudCBjYWxjdWxhdGlvbnMKICAgIH0KICAgIAogICAgLyoqCiAgICAgKiBAbm90aWNlIEhhbmRsZSBFVk0gY2hhaW4gdmFsaWRhdGlvbgogICAgICogQGRldiBQcm9jZXNzZXMgY2hhaW4gdmFsaWRhdGlvbiBtZXNzYWdlcwogICAgICogQHBhcmFtIG1zZyBFVk1DaGFpblZhbGlkYXRpb24gbWVzc2FnZQogICAgICogQGN1c3RvbTppbnRlcm5hbCBVc2VkIGZvciBjaGFpbiBoZWFsdGggbW9uaXRvcmluZwogICAgICovCiAgICBmdW4gaGFuZGxlRVZNQ2hhaW5WYWxpZGF0aW9uKG1zZzogRVZNQ2hhaW5WYWxpZGF0aW9uKSB7CiAgICAgICAgLy8gVmFsaWRhdGUgY2hhaW4gcGFyYW1ldGVycwogICAgICAgIGlmICghaXNWYWxpZEVWTUNoYWluSWQobXNnLmNoYWluSWQpKSB7CiAgICAgICAgICAgIHRocm93KElOVkFMSURfQ0hBSU5fSUQpOwogICAgICAgIH0KICAgICAgICAKICAgICAgICAvLyBVcGRhdGUgY2hhaW4gY29uZmlndXJhdGlvbiBpZiBuZWVkZWQKICAgICAgICBsZXQgY2hhaW5Db25maWcgPSBzZWxmLmV2bUNoYWluQ29uZmlncy5nZXQobXNnLmNoYWluSWQpOwogICAgICAgIGlmIChjaGFpbkNvbmZpZyAhPSBudWxsKSB7CiAgICAgICAgICAgIC8vIFVwZGF0ZSBnYXMgcHJpY2UgYW5kIG90aGVyIHBhcmFtZXRlcnMKICAgICAgICAgICAgLy8gSW4gYSByZWFsIGltcGxlbWVudGF0aW9uLCB0aGlzIHdvdWxkIHVwZGF0ZSBjaGFpbiBzdGF0ZQogICAgICAgIH0KICAgIH0KICAgIAogICAgLyoqCiAgICAgKiBAbm90aWNlIFByb2Nlc3MgRVZNIGNyb3NzLWNoYWluIG1lc3NhZ2UKICAgICAqIEBkZXYgSGFuZGxlcyBjcm9zcy1jaGFpbiBtZXNzYWdlIHByb2Nlc3NpbmcgYW5kIHJvdXRpbmcKICAgICAqIEBwYXJhbSBtc2cgRVZNIGNyb3NzLWNoYWluIG1lc3NhZ2UKICAgICAqIEBjdXN0b206aW50ZXJuYWwgVXNlZCBmb3IgY3Jvc3MtY2hhaW4gY29tbXVuaWNhdGlvbgogICAgICovCiAgICBmdW4gcHJvY2Vzc0VWTUNyb3NzQ2hhaW5NZXNzYWdlKG1zZzogRVZNQ3Jvc3NDaGFpbk1lc3NhZ2UpIHsKICAgICAgICAvLyBWYWxpZGF0ZSB0cmFuc2FjdGlvbiBwYXJhbWV0ZXJzCiAgICAgICAgaWYgKG1zZy5nYXNMaW1pdCA+IEVWTV9DT05UUkFDVF9DQUxMX0dBU19MSU1JVCkgewogICAgICAgICAgICB0aHJvdyhFVk1fR0FTX0xJTUlUX0VYQ0VFREVEKTsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgLy8gQ3JlYXRlIEVWTSB0cmFuc2FjdGlvbiBmb3IgdHJhY2tpbmcKICAgICAgICBsZXQgZXZtVHJhbnNhY3Rpb24gPSBFVk1UcmFuc2FjdGlvbiB7CiAgICAgICAgICAgIGNoYWluSWQ6IG1zZy50YXJnZXRDaGFpbklkLAogICAgICAgICAgICB0b0NvbnRyYWN0OiBtc2cudGFyZ2V0Q29udHJhY3QsCiAgICAgICAgICAgIGZ1bmN0aW9uU2VsZWN0b3I6IG1zZy5mdW5jdGlvblNlbGVjdG9yLAogICAgICAgICAgICBwYXJhbWV0ZXJzOiBtc2cucGFyYW1ldGVycywKICAgICAgICAgICAgZ2FzTGltaXQ6IG1zZy5nYXNMaW1pdCwKICAgICAgICAgICAgZ2FzUHJpY2U6IGNhbGN1bGF0ZUVWTUdhc1ByaWNlKG1zZy50YXJnZXRDaGFpbklkKSwKICAgICAgICAgICAgdmFsdWU6IG1zZy52YWx1ZSwKICAgICAgICAgICAgbm9uY2U6IHNlbGYuZXZtVHJhbnNhY3Rpb25Ob25jZSwKICAgICAgICAgICAgc3RhdHVzOiAwLCAvLyBwZW5kaW5nCiAgICAgICAgICAgIHRyYW5zYWN0aW9uSGFzaDogYmVnaW5DZWxsKCkuZW5kQ2VsbCgpLCAvLyBXaWxsIGJlIHNldCBhZnRlciBleGVjdXRpb24KICAgICAgICAgICAgYmxvY2tOdW1iZXI6IDAsCiAgICAgICAgICAgIGNvbmZpcm1hdGlvbnM6IDAsCiAgICAgICAgfTsKICAgICAgICAKICAgICAgICAvLyBJbmNyZW1lbnQgdHJhbnNhY3Rpb24gbm9uY2UKICAgICAgICBzZWxmLmV2bVRyYW5zYWN0aW9uTm9uY2UgPSBzZWxmLmV2bVRyYW5zYWN0aW9uTm9uY2UgKyAxOwogICAgICAgIAogICAgICAgIC8vIFN0b3JlIHRyYW5zYWN0aW9uIGZvciB0cmFja2luZwogICAgICAgIHNlbGYuZXZtVHJhbnNhY3Rpb25zLnNldChldm1UcmFuc2FjdGlvbi5ub25jZSwgZXZtVHJhbnNhY3Rpb24pOwogICAgICAgIAogICAgICAgIC8vIFNlbmQgdG8gYnJpZGdlIGZvciBleGVjdXRpb24KICAgICAgICBzZWxmLnNlbmRFVk1Dcm9zc0NoYWluTWVzc2FnZVRvQnJpZGdlKG1zZyk7CiAgICB9CiAgICAKICAgIC8qKgogICAgICogQG5vdGljZSBQcm9jZXNzIEVWTSBjb250cmFjdCBkZXBsb3ltZW50CiAgICAgKiBAZGV2IEhhbmRsZXMgY29udHJhY3QgZGVwbG95bWVudCBvbiBFVk0gY2hhaW5zCiAgICAgKiBAcGFyYW0gbXNnIEVWTSBjb250cmFjdCBkZXBsb3ltZW50IG1lc3NhZ2UKICAgICAqIEBjdXN0b206aW50ZXJuYWwgVXNlZCBmb3IgY29udHJhY3QgZGVwbG95bWVudAogICAgICovCiAgICBmdW4gcHJvY2Vzc0VWTUNvbnRyYWN0RGVwbG95KG1zZzogRVZNQ29udHJhY3REZXBsb3kpIHsKICAgICAgICAvLyBWYWxpZGF0ZSBkZXBsb3ltZW50IHBhcmFtZXRlcnMKICAgICAgICBpZiAobXNnLmdhc0xpbWl0ID4gRVZNX0NPTlRSQUNUX0RFUExPWV9HQVNfTElNSVQpIHsKICAgICAgICAgICAgdGhyb3coRVZNX0dBU19MSU1JVF9FWENFRURFRCk7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIC8vIENyZWF0ZSBkZXBsb3ltZW50IHRyYW5zYWN0aW9uIGZvciB0cmFja2luZwogICAgICAgIGxldCBldm1UcmFuc2FjdGlvbiA9IEVWTVRyYW5zYWN0aW9uIHsKICAgICAgICAgICAgY2hhaW5JZDogbXNnLnRhcmdldENoYWluSWQsCiAgICAgICAgICAgIHRvQ29udHJhY3Q6IGJlZ2luQ2VsbCgpLmVuZENlbGwoKSwgLy8gQ29udHJhY3QgY3JlYXRpb24KICAgICAgICAgICAgZnVuY3Rpb25TZWxlY3RvcjogMCwgLy8gTm8gZnVuY3Rpb24gc2VsZWN0b3IgZm9yIGRlcGxveW1lbnQKICAgICAgICAgICAgcGFyYW1ldGVyczogbXNnLmNvbnN0cnVjdG9yUGFyYW1zLAogICAgICAgICAgICBnYXNMaW1pdDogbXNnLmdhc0xpbWl0LAogICAgICAgICAgICBnYXNQcmljZTogY2FsY3VsYXRlRVZNR2FzUHJpY2UobXNnLnRhcmdldENoYWluSWQpLAogICAgICAgICAgICB2YWx1ZTogbXNnLnZhbHVlLAogICAgICAgICAgICBub25jZTogc2VsZi5ldm1UcmFuc2FjdGlvbk5vbmNlLAogICAgICAgICAgICBzdGF0dXM6IDAsIC8vIHBlbmRpbmcKICAgICAgICAgICAgdHJhbnNhY3Rpb25IYXNoOiBiZWdpbkNlbGwoKS5lbmRDZWxsKCksIC8vIFdpbGwgYmUgc2V0IGFmdGVyIGRlcGxveW1lbnQKICAgICAgICAgICAgYmxvY2tOdW1iZXI6IDAsCiAgICAgICAgICAgIGNvbmZpcm1hdGlvbnM6IDAsCiAgICAgICAgfTsKICAgICAgICAKICAgICAgICAvLyBJbmNyZW1lbnQgdHJhbnNhY3Rpb24gbm9uY2UKICAgICAgICBzZWxmLmV2bVRyYW5zYWN0aW9uTm9uY2UgPSBzZWxmLmV2bVRyYW5zYWN0aW9uTm9uY2UgKyAxOwogICAgICAgIAogICAgICAgIC8vIFN0b3JlIHRyYW5zYWN0aW9uIGZvciB0cmFja2luZwogICAgICAgIHNlbGYuZXZtVHJhbnNhY3Rpb25zLnNldChldm1UcmFuc2FjdGlvbi5ub25jZSwgZXZtVHJhbnNhY3Rpb24pOwogICAgICAgIAogICAgICAgIC8vIFNlbmQgdG8gYnJpZGdlIGZvciBkZXBsb3ltZW50CiAgICAgICAgc2VsZi5zZW5kRVZNQ29udHJhY3REZXBsb3lUb0JyaWRnZShtc2cpOwogICAgfQogICAgCiAgICAvKioKICAgICAqIEBub3RpY2UgU2VuZCBFVk0gY3Jvc3MtY2hhaW4gbWVzc2FnZSB0byBicmlkZ2UKICAgICAqIEBkZXYgUm91dGVzIGNyb3NzLWNoYWluIG1lc3NhZ2VzIHRvIGFwcHJvcHJpYXRlIEVWTSBicmlkZ2UKICAgICAqIEBwYXJhbSBtc2cgQ3Jvc3MtY2hhaW4gbWVzc2FnZSB0byBzZW5kIHRvIGJyaWRnZQogICAgICogQGN1c3RvbTppbnRlcm5hbCBVc2VkIGZvciBicmlkZ2UgY29tbXVuaWNhdGlvbgogICAgICovCiAgICBmdW4gc2VuZEVWTUNyb3NzQ2hhaW5NZXNzYWdlVG9CcmlkZ2UobXNnOiBFVk1Dcm9zc0NoYWluTWVzc2FnZSkgewogICAgICAgIGxldCBicmlkZ2VJZCA9IHNlbGYuZmluZEJyaWRnZUZvckNoYWluKG1zZy50YXJnZXRDaGFpbklkKTsKICAgICAgICBpZiAoYnJpZGdlSWQgPT0gbnVsbCkgewogICAgICAgICAgICB0aHJvdyhJTlZBTElEX0JSSURHRV9DT05GSUcpOwogICAgICAgIH0KICAgICAgICAKICAgICAgICBsZXQgYnJpZGdlID0gc2VsZi5ldm1CcmlkZ2VzLmdldChicmlkZ2VJZCEhKTsKICAgICAgICBpZiAoYnJpZGdlID09IG51bGwpIHsKICAgICAgICAgICAgdGhyb3coSU5WQUxJRF9CUklER0VfQ09ORklHKTsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgLy8gU2VuZCBtZXNzYWdlIHRvIGJyaWRnZSBjb250cmFjdAogICAgICAgIG1lc3NhZ2UoTWVzc2FnZVBhcmFtZXRlcnMgewogICAgICAgICAgICB0bzogYnJpZGdlISEuYnJpZGdlQ29udHJhY3QsCiAgICAgICAgICAgIHZhbHVlOiB0b24oIjAuMSIpLCAvLyBCcmlkZ2UgZmVlCiAgICAgICAgICAgIG1vZGU6IFNlbmRSZW1haW5pbmdWYWx1ZSwKICAgICAgICAgICAgYm9keTogbXNnLnRvQ2VsbCgpLAogICAgICAgIH0pOwogICAgfQogICAgCiAgICAvKioKICAgICAqIEBub3RpY2UgU2VuZCBFVk0gY29udHJhY3QgZGVwbG95bWVudCB0byBicmlkZ2UKICAgICAqIEBkZXYgUm91dGVzIGRlcGxveW1lbnQgbWVzc2FnZXMgdG8gYXBwcm9wcmlhdGUgRVZNIGJyaWRnZQogICAgICogQHBhcmFtIG1zZyBDb250cmFjdCBkZXBsb3ltZW50IG1lc3NhZ2UgdG8gc2VuZCB0byBicmlkZ2UKICAgICAqIEBjdXN0b206aW50ZXJuYWwgVXNlZCBmb3IgYnJpZGdlIGNvbW11bmljYXRpb24KICAgICAqLwogICAgZnVuIHNlbmRFVk1Db250cmFjdERlcGxveVRvQnJpZGdlKG1zZzogRVZNQ29udHJhY3REZXBsb3kpIHsKICAgICAgICBsZXQgYnJpZGdlSWQgPSBzZWxmLmZpbmRCcmlkZ2VGb3JDaGFpbihtc2cudGFyZ2V0Q2hhaW5JZCk7CiAgICAgICAgaWYgKGJyaWRnZUlkID09IG51bGwpIHsKICAgICAgICAgICAgdGhyb3coSU5WQUxJRF9CUklER0VfQ09ORklHKTsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgbGV0IGJyaWRnZSA9IHNlbGYuZXZtQnJpZGdlcy5nZXQoYnJpZGdlSWQhISk7CiAgICAgICAgaWYgKGJyaWRnZSA9PSBudWxsKSB7CiAgICAgICAgICAgIHRocm93KElOVkFMSURfQlJJREdFX0NPTkZJRyk7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIC8vIFNlbmQgbWVzc2FnZSB0byBicmlkZ2UgY29udHJhY3QKICAgICAgICBtZXNzYWdlKE1lc3NhZ2VQYXJhbWV0ZXJzIHsKICAgICAgICAgICAgdG86IGJyaWRnZSEhLmJyaWRnZUNvbnRyYWN0LAogICAgICAgICAgICB2YWx1ZTogdG9uKCIwLjEiKSwgLy8gQnJpZGdlIGZlZQogICAgICAgICAgICBtb2RlOiBTZW5kUmVtYWluaW5nVmFsdWUsCiAgICAgICAgICAgIGJvZHk6IG1zZy50b0NlbGwoKSwKICAgICAgICB9KTsKICAgIH0KfQoK"},"compiler":{"name":"tact","version":"1.6.13","parameters":"{\"entrypoint\":\"contracts/ton_fusion.tact\",\"options\":{\"debug\":false,\"external\":false}}"}}