{"name":"TonFusion","code":"te6ccgECMwEAEfMAARD/ACDjA/LICwED+DAB0HLXIdIA0gD6QCEQNFBmbwT4YQL4Yu1E0NIAAY4j+kD0BNQB0PQE9AT0BNQw0PQE9AT0BNMf0z/THzAQmxCabBufMG1tbW1tbW1wUwD4QlWQ4gySXwzgcCvXSSDCH5UxC9MfDN4hghCphf34uuMCIYIQc2LQnrrjAiECAwQA0FsK+kDSADD4QlKwxwWz8tBWECWBAQtZcSFulVtZ9FkwmMgBzwBBM/RB4hCKEHkQaBBXEEZEVUMTyH8BygBVoFCrzhj0AAbI9AAV9AAT9AAByPQAEvQAEvQAE8sfE8s/E8sfEs3Nye1UAPBbCvpAMPhCUqDHBbPy0FZ/cFMCVSBDE4EBC1AkyFUwUDTOygDLH8sPyRA1EiBulTBZ9FkwlEEz9BPiEIoQeRBoEFcQRhA1UDTIfwHKAFWgUKvOGPQABsj0ABX0ABP0AAHI9AAS9AAS9AATyx8Tyz8Tyx8Szc3J7VQEyIIQc2LQnLqPSFsK0z8x+gAx+kDTH9QwIYIQ9RL337rjD8h/AcoAVaBQq84Y9AAGyPQAFfQAE/QAAcj0ABL0ABL0ABPLHxPLPxPLHxLNzcntVOAhghBQY1/SuuMCIYIQ5J4dy7oFBgcIA64xINDTHwGCEPUS99+68uCB2zwL1PQETd0N0VULGl8KMkMA2zz4QscFjpIQmxCKEHkQaBBXEEYQNUQw2zyOGDD4QsjPhQjOcM8LbsmAQvsA8sBWEIpVF+IoEQkDwCGCEHNi0Jy6j1QyIIIQizQYIrqOkzAQmxCKEHkQaBBXEEYQNUQw2zyOs4IQYiOZeLqOkhCbEIoQeRBoEFcQRhA1RDDbPI4VMPhCyM+FCM5wzwtuyYBC+wAQilUX4uLjDQsMDQGaWwrT/9P/9AQwEL0QrBCbEIoQeRBoEFcQRhA12zzIfwHKAFWgUKvOGPQABsj0ABX0ABP0AAHI9AAS9AAS9AATyx8Tyz8Tyx8Szc3J7VQVBNSOy1sK0//0BDAQrBCbEIoQeRBoEFcQRhA1ECTbPMh/AcoAVaBQq84Y9AAGyPQAFfQAE/QAAcj0ABL0ABL0ABPLHxPLPxPLHxLNzcntVOAhghBzYtCduuMCIYIQTvXLJrrjAiGCEIs0GCO6FxgZGgPm0NMfAYIQ9RL337ry4IHbPAvU9ARN3Q3RVQswMYEBC/hCVhJZcUEz9ApvoZQB1wAwkltt4n8hbpJbcJG64vLQV/gjJr7y0EtWFIMHKFn0D2+hkjBt3yBukjBtjofQ2zxsG28L4m6z8tBaERJwgQELUrIRFSgoCgHEIG6VMFn0WTCUQTP0E+KBAQv4QgIREwJSsCBulTBZ9FkwlsjOQTP0QeIQehBpEFgQSoMHyCtRbRBsUEUQPAIBERYBVaDbPMkQPRIgbpUwWfRbMJRBM/QX4gOkUCqgECkQZwEQA/bQ0x8BghCLNBgiuvLggds8C9QB0PpA9AQwEC0N0VULXwOBAQv4QlYRWXFBM/QKb6GUAdcAMJJbbeJ/IW6SW3CRuuLy0Ff4IyW+8tBLVhODBydZ9A9voZIwbd8gbpIwbY6H0Ns8bBtvC+Jus/LQWhBpEFgQRxA5cYMHyCsoKA4D9tDTHwGCEGIjmXi68uCB2zwL0x/0BE3dDdFVC18DgQEL+EJWEVlxQTP0Cm+hlAHXADCSW23ifyFukltwkbri8tBX+CMlvvLQS1YTgwcnWfQPb6GSMG3fIG6SMG2Oh9DbPGwbbwvibrPy0FoQaRBYEEcQOXCDB8grUW0QbCgoDwL+MSDQ0x8BghBzYtCcuvLggdQB0NMf+kD6QNP/0x/TP9IA9ATTP9MHVZAK1PQEMBCrEJoQiRB4EGcQVhBFEDQQIwzRVQoZXwkyQwDbPPhCxwWOkhCbEIoQeRBoEFcQRhA1RDDbPI4YMPhCyM+FCM5wzwtuyYBC+wDywFYQilUX4hESAUxRbRBsUEUQPAJVoNs8yRA9EiBulTBZ9FswlEEz9BfiA6RQKqBJABABRFBFEDwCVaDbPMkQPRIgbpUwWfRbMJRBM/QX4gOkUCqgSQAQAEBQq8sfGM4WzhTOAsjL/8sfEss/EsoAEvQAEss/EssHzQB6cFQTI8hVMFBD+gLOEs7MyXBZIPkAIvkAWtdlAddlggIBNMjLF8sPyw/L/8v/cfkEAMh0AcsCEsoHy//J0AHo0NMfAYIQc2LQnLry4IHUAdDTH/pA+kDT/9Mf0z/SAPQE0z/TB1WQCtT0BDAQqxCaEIkQeBBnEFYQRRA0ECMM0VUKMDGBAQv4QlYRWXFBM/QKb6GUAdcAMJJbbeJ/IW6SW3CRuuLy0Ff4Iya+8tBLVhKDBygTAfZZ9A9voZIwbd8gbpIwbY4b0NMf+kD6QNP/0x/TP9IA9ATTP9MHVZBsGm8K4m6z8tBaERFygQELUqIRFCBulTBZ9FkwlEEz9BPigQEL+EICERICUqAgbpUwWfRZMJbIzkEz9EHiEGkQWBBHgwfIK1FqEGxQRRA8AgERFQEUAGhVkFCayx8XzhXOE8v/yx/LP8oA9ADLP8sHyRwTIG6VMFn0WzCUQTP0F+IDpFApoBAoEGcBA6YwgwcsAln0D2+hkjBt3yBukjBtjofQ2zxsG28L4iBu8tBYIG7y0IBvKyvbPPgjJ7zy0EsE8tBbUTa98tBZEJoQiRB4EGcQVhBFfyRQVhA0ECPbPCgWKQAMyMv/yfkAAnAwgwcrAln0D2+hkjBt3yBukjBtjofQ2zxsG28L4iBu8tBYIG7y0IBvK/gjJrny0FAD8tBbfwPbPCgbAZZbCtP/9AQwEKwQmxCKEHkQaBBXEEYQNRAk2zzIfwHKAFWgUKvOGPQABsj0ABX0ABP0AAHI9AAS9AAS9AATyx8Tyz8Tyx8Szc3J7VQdAaJbCtP/0//TP/pA9AQwEN8QzhC9EKwQmxCKEHkQaBBX2zzIfwHKAFWgUKvOGPQABsj0ABX0ABP0AAHI9AAS9AAS9AATyx8Tyz8Tyx8Szc3J7VQgBNiOzVsK0//T//QEMBC9EKwQmxCKEHkQaBBXEEYQNds8yH8BygBVoFCrzhj0AAbI9AAV9AAT9AAByPQAEvQAEvQAE8sfE8s/E8sfEs3Nye1U4CGCEFlfB7y64wIhghBzYtCfuuMCIYIQlGqYtrokJSYnAdxWEYEBCytZ9ApvoZIwbd/4QW8kQzBSMPpA+gBx1yH6APoAMGxhcPg6cQGqAKCAKIF1MHD4OKCBdTBw+DaqAIIJMS0AoKChcLYIASBu8tCAcIBAUxEJERAJEI8uUYsQjxB+EG0FBBESBAMREQNB/xwA7jPIG8sfUAnPFlAHzxZQBc8WE8v/yx/LP8oAEss/EssHy//JyMzJ0BBGVBMFA0ZmbRA0WchVYIIQD4p+pVAIyx8Wyz9QBPoCEs4BIG6UMM+EgJIBzuL0AAH6As7JE0ADf8jPhYDKAM+EQM4B+gKAas9A9ADJAfsAAZgwgwcqAln0D2+hkjBt3yBukjBtjhvQ0x/6QPpA0//TH9M/0gD0BNM/0wdVkGwabwriIG7y0FggbvLQgG8q+CMmufLQUAPy0Ft/A9s8HgHSVhCBAQsqWfQKb6GSMG3f+EFvJEMwUjD6QPoAcdch+gD6ADBsYXD4OnEBqgCggCiBdTBw+DiggXUwcPg2qgCCCTEtAKCgoXC2CAEgbvLQgHCAQFMREI8tEI9RexB+EG0FEEsDEREDERACHwDmM8gayx9QCM8WUAbPFhTL/xLLH8s/ygASyz8SywfL/8nIzMnQJRBYA0YUUIhtEDRZyFVgghAPin6lUAjLHxbLP1AE+gISzgEgbpQwz4SAkgHO4vQAAfoCzslAA3/Iz4WAygDPhEDOAfoCgGrPQPQAyQH7AAO8MC2DByVZ9A9voZIwbd8gbpIwbY6H0Ns8bBtvC+IgbrPjAjCDB1RNFVn0D2+hkjBt3yBukjBtjhvQ0x/6QPpA0//TH9M/0gD0BNM/0wdVkGwabwriIG6z4wJfBPLAWCghIgHINAMgbvLQgG8rMGxENDTy0FshoTFSILxsEvLQZyCDByOAQEEz9A5voZQB1wEwkltt4mwhbrPy0GglgQELIln0C2+hkjBt3yBukjBtn9D6QNIA0x/TD1UwbBRvBOIgbrORW+MNpCMBxiBu8tCAbyowbEQ0AfLQW1ESoTJSIrxsEvLQZyCDByOAQEEz9A5voZQB1wEwkltt4mwhbrPy0GglgQELIln0C2+hkjBt3yBukjBtn9D6QNIA0x/TD1UwbBRvBOIgbrORW+MNpCMAqCAgbvLQgG8kXwMhIG7y0IBvJBAjXwMiIG7y0IBvJBNfA6QDIG7y0IBvJGwxQTBDE4EBC1AkyFUwUDTOygDLH8sPyRA3EiBulTBZ9FkwlEEz9BPiBATsMCuDByNZ9A9voZIwbd8gbpIwbY6H0Ns8bBtvC+IgbrOPRGwSIG7y0IBvKyKDBy2AQEEz9A5voZQB1wEwkltt4iBu8tBfIcAAkX+TIcAC4o6JIG7y0IBVC9s8jokgbvLQgFUL2zzi4DCDB1RLE1n0D2+hkjBt3ygpKisBmlsK0x/6QPQEMBC9EKwQmxCKEHkQaBBXEEYQNds8yH8BygBVoFCrzhj0AAbI9AAV9AAT9AAByPQAEvQAEvQAE8sfE8s/E8sfEs3Nye1ULwGaWwr6QNIA9AQwEL0QrBCbEIoQeRBoEFcQRhA12zzIfwHKAFWgUKvOGPQABsj0ABX0ABP0AAHI9AAS9AAS9AATyx8Tyz8Tyx8Szc3J7VQwAf6OdlsK0z8wyAGCEK/5D1dYyx/LP8kQmxCKEHkQaBBXEEYQNUQw+EJwcFADgEIBUDMEyM+FgMoAz4RAzgH6AoBqz0D0AMkB+wDIfwHKAFWgUKvOGPQABsj0ABX0ABP0AAHI9AAS9AAS9AATyx8Tyz8Tyx8Szc3J7VTgPMAAC8EhMgBE0x/6QPpA+kDUAdDT/9Mf0z/SAPQE0z/TBzAQexB6EHkQeAHmVhOBAQstWfQKb6GSMG3f+EFvJEMwUjD6QPoAcdch+gD6ADBsYXD4OnEBqgCggCiBdTBw+DiggXUwcPg2qgCCCTEtAKCgoXC2CAEgbvLQgHCAQCEKEREKCREQCRCPLggQfhBtEFwEERIEAxERAwIREAJQDSwABF8NAa4gbpIwbY4b0NMf+kD6QNP/0x/TP9IA9ATTP9MHVZBsGm8K4iBus46qIG7y0IBvKiKDByyAQEEz9A5voZQB1wEwkltt4iBu8tBfIG7y0IBVCts84FvywFgtAOQzyBvLH1AJzxZQB88WUAXPFhPL/8sfyz/KABLLPxLLB8v/ycjMydAkEDVZbRA0WchVYIIQD4p+pVAIyx8Wyz9QBPoCEs4BIG6UMM+EgJIBzuL0AAH6As7JQAN/yM+FgMoAz4RAzgH6AoBqz0D0AMkB+wAB2lYSgQELLFn0Cm+hkjBt3/hBbyRDMFIw+kD6AHHXIfoA+gAwbGFw+DpxAaoAoIAogXUwcPg4oIF1MHD4NqoAggkxLQCgoKFwtggBIG7y0IBwgEAhCREQCRCPLggQfhBtEFwQSwMREQMCERACUA0uAOQzyBrLH1AIzxZQBs8WFMv/Essfyz/KABLLPxLLB8v/ycjMydAlEEVGM20QNFnIVWCCEA+KfqVQCMsfFss/UAT6AhLOASBulDDPhICSAc7i9AAB+gLOyUMwQAN/yM+FgMoAz4RAzgH6AoBqz0D0AMkB+wAAaDD4QlLQxwWz8tBWUhB/cEMTgCBQJMhVMFA0yx/OygDLH8kQNhIgbpUwWfRbMJRBM/QX4gMB7jAmgQELI1n0C2+hkjBt3yBukjBtn9D6QNIA0x/TD1UwbBRvBOIgbvLQYCAgbvLQgG8kE18DpAKfICBu8tCAbyRsMaSAZLYIniAgbvLQgG8kbDGlcLYJ4iEgbvLQgG8kXwMCIG7y0IBvJBAjXwNAM0MTgQELUCTIMQA8VTBQNM7KAMsfyw/JEDcSIG6VMFn0WTCUQTP0E+IEAJwbsI5E+ELIz4UIznDPC27JgEL7ABCKVRfIfwHKAFWgUKvOGPQABsj0ABX0ABP0AAHI9AAS9AAS9AATyx8Tyz8Tyx8Szc3J7VTgXwvywII=","abi":"{\"name\":\"TonFusion\",\"types\":[{\"name\":\"DataSize\",\"header\":null,\"fields\":[{\"name\":\"cells\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"bits\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"refs\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}}]},{\"name\":\"SignedBundle\",\"header\":null,\"fields\":[{\"name\":\"signature\",\"type\":{\"kind\":\"simple\",\"type\":\"fixed-bytes\",\"optional\":false,\"format\":64}},{\"name\":\"signedData\",\"type\":{\"kind\":\"simple\",\"type\":\"slice\",\"optional\":false,\"format\":\"remainder\"}}]},{\"name\":\"StateInit\",\"header\":null,\"fields\":[{\"name\":\"code\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":false}},{\"name\":\"data\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":false}}]},{\"name\":\"Context\",\"header\":null,\"fields\":[{\"name\":\"bounceable\",\"type\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"sender\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"value\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"raw\",\"type\":{\"kind\":\"simple\",\"type\":\"slice\",\"optional\":false}}]},{\"name\":\"SendParameters\",\"header\":null,\"fields\":[{\"name\":\"mode\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"body\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":true}},{\"name\":\"code\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":true}},{\"name\":\"data\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":true}},{\"name\":\"value\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"to\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"bounce\",\"type\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}}]},{\"name\":\"MessageParameters\",\"header\":null,\"fields\":[{\"name\":\"mode\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"body\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":true}},{\"name\":\"value\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"to\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"bounce\",\"type\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}}]},{\"name\":\"DeployParameters\",\"header\":null,\"fields\":[{\"name\":\"mode\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"body\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":true}},{\"name\":\"value\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"bounce\",\"type\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"init\",\"type\":{\"kind\":\"simple\",\"type\":\"StateInit\",\"optional\":false}}]},{\"name\":\"StdAddress\",\"header\":null,\"fields\":[{\"name\":\"workchain\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":8}},{\"name\":\"address\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":256}}]},{\"name\":\"VarAddress\",\"header\":null,\"fields\":[{\"name\":\"workchain\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":32}},{\"name\":\"address\",\"type\":{\"kind\":\"simple\",\"type\":\"slice\",\"optional\":false}}]},{\"name\":\"BasechainAddress\",\"header\":null,\"fields\":[{\"name\":\"hash\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":true,\"format\":257}}]},{\"name\":\"Deploy\",\"header\":2490013878,\"fields\":[{\"name\":\"queryId\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}}]},{\"name\":\"DeployOk\",\"header\":2952335191,\"fields\":[{\"name\":\"queryId\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}}]},{\"name\":\"FactoryDeploy\",\"header\":1829761339,\"fields\":[{\"name\":\"queryId\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}},{\"name\":\"cashback\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}}]},{\"name\":\"LockJetton\",\"header\":4111661023,\"fields\":[{\"name\":\"orderConfig\",\"type\":{\"kind\":\"simple\",\"type\":\"OrderConfig\",\"optional\":false}},{\"name\":\"jetton\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":false}},{\"name\":\"customPayload\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":true}}]},{\"name\":\"CreateOrder\",\"header\":1935855772,\"fields\":[{\"name\":\"orderConfig\",\"type\":{\"kind\":\"simple\",\"type\":\"Order\",\"optional\":false}},{\"name\":\"jetton\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":false}},{\"name\":\"customPayload\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":true}}]},{\"name\":\"CreateEVMToTONOrder\",\"header\":2335447074,\"fields\":[{\"name\":\"orderConfig\",\"type\":{\"kind\":\"simple\",\"type\":\"OrderConfig\",\"optional\":false}},{\"name\":\"evmContractAddress\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"customPayload\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":true}}]},{\"name\":\"CreateTONToEVMOrder\",\"header\":1646500216,\"fields\":[{\"name\":\"orderConfig\",\"type\":{\"kind\":\"simple\",\"type\":\"OrderConfig\",\"optional\":false}},{\"name\":\"targetChainId\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":32}},{\"name\":\"customPayload\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":true}}]},{\"name\":\"PartialFill\",\"header\":1324731174,\"fields\":[{\"name\":\"orderHash\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":256}},{\"name\":\"secret\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":256}},{\"name\":\"fillAmount\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}},{\"name\":\"resolver\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"customPayload\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":true}}]},{\"name\":\"CompletePartialFill\",\"header\":2335447075,\"fields\":[{\"name\":\"orderHash\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":256}},{\"name\":\"secret\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":256}},{\"name\":\"customPayload\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":true}}]},{\"name\":\"DeployEscrow\",\"header\":1499400124,\"fields\":[{\"name\":\"chainId\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":32}},{\"name\":\"targetAddress\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"customPayload\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":true}}]},{\"name\":\"EscrowDeployed\",\"header\":2078119902,\"fields\":[{\"name\":\"chainId\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":32}},{\"name\":\"contractAddress\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"success\",\"type\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"customPayload\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":true}}]},{\"name\":\"RegisterRelayer\",\"header\":1935855774,\"fields\":[{\"name\":\"relayer\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"customPayload\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":true}}]},{\"name\":\"UpdateRelayerStats\",\"header\":1935855775,\"fields\":[{\"name\":\"relayer\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"success\",\"type\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"customPayload\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":true}}]},{\"name\":\"GetFund\",\"header\":1348689874,\"fields\":[{\"name\":\"secret\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":256}},{\"name\":\"hash\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":256}},{\"name\":\"customPayload\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":true}}]},{\"name\":\"Refund\",\"header\":3835567563,\"fields\":[{\"name\":\"hash\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":256}},{\"name\":\"customPayload\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":true}}]},{\"name\":\"RefundOrder\",\"header\":1935855773,\"fields\":[{\"name\":\"hash\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":256}},{\"name\":\"customPayload\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":true}}]},{\"name\":\"SetWhiteList\",\"header\":2844130808,\"fields\":[{\"name\":\"resolver\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"whitelistStatus\",\"type\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}}]},{\"name\":\"JettonNotifyWithActionRequest\",\"header\":1935855772,\"fields\":[{\"name\":\"queryId\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}},{\"name\":\"amount\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":\"coins\"}},{\"name\":\"sender\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"actionOpcode\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":32}},{\"name\":\"actionPayload\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":false}}]},{\"name\":\"GetWalletAddress\",\"header\":801842850,\"fields\":[{\"name\":\"queryId\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"owner\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}}]},{\"name\":\"CalculateOutput\",\"header\":null,\"fields\":[{\"name\":\"protocolFeeAmount\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}},{\"name\":\"integratorFeeAmount\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}},{\"name\":\"outputAmount\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}}]},{\"name\":\"PointAndTimeDelta\",\"header\":null,\"fields\":[{\"name\":\"rateBump\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":16}},{\"name\":\"timeDelta\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":16}}]},{\"name\":\"OrderConfig\",\"header\":null,\"fields\":[{\"name\":\"id\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":32}},{\"name\":\"srcJettonAddress\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"senderPubKey\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"receiverPubKey\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"hashlock\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":256}},{\"name\":\"timelock\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":32}},{\"name\":\"amount\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}},{\"name\":\"finalized\",\"type\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"partialFills\",\"type\":{\"kind\":\"dict\",\"key\":\"uint\",\"keyFormat\":256,\"value\":\"uint\",\"valueFormat\":64}},{\"name\":\"totalFilled\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}},{\"name\":\"direction\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":8}}]},{\"name\":\"Order\",\"header\":null,\"fields\":[{\"name\":\"id\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":32}},{\"name\":\"srcJettonAddress\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"senderPubKey\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"hashlock\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":256}},{\"name\":\"timelock\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":32}},{\"name\":\"amount\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}},{\"name\":\"finalized\",\"type\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"partialFills\",\"type\":{\"kind\":\"dict\",\"key\":\"uint\",\"keyFormat\":256,\"value\":\"uint\",\"valueFormat\":64}},{\"name\":\"totalFilled\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}},{\"name\":\"direction\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":8}}]},{\"name\":\"EscrowContract\",\"header\":null,\"fields\":[{\"name\":\"chainId\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":32}},{\"name\":\"contractAddress\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"deployed\",\"type\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"totalOrders\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":32}}]},{\"name\":\"RelayerData\",\"header\":null,\"fields\":[{\"name\":\"address\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"whitelisted\",\"type\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"totalResolves\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":32}},{\"name\":\"successRate\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":16}}]},{\"name\":\"JettonWalletData\",\"header\":null,\"fields\":[{\"name\":\"balance\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":\"coins\"}},{\"name\":\"ownerAddress\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"jettonMasterAddress\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"jettonWalletCode\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":false}}]},{\"name\":\"SendViaJettonTransfer\",\"header\":260734629,\"fields\":[{\"name\":\"queryId\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}},{\"name\":\"amount\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":\"coins\"}},{\"name\":\"destination\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"responseDestination\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":true}},{\"name\":\"customPayload\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":true}},{\"name\":\"forwardTonAmount\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":\"coins\"}},{\"name\":\"forwardPayload\",\"type\":{\"kind\":\"simple\",\"type\":\"slice\",\"optional\":false,\"format\":\"remainder\"}}]},{\"name\":\"TonFusion$Data\",\"header\":null,\"fields\":[{\"name\":\"owner\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"escrowLock\",\"type\":{\"kind\":\"dict\",\"key\":\"uint\",\"keyFormat\":256,\"value\":\"OrderConfig\",\"valueFormat\":\"ref\"}},{\"name\":\"escrowOrder\",\"type\":{\"kind\":\"dict\",\"key\":\"uint\",\"keyFormat\":256,\"value\":\"Order\",\"valueFormat\":\"ref\"}},{\"name\":\"jettons\",\"type\":{\"kind\":\"dict\",\"key\":\"address\",\"value\":\"cell\",\"valueFormat\":\"ref\"}},{\"name\":\"jettonAccount\",\"type\":{\"kind\":\"dict\",\"key\":\"address\",\"value\":\"address\"}},{\"name\":\"whiteLists\",\"type\":{\"kind\":\"dict\",\"key\":\"address\",\"value\":\"bool\"}},{\"name\":\"relayers\",\"type\":{\"kind\":\"dict\",\"key\":\"address\",\"value\":\"RelayerData\",\"valueFormat\":\"ref\"}},{\"name\":\"escrowContracts\",\"type\":{\"kind\":\"dict\",\"key\":\"uint\",\"keyFormat\":32,\"value\":\"EscrowContract\",\"valueFormat\":\"ref\"}},{\"name\":\"totalOrders\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":32}},{\"name\":\"totalVolume\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}},{\"name\":\"totalResolves\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":32}}]}],\"receivers\":[{\"receiver\":\"internal\",\"message\":{\"kind\":\"empty\"}},{\"receiver\":\"internal\",\"message\":{\"kind\":\"typed\",\"type\":\"SetWhiteList\"}},{\"receiver\":\"internal\",\"message\":{\"kind\":\"typed\",\"type\":\"RegisterRelayer\"}},{\"receiver\":\"internal\",\"message\":{\"kind\":\"typed\",\"type\":\"JettonNotifyWithActionRequest\"}},{\"receiver\":\"internal\",\"message\":{\"kind\":\"typed\",\"type\":\"GetFund\"}},{\"receiver\":\"internal\",\"message\":{\"kind\":\"typed\",\"type\":\"Refund\"}},{\"receiver\":\"internal\",\"message\":{\"kind\":\"typed\",\"type\":\"RefundOrder\"}},{\"receiver\":\"internal\",\"message\":{\"kind\":\"typed\",\"type\":\"PartialFill\"}},{\"receiver\":\"internal\",\"message\":{\"kind\":\"typed\",\"type\":\"CompletePartialFill\"}},{\"receiver\":\"internal\",\"message\":{\"kind\":\"typed\",\"type\":\"DeployEscrow\"}},{\"receiver\":\"internal\",\"message\":{\"kind\":\"typed\",\"type\":\"UpdateRelayerStats\"}},{\"receiver\":\"internal\",\"message\":{\"kind\":\"typed\",\"type\":\"Deploy\"}}],\"getters\":[],\"errors\":{\"2\":{\"message\":\"Stack underflow\"},\"3\":{\"message\":\"Stack overflow\"},\"4\":{\"message\":\"Integer overflow\"},\"5\":{\"message\":\"Integer out of expected range\"},\"6\":{\"message\":\"Invalid opcode\"},\"7\":{\"message\":\"Type check error\"},\"8\":{\"message\":\"Cell overflow\"},\"9\":{\"message\":\"Cell underflow\"},\"10\":{\"message\":\"Dictionary error\"},\"11\":{\"message\":\"'Unknown' error\"},\"12\":{\"message\":\"Fatal error\"},\"13\":{\"message\":\"Out of gas error\"},\"14\":{\"message\":\"Virtualization error\"},\"32\":{\"message\":\"Action list is invalid\"},\"33\":{\"message\":\"Action list is too long\"},\"34\":{\"message\":\"Action is invalid or not supported\"},\"35\":{\"message\":\"Invalid source address in outbound message\"},\"36\":{\"message\":\"Invalid destination address in outbound message\"},\"37\":{\"message\":\"Not enough Toncoin\"},\"38\":{\"message\":\"Not enough extra currencies\"},\"39\":{\"message\":\"Outbound message does not fit into a cell after rewriting\"},\"40\":{\"message\":\"Cannot process a message\"},\"41\":{\"message\":\"Library reference is null\"},\"42\":{\"message\":\"Library change action error\"},\"43\":{\"message\":\"Exceeded maximum number of cells in the library or the maximum depth of the Merkle tree\"},\"50\":{\"message\":\"Account state size exceeded limits\"},\"128\":{\"message\":\"Null reference exception\"},\"129\":{\"message\":\"Invalid serialization prefix\"},\"130\":{\"message\":\"Invalid incoming message\"},\"131\":{\"message\":\"Constraints error\"},\"132\":{\"message\":\"Access denied\"},\"133\":{\"message\":\"Contract stopped\"},\"134\":{\"message\":\"Invalid argument\"},\"135\":{\"message\":\"Code of a contract was not found\"},\"136\":{\"message\":\"Invalid standard address\"},\"138\":{\"message\":\"Not a basechain address\"}},\"interfaces\":[\"org.ton.introspection.v0\",\"org.ton.abi.ipfs.v0\",\"org.ton.deploy.lazy.v0\"]}","init":{"kind":"direct","args":[],"prefix":{"bits":1,"value":0},"deployment":{"kind":"system-cell","system":null}},"sources":{"contracts/messages.tact":"aW1wb3J0ICIuL3N0YXRlcy50YWN0IjsKCi8vIENyb3NzLWNoYWluIG9yZGVyIG1lc3NhZ2VzCm1lc3NhZ2UoMHhmNTEyZjdkZikgTG9ja0pldHRvbiB7CiAgICBvcmRlckNvbmZpZzogT3JkZXJDb25maWc7CiAgICBqZXR0b246IENlbGw7CiAgICBjdXN0b21QYXlsb2FkOiBDZWxsPzsKfQoKbWVzc2FnZSgweDczNjJkMDljKSBDcmVhdGVPcmRlciB7CiAgICBvcmRlckNvbmZpZzogT3JkZXI7CiAgICBqZXR0b246IENlbGw7CiAgICBjdXN0b21QYXlsb2FkOiBDZWxsPzsKfQoKLy8gQmktZGlyZWN0aW9uYWwgc3dhcCBtZXNzYWdlcwptZXNzYWdlKDB4OGIzNDE4MjIpIENyZWF0ZUVWTVRvVE9OT3JkZXIgewogICAgb3JkZXJDb25maWc6IE9yZGVyQ29uZmlnOwogICAgZXZtQ29udHJhY3RBZGRyZXNzOiBBZGRyZXNzOwogICAgY3VzdG9tUGF5bG9hZDogQ2VsbD87Cn0KCm1lc3NhZ2UoMHg2MjIzOTk3OCkgQ3JlYXRlVE9OVG9FVk1PcmRlciB7CiAgICBvcmRlckNvbmZpZzogT3JkZXJDb25maWc7CiAgICB0YXJnZXRDaGFpbklkOiBJbnQgYXMgdWludDMyOwogICAgY3VzdG9tUGF5bG9hZDogQ2VsbD87Cn0KCi8vIFBhcnRpYWwgZmlsbCBtZXNzYWdlcwptZXNzYWdlKDB4NGVmNWNiMjYpIFBhcnRpYWxGaWxsIHsKICAgIG9yZGVySGFzaDogSW50IGFzIHVpbnQyNTY7CiAgICBzZWNyZXQ6IEludCBhcyB1aW50MjU2OwogICAgZmlsbEFtb3VudDogSW50IGFzIHVpbnQ2NDsKICAgIHJlc29sdmVyOiBBZGRyZXNzOwogICAgY3VzdG9tUGF5bG9hZDogQ2VsbD87Cn0KCm1lc3NhZ2UoMHg4YjM0MTgyMykgQ29tcGxldGVQYXJ0aWFsRmlsbCB7CiAgICBvcmRlckhhc2g6IEludCBhcyB1aW50MjU2OwogICAgc2VjcmV0OiBJbnQgYXMgdWludDI1NjsKICAgIGN1c3RvbVBheWxvYWQ6IENlbGw/Owp9CgovLyBFc2Nyb3cgZmFjdG9yeSBtZXNzYWdlcwptZXNzYWdlKDB4NTk1ZjA3YmMpIERlcGxveUVzY3JvdyB7CiAgICBjaGFpbklkOiBJbnQgYXMgdWludDMyOwogICAgdGFyZ2V0QWRkcmVzczogQWRkcmVzczsKICAgIGN1c3RvbVBheWxvYWQ6IENlbGw/Owp9CgptZXNzYWdlKDB4N2JkZDk3ZGUpIEVzY3Jvd0RlcGxveWVkIHsKICAgIGNoYWluSWQ6IEludCBhcyB1aW50MzI7CiAgICBjb250cmFjdEFkZHJlc3M6IEFkZHJlc3M7CiAgICBzdWNjZXNzOiBCb29sOwogICAgY3VzdG9tUGF5bG9hZDogQ2VsbD87Cn0KCi8vIFJlbGF5ZXIvUmVzb2x2ZXIgbWVzc2FnZXMKbWVzc2FnZSgweDczNjJkMDllKSBSZWdpc3RlclJlbGF5ZXIgewogICAgcmVsYXllcjogQWRkcmVzczsKICAgIGN1c3RvbVBheWxvYWQ6IENlbGw/Owp9CgptZXNzYWdlKDB4NzM2MmQwOWYpIFVwZGF0ZVJlbGF5ZXJTdGF0cyB7CiAgICByZWxheWVyOiBBZGRyZXNzOwogICAgc3VjY2VzczogQm9vbDsKICAgIGN1c3RvbVBheWxvYWQ6IENlbGw/Owp9CgovLyBGdW5kIG1hbmFnZW1lbnQgbWVzc2FnZXMKbWVzc2FnZSgweDUwNjM1ZmQyKSBHZXRGdW5kIHsKICAgIHNlY3JldDogSW50IGFzIHVpbnQyNTY7CiAgICBoYXNoOiBJbnQgYXMgdWludDI1NjsKICAgIGN1c3RvbVBheWxvYWQ6IENlbGw/Owp9CgptZXNzYWdlKDB4ZTQ5ZTFkY2IpIFJlZnVuZCB7CiAgICBoYXNoOiBJbnQgYXMgdWludDI1NjsKICAgIGN1c3RvbVBheWxvYWQ6IENlbGw/Owp9CgptZXNzYWdlKDB4NzM2MmQwOWQpIFJlZnVuZE9yZGVyIHsKICAgIGhhc2g6IEludCBhcyB1aW50MjU2OwogICAgY3VzdG9tUGF5bG9hZDogQ2VsbD87Cn0KCi8vIFdoaXRlbGlzdCBtYW5hZ2VtZW50Cm1lc3NhZ2UoMHhhOTg1ZmRmOCkgU2V0V2hpdGVMaXN0IHsKICAgIHJlc29sdmVyOiBBZGRyZXNzOwogICAgd2hpdGVsaXN0U3RhdHVzOiBCb29sOwp9CgovLyBKZXR0b24gbm90aWZpY2F0aW9uIHdpdGggYWN0aW9uCm1lc3NhZ2UoMHg3MzYyZDA5YykgSmV0dG9uTm90aWZ5V2l0aEFjdGlvblJlcXVlc3QgewogICAgcXVlcnlJZDogSW50IGFzIHVpbnQ2NDsKICAgIGFtb3VudDogSW50IGFzIGNvaW5zOwogICAgc2VuZGVyOiBBZGRyZXNzOwogICAgYWN0aW9uT3Bjb2RlOiBJbnQgYXMgdWludDMyOwogICAgYWN0aW9uUGF5bG9hZDogQ2VsbDsgLy8gT2JsaWdhdG9yeSByZWYKfQoKbWVzc2FnZSgweDJmY2IyNmEyKSBHZXRXYWxsZXRBZGRyZXNzIHsKICAgIHF1ZXJ5SWQ6IEludDsKICAgIG93bmVyOiBBZGRyZXNzOwp9CgoKCgovLyBtZXNzYWdlKDB4NTk1ZjA3YmMpIFRva2VuQnVybiB7Ci8vICAgICBxdWVyeV9pZDogSW50IGFzIHVpbnQ2NDsKLy8gICAgIGFtb3VudDogSW50IGFzIGNvaW5zOwovLyAgICAgcmVzcG9uc2VfZGVzdGluYXRpb246IEFkZHJlc3M/OwovLyAgICAgY3VzdG9tX3BheWxvYWQ6IENlbGw/OwovLyB9Ci8vIG1lc3NhZ2UoMHg3YmRkOTdkZSkgVG9rZW5CdXJuTm90aWZpY2F0aW9uIHsKLy8gICAgIHF1ZXJ5X2lkOiBJbnQgYXMgdWludDY0OwovLyAgICAgYW1vdW50OiBJbnQgYXMgY29pbnM7Ci8vICAgICBzZW5kZXI6IEFkZHJlc3M7Ci8vICAgICByZXNwb25zZV9kZXN0aW5hdGlvbjogQWRkcmVzcz87Ci8vIH0KCi8vIG1lc3NhZ2UoMHg3MzYyZDA5YykgSmV0dG9uTm90aWZ5V2l0aEFjdGlvblJlcXVlc3QgewovLyAgICAgcXVlcnlJZDogSW50IGFzIHVpbnQ2NDsKLy8gICAgIGFtb3VudDogSW50IGFzIGNvaW5zOwovLyAgICAgc2VuZGVyOiBBZGRyZXNzOwovLyAgICAgZWl0aGVyQml0OiBCb29sOyAvLyBTaG91bGQgYmUgMCwgc28gb3RoZXIgZmllbGRzIGFyZSBzdG9yZWQgaW5saW5lCi8vICAgICBhY3Rpb25PcGNvZGU6IEludCBhcyB1aW50MzI7Ci8vICAgICBhY3Rpb25QYXlsb2FkOiBDZWxsOyAvLyBPYmxpZ2F0b3J5IHJlZgovLyB9CgoKLy8gbWVzc2FnZSgweDczNjJkMDljKSBUb2tlbk5vdGlmaWNhdGlvbiB7Ci8vICAgICBxdWVyeV9pZDogSW50IGFzIHVpbnQ2NDsKLy8gICAgIGFtb3VudDogSW50IGFzIGNvaW5zOwovLyAgICAgZnJvbTogQWRkcmVzczsKLy8gICAgIGZvcndhcmRfcGF5bG9hZDogU2xpY2UgYXMgcmVtYWluaW5nOyAvLyBDb21tZW50IFRleHQgbWVzc2FnZSB3aGVuIFRyYW5zZmVyIHRoZSBqZXR0b24gCi8vIH0KCi8vIG1lc3NhZ2UoMHg0ZWY1Y2IyNikgSUNPVG9rZW5CdXJuIHsKLy8gICAgIGpldHRvbkFjY291bnQ6IENlbGw7Ci8vICAgICBxdWVyeUlkOiBJbnQgYXMgdWludDY0OwovLyAgICAgYW1vdW50OiBJbnQgYXMgY29pbnM7Ci8vICAgICByZXNwb25zZURlc3RpbmF0aW9uOiBBZGRyZXNzPzsKLy8gICAgIGN1c3RvbVBheWxvYWQ6IENlbGw/OwovLyB9Ci8vIG1lc3NhZ2UoMHg4YjM0MTgyMikgQWRkIHsKLy8gICAgIHF1ZXJ5SWQ6IEludCBhcyB1aW50NjQ7Ci8vICAgICBhbW91bnQ6IEludCBhcyB1aW50MzI7Ci8vIH0KLy8gbWVzc2FnZSgweDYyMjM5OTc4KSBCdXkgewovLyAgICAgdXNlcjogQWRkcmVzczsKLy8gICAgIGFtb3VudDogSW50IGFzIGNvaW5zOwovLyB9Cg==","contracts/errors.tact":"CmNvbnN0IElOQ09OU0lTVEVOVF9OQVRJVkVfU1JDX1RSQUlUOiBJbnQgPSA3MDsKY29uc3QgSU5DT05TSVNURU5UX05BVElWRV9EU1RfVFJBSVQ6IEludCA9IDcxOwpjb25zdCBJTlZBTElEX0FNT1VOVDogSW50ID0gNzI7CmNvbnN0IE1JU1NJTkdfTUFLRVJfRFNUX0FUQTogSW50ID0gNzM7CmNvbnN0IE5PVF9FTk9VR0hfVE9LRU5TX0lOX0VTQ1JPVzogSW50ID0gNzQ7CmNvbnN0IE9SREVSX0VYUElSRUQ6IEludCA9IDc1Owpjb25zdCBJTlZBTElEX0VTVElNQVRFRF9UQUtJTkdfQU1PVU5UOiBJbnQgPSA3NjsKY29uc3QgSU5WQUxJRF9QUk9UT0NPTF9TVVJQTFVTX0ZFRTogSW50ID0gNzc7CmNvbnN0IElOQ09OU0lTVEVOVF9QUk9UT0NPTF9GRUVfQ09ORklHOiBJbnQgPSA3ODsKY29uc3QgSU5DT05TSVNURU5UX0lOVEVHUkFUT1JfRkVFX0NPTkZJRzogSW50ID0gNzk7CmNvbnN0IE9SREVSX05PVF9FWFBJUkVEOiBJbnQgPSA4MDsKY29uc3QgSU5WQUxJRF9DQU5DRUxMQVRJT05fRkVFOiBJbnQgPSA4MTsKY29uc3QgQ0FOQ0VMX09SREVSX0JZX1JFU09MVkVSX0lTX0ZPUkJJRERFTjogSW50ID0gODI7CmNvbnN0IE1JU1NJTkdfVEFLRVJfRFNUX0FUQTogSW50ID0gODM7CmNvbnN0IE1JU1NJTkdfTUFLRVJfU1JDX0FUQTogSW50ID0gODQ7CmNvbnN0IElOVkFMSURfUkVDSVBJRU5UOiBJbnQgPSA4NTsKY29uc3QgSU5WQUxJRF9PV05FUjogSW50ID0gODY7CmNvbnN0IElOVkFMSURfV0hJVEVMSVNUOiBJbnQgPSA4NzsKY29uc3QgSU5WQUxJRF9IQVNIOiBJbnQgPSA4ODsKY29uc3QgSU5WQUxJRF9TRUNSRVQ6IEludCA9IDg5Owpjb25zdCBPUkRFUl9BTFJFQURZX0VYSVNUUzogSW50ID0gOTA7CmNvbnN0IE9SREVSX0FMUkVBRFlfRklOQUxJWkVEOiBJbnQgPSA5MTsKCi8vIE5ldyBlcnJvciBjb2RlcyBmb3IgZW5oYW5jZWQgZnVuY3Rpb25hbGl0eQpjb25zdCBJTlZBTElEX1NXQVBfRElSRUNUSU9OOiBJbnQgPSA5MjsKY29uc3QgSU5WQUxJRF9DSEFJTl9JRDogSW50ID0gOTM7CmNvbnN0IElOVkFMSURfUEFSVElBTF9GSUxMOiBJbnQgPSA5NDsKY29uc3QgT1JERVJfTk9UX1BBUlRJQUxMWV9GSUxMRUQ6IEludCA9IDk1Owpjb25zdCBJTlZBTElEX1JFTEFZRVI6IEludCA9IDk2Owpjb25zdCBFU0NST1dfREVQTE9ZTUVOVF9GQUlMRUQ6IEludCA9IDk3Owpjb25zdCBJTlZBTElEX0VTQ1JPV19DT05UUkFDVDogSW50ID0gOTg7CmNvbnN0IElOU1VGRklDSUVOVF9GVU5EUzogSW50ID0gOTk7CmNvbnN0IFJFTEFZRVJfTk9UX1dISVRFTElTVEVEOiBJbnQgPSAxMDA7CmNvbnN0IE9SREVSX0FMUkVBRFlfQ09NUExFVEVEOiBJbnQgPSAxMDE7CmNvbnN0IElOVkFMSURfVEFSR0VUX0NIQUlOOiBJbnQgPSAxMDI7CmNvbnN0IFBBUlRJQUxfRklMTF9FWENFRURTX09SREVSOiBJbnQgPSAxMDM7CmNvbnN0IFNFQ1JFVF9BTFJFQURZX1VTRUQ6IEludCA9IDEwNDsKCgpjb25zdCBXUk9OR19PUDogSW50ID0gMHhmZmZmOwo=","contracts/states.tact":"CgoKY29uc3QgSmV0dG9uVHJhbnNmZXJHYXM6IEludCA9IHRvbigiMC4wNSIpOwoKc3RydWN0IENhbGN1bGF0ZU91dHB1dCB7CiAgICBwcm90b2NvbEZlZUFtb3VudDpJbnQgYXMgdWludDY0OwogICAgaW50ZWdyYXRvckZlZUFtb3VudDpJbnQgYXMgdWludDY0OwogICAgb3V0cHV0QW1vdW50OkludCBhcyB1aW50NjQ7Cn0KCnN0cnVjdCBQb2ludEFuZFRpbWVEZWx0YSB7CiAgICByYXRlQnVtcDogSW50IGFzIHVpbnQxNiA9IDA7CiAgICB0aW1lRGVsdGE6IEludCBhcyB1aW50MTYgPSAwOwp9CgovLyBDcm9zcy1jaGFpbiBvcmRlciAoVE9OIOKGlCBFVk0gY2hhaW5zKQpzdHJ1Y3QgT3JkZXJDb25maWcgewogICAgaWQ6IEludCBhcyB1aW50MzI7IC8vIENoYWluIElECiAgICBzcmNKZXR0b25BZGRyZXNzOiBBZGRyZXNzOwogICAgc2VuZGVyUHViS2V5OiBBZGRyZXNzOwogICAgcmVjZWl2ZXJQdWJLZXk6IEFkZHJlc3M7CiAgICBoYXNobG9jazogSW50IGFzIHVpbnQyNTY7CiAgICB0aW1lbG9jazogSW50IGFzIHVpbnQzMjsKICAgIGFtb3VudDogSW50IGFzIHVpbnQ2NDsKICAgIGZpbmFsaXplZDogQm9vbCA9IGZhbHNlOwogICAgcGFydGlhbEZpbGxzOiBtYXA8SW50IGFzIHVpbnQyNTYsIEludCBhcyB1aW50NjQ+ID0gZW1wdHlNYXAoKTsgLy8gTXVsdGlwbGUgc2VjcmV0cyBmb3IgcGFydGlhbCBmaWxscwogICAgdG90YWxGaWxsZWQ6IEludCBhcyB1aW50NjQgPSAwOwogICAgZGlyZWN0aW9uOiBJbnQgYXMgdWludDg7IC8vIDA9VE9OX1RPX0VWTSwgMT1FVk1fVE9fVE9OLCAyPVRPTl9UT19UT04KfQoKLy8gU2FtZS1jaGFpbiBvcmRlciAoVE9OIOKGlCBUT04pCnN0cnVjdCBPcmRlciB7CiAgICBpZDogSW50IGFzIHVpbnQzMjsgLy8gQ2hhaW4gSUQKICAgIHNyY0pldHRvbkFkZHJlc3M6IEFkZHJlc3M7CiAgICBzZW5kZXJQdWJLZXk6IEFkZHJlc3M7CiAgICBoYXNobG9jazogSW50IGFzIHVpbnQyNTY7CiAgICB0aW1lbG9jazogSW50IGFzIHVpbnQzMjsKICAgIGFtb3VudDogSW50IGFzIHVpbnQ2NDsKICAgIGZpbmFsaXplZDogQm9vbCA9IGZhbHNlOwogICAgcGFydGlhbEZpbGxzOiBtYXA8SW50IGFzIHVpbnQyNTYsIEludCBhcyB1aW50NjQ+ID0gZW1wdHlNYXAoKTsgLy8gTXVsdGlwbGUgc2VjcmV0cyBmb3IgcGFydGlhbCBmaWxscwogICAgdG90YWxGaWxsZWQ6IEludCBhcyB1aW50NjQgPSAwOwogICAgZGlyZWN0aW9uOiBJbnQgYXMgdWludDg7IC8vIDI9VE9OX1RPX1RPTgp9CgovLyBFc2Nyb3cgY29udHJhY3QgZGF0YSBmb3IgdGFyZ2V0IGNoYWlucwpzdHJ1Y3QgRXNjcm93Q29udHJhY3QgewogICAgY2hhaW5JZDogSW50IGFzIHVpbnQzMjsKICAgIGNvbnRyYWN0QWRkcmVzczogQWRkcmVzczsKICAgIGRlcGxveWVkOiBCb29sID0gZmFsc2U7CiAgICB0b3RhbE9yZGVyczogSW50IGFzIHVpbnQzMiA9IDA7Cn0KCi8vIFJlbGF5ZXIvUmVzb2x2ZXIgZGF0YQpzdHJ1Y3QgUmVsYXllckRhdGEgewogICAgYWRkcmVzczogQWRkcmVzczsKICAgIHdoaXRlbGlzdGVkOiBCb29sID0gZmFsc2U7CiAgICB0b3RhbFJlc29sdmVzOiBJbnQgYXMgdWludDMyID0gMDsKICAgIHN1Y2Nlc3NSYXRlOiBJbnQgYXMgdWludDE2ID0gMDsgLy8gUGVyY2VudGFnZQp9CgovLyBTd2FwIGRpcmVjdGlvbiBjb25zdGFudHMKY29uc3QgVE9OX1RPX0VWTTogSW50ID0gMDsKY29uc3QgRVZNX1RPX1RPTjogSW50ID0gMTsKY29uc3QgVE9OX1RPX1RPTjogSW50ID0gMjsKCi8vIEhUTEMgc3RhdHVzIGNvbnN0YW50cwpjb25zdCBIVExDX1BFTkRJTkc6IEludCA9IDA7CmNvbnN0IEhUTENfQ09NUExFVEVEOiBJbnQgPSAxOwpjb25zdCBIVExDX0VYUElSRUQ6IEludCA9IDI7CmNvbnN0IEhUTENfUkVGVU5ERUQ6IEludCA9IDM7CgpzdHJ1Y3QgSmV0dG9uV2FsbGV0RGF0YSB7CiAgICBiYWxhbmNlOiBJbnQgYXMgY29pbnM7CiAgICBvd25lckFkZHJlc3M6IEFkZHJlc3M7CiAgICBqZXR0b25NYXN0ZXJBZGRyZXNzOiBBZGRyZXNzOwogICAgamV0dG9uV2FsbGV0Q29kZTogQ2VsbDsKfQoKCg==","contracts/consts.tact":"Y29uc3QgQkFTRV8xRTI6IEludCA9IDEwMDsKY29uc3QgQkFTRV8xRTM6IEludCA9IDEwMDA7CmNvbnN0IEJBU0VfMUU1OiBJbnQgPSAxMDBfMDAwOwoKCg==","contracts/utils.tact":"aW1wb3J0ICIuL3N0YXRlcy50YWN0IjsKCm1lc3NhZ2UoMHhmOGE3ZWE1KSBTZW5kVmlhSmV0dG9uVHJhbnNmZXIgewogICAgcXVlcnlJZDogSW50IGFzIHVpbnQ2NDsKICAgIGFtb3VudDogSW50IGFzIGNvaW5zOwogICAgZGVzdGluYXRpb246IEFkZHJlc3M7CiAgICByZXNwb25zZURlc3RpbmF0aW9uOiBBZGRyZXNzPzsKICAgIGN1c3RvbVBheWxvYWQ6IENlbGw/OwogICAgZm9yd2FyZFRvbkFtb3VudDogSW50IGFzIGNvaW5zOwogICAgZm9yd2FyZFBheWxvYWQ6IFNsaWNlIGFzIHJlbWFpbmluZzsKfQoKLy8gSW1wcm92ZWQgamV0dG9uIHdhbGxldCBhZGRyZXNzIGNhbGN1bGF0aW9uIHVzaW5nIFJVTlZNIChsaWtlIHRhY3QtZGV4KQphc20gZnVuIGNhbGN1bGF0ZUpldHRvbldhbGxldChvd25lcjogQWRkcmVzcywgamV0dG9uRGF0YTogQ2VsbCwgamV0dG9uQ29kZTogQ2VsbCwgamV0dG9uTWFzdGVyOiBBZGRyZXNzKTogQWRkcmVzcyB7CiAgICBjNyBQVVNIQ1RSCiAgICAwIElOREVYIC8vIFVucGFjayBzaW5nbGV0b24gZnJvbSBjNwogICAgU1dBUAogICAgOCBTRVRJTkRFWAogICAgU1dBUAogICAgRFVQCiAgICBST1RSRVYKICAgIDEwIFNFVElOREVYCiAgICAxIFRVUExFIC8vIE1ha2UgaXQgc2luZ2xldG9uIGJhY2sKICAgIFJPVFJFVgogICAgQ1RPUyAgICAgICAgICAgIC8vIG93bmVyX2FkZHIgYzcgbWQgbWMiCiAgICAyIFBVU0hJTlQgICAgICAgLy8gb3duZXJfYWRkciBjNyBtZCBtYyBhcmdzIgogICAgMTAzMjg5IFBVU0hJTlQgIC8vIG93bmVyX2FkZHIgYzcgbWQgbWMgYXJncyBnZXRfandhX21ldGhvZF9pZCIKICAgIDUgMCBSRVZFUlNFICAgICAvLyBvd25lcl9hZGRyIGdldF9qd2FfbWV0aG9kX2lkIGFyZ3MgbWMgbWQgYzciCiAgICA1MyBSVU5WTSAgICAgICAgLy8gYWRkcmVzcyBleGl0X2NvZGUgYzQnIGM1JyIKICAgIDMgQkxLRFJPUCAgICAgICAvLyBhZGRyZXNzIgp9CgovLyBGYWxsYmFjayBjYWxjdWxhdGlvbiBmb3IgY29tcGF0aWJpbGl0eQpmdW4gY2FsY3VsYXRlSmV0dG9uV2FsbGV0QWRkcmVzcygKICAgIG93bmVyQWRkcmVzczogQWRkcmVzcywKICAgIGpldHRvbk1hc3RlckFkZHJlc3M6IEFkZHJlc3MsCiAgICBqZXR0b25XYWxsZXRDb2RlOiBDZWxsCik6IEFkZHJlc3MgewogICAgbGV0IGluaXREYXRhID0gSmV0dG9uV2FsbGV0RGF0YXsKICAgICAgICBiYWxhbmNlOiAwLAogICAgICAgIG93bmVyQWRkcmVzcywKICAgICAgICBqZXR0b25NYXN0ZXJBZGRyZXNzLAogICAgICAgIGpldHRvbldhbGxldENvZGUsCiAgICB9OwoKICAgIHJldHVybiBjb250cmFjdEFkZHJlc3MoU3RhdGVJbml0ewogICAgICAgIGNvZGU6IGpldHRvbldhbGxldENvZGUsCiAgICAgICAgZGF0YTogaW5pdERhdGEudG9DZWxsKCksCiAgICB9KTsKfQoKLy8gRW5oYW5jZWQgaGFzaCBmdW5jdGlvbiBmb3IgSFRMQwpmdW4ga2VjY2FrQnl0ZXMzMihzZWNyZXQ6IEludCk6IEludCB7CiAgICBsZXQgY2VsbDogQ2VsbCA9IGJlZ2luQ2VsbCgpCiAgICAgICAgLnN0b3JlVWludChzZWNyZXQsIDI1NikKICAgICAgICAuZW5kQ2VsbCgpOwogICAgcmV0dXJuIGNlbGwuaGFzaCgpOwp9CgovLyBHZW5lcmF0ZSBtdWx0aXBsZSBzZWNyZXRzIGZvciBwYXJ0aWFsIGZpbGxzCmZ1biBnZW5lcmF0ZVBhcnRpYWxTZWNyZXRzKGJhc2VTZWNyZXQ6IEludCwgY291bnQ6IEludCk6IG1hcDxJbnQgYXMgdWludDI1NiwgSW50IGFzIHVpbnQyNTY+IHsKICAgIGxldCBzZWNyZXRzOiBtYXA8SW50IGFzIHVpbnQyNTYsIEludCBhcyB1aW50MjU2PiA9IGVtcHR5TWFwKCk7CiAgICBsZXQgaTogSW50ID0gMDsKICAgIHdoaWxlIChpIDwgY291bnQpIHsKICAgICAgICBsZXQgcGFydGlhbFNlY3JldCA9IGJhc2VTZWNyZXQgKyBpOwogICAgICAgIGxldCBwYXJ0aWFsSGFzaCA9IGtlY2Nha0J5dGVzMzIocGFydGlhbFNlY3JldCk7CiAgICAgICAgc2VjcmV0cy5zZXQocGFydGlhbEhhc2gsIHBhcnRpYWxTZWNyZXQpOwogICAgICAgIGkgPSBpICsgMTsKICAgIH0KICAgIHJldHVybiBzZWNyZXRzOwp9CgovLyBWYWxpZGF0ZSBjaGFpbiBJRCBmb3Igc3VwcG9ydGVkIG5ldHdvcmtzCmZ1biBpc1ZhbGlkQ2hhaW5JZChjaGFpbklkOiBJbnQpOiBCb29sIHsKICAgIHJldHVybiBjaGFpbklkID09IDEgfHwgLy8gRXRoZXJldW0KICAgICAgICAgICBjaGFpbklkID09IDEzNyB8fCAvLyBQb2x5Z29uCiAgICAgICAgICAgY2hhaW5JZCA9PSA1NiB8fCAvLyBCU0MKICAgICAgICAgICBjaGFpbklkID09IDg0NTMgfHwgLy8gQmFzZQogICAgICAgICAgIGNoYWluSWQgPT0gNDIxNjEgfHwgLy8gQXJiaXRydW0KICAgICAgICAgICBjaGFpbklkID09IC0zIHx8IC8vIFRPTiBNYWlubmV0CiAgICAgICAgICAgY2hhaW5JZCA9PSAtMjM5OyAvLyBUT04gVGVzdG5ldAp9CgovLyBDYWxjdWxhdGUgc3dhcCBkaXJlY3Rpb24gYmFzZWQgb24gY2hhaW4gSURzCmZ1biBnZXRTd2FwRGlyZWN0aW9uKGZyb21DaGFpbklkOiBJbnQsIHRvQ2hhaW5JZDogSW50KTogSW50IHsKICAgIGlmIChmcm9tQ2hhaW5JZCA9PSAtMyB8fCBmcm9tQ2hhaW5JZCA9PSAtMjM5KSB7CiAgICAgICAgaWYgKHRvQ2hhaW5JZCA9PSAtMyB8fCB0b0NoYWluSWQgPT0gLTIzOSkgewogICAgICAgICAgICByZXR1cm4gVE9OX1RPX1RPTjsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXR1cm4gVE9OX1RPX0VWTTsKICAgICAgICB9CiAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBFVk1fVE9fVE9OOwogICAgfQp9CgovLyBDYWxjdWxhdGUgdGltZWxvY2sgYmFzZWQgb24gY2hhaW4gYW5kIGRpcmVjdGlvbgpmdW4gY2FsY3VsYXRlVGltZWxvY2soY2hhaW5JZDogSW50LCBkaXJlY3Rpb246IEludCk6IEludCB7CiAgICBsZXQgYmFzZVRpbWUgPSBub3coKTsKICAgIGlmIChkaXJlY3Rpb24gPT0gVE9OX1RPX0VWTSkgewogICAgICAgIHJldHVybiBiYXNlVGltZSArIDM2MDA7IC8vIDEgaG91ciBmb3IgY3Jvc3MtY2hhaW4KICAgIH0gZWxzZSBpZiAoZGlyZWN0aW9uID09IEVWTV9UT19UT04pIHsKICAgICAgICByZXR1cm4gYmFzZVRpbWUgKyAxODAwOyAvLyAzMCBtaW51dGVzIGZvciBFVk0gdG8gVE9OCiAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBiYXNlVGltZSArIDkwMDsgLy8gMTUgbWludXRlcyBmb3Igc2FtZS1jaGFpbgogICAgfQp9CgovLyBWYWxpZGF0ZSBvcmRlciBwYXJhbWV0ZXJzCmZ1biB2YWxpZGF0ZU9yZGVyKG9yZGVyOiBPcmRlckNvbmZpZyk6IEJvb2wgewogICAgcmV0dXJuIG9yZGVyLmFtb3VudCA+IDAgJiYKICAgICAgICAgICBvcmRlci50aW1lbG9jayA+IG5vdygpICYmCiAgICAgICAgICAgaXNWYWxpZENoYWluSWQob3JkZXIuaWQpICYmCiAgICAgICAgICAgb3JkZXIuaGFzaGxvY2sgIT0gMDsKfQoKLy8gQ2FsY3VsYXRlIGZlZXMgYmFzZWQgb24gb3JkZXIgc2l6ZSBhbmQgZGlyZWN0aW9uCmZ1biBjYWxjdWxhdGVGZWVzKGFtb3VudDogSW50LCBkaXJlY3Rpb246IEludCk6IEludCB7CiAgICBsZXQgYmFzZUZlZSA9IDEwMDAwMDA7IC8vIDAuMDAxIFRPTiBiYXNlIGZlZQogICAgbGV0IHBlcmNlbnRhZ2VGZWUgPSBhbW91bnQgKiA1IC8gMTAwMDA7IC8vIDAuMDUlIGZlZQogICAgCiAgICBpZiAoZGlyZWN0aW9uID09IFRPTl9UT19FVk0pIHsKICAgICAgICByZXR1cm4gYmFzZUZlZSArIHBlcmNlbnRhZ2VGZWUgKyA1MDAwMDAwOyAvLyBFeHRyYSBmb3IgY3Jvc3MtY2hhaW4KICAgIH0gZWxzZSBpZiAoZGlyZWN0aW9uID09IEVWTV9UT19UT04pIHsKICAgICAgICByZXR1cm4gYmFzZUZlZSArIHBlcmNlbnRhZ2VGZWUgKyAzMDAwMDAwOyAvLyBMZXNzIGZvciBFVk0gdG8gVE9OCiAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBiYXNlRmVlICsgcGVyY2VudGFnZUZlZTsgLy8gU3RhbmRhcmQgZm9yIHNhbWUtY2hhaW4KICAgIH0KfQoKaW5saW5lIGZ1biBwcmljZU9mSmV0dG9uRm9yd2FyZChmd2RGZWU6IEludCwgZndkVG9uQW1vdW50OiBJbnQpOiBJbnQgewogICAgcmV0dXJuCiAgICAgICAgZndkVG9uQW1vdW50ICsKICAgICAgICAyICogZndkRmVlICsKICAgICAgICBnZXRGb3J3YXJkRmVlKDQwLCAzMDAwMCwgZmFsc2UpICsKICAgICAgICAoMiAqIGdldENvbXB1dGVGZWUoMzAwMDAsIGZhbHNlKSArCiAgICAgICAgIHRvbigiMC4wMiIpKTsKfQoKLy8gRW5oYW5jZWQgc2VyaWFsaXphdGlvbiBmb3IgT3JkZXJDb25maWcgd2l0aCBwYXJ0aWFsIGZpbGxzCmlubGluZSBmdW4gc2VyaWFsaXplT3JkZXJDb25maWcob3JkZXI6IE9yZGVyQ29uZmlnLCBzZWNyZXQ6IEludCk6IENlbGwgewogICAgcmV0dXJuIGJlZ2luQ2VsbCgpCiAgICAgICAgLnN0b3JlVWludChvcmRlci5pZCwgMzIpCiAgICAgICAgLnN0b3JlQWRkcmVzcyhvcmRlci5zcmNKZXR0b25BZGRyZXNzKQogICAgICAgIC5zdG9yZUFkZHJlc3Mob3JkZXIuc2VuZGVyUHViS2V5KQogICAgICAgIC5zdG9yZUFkZHJlc3Mob3JkZXIucmVjZWl2ZXJQdWJLZXkpCiAgICAgICAgLnN0b3JlVWludChvcmRlci5oYXNobG9jaywgMjU2KQogICAgICAgIC5zdG9yZVVpbnQob3JkZXIudGltZWxvY2ssIDMyKQogICAgICAgIC5zdG9yZVVpbnQob3JkZXIuYW1vdW50LCA2NCkKICAgICAgICAuc3RvcmVCb29sKG9yZGVyLmZpbmFsaXplZCkKICAgICAgICAuc3RvcmVVaW50KG9yZGVyLnRvdGFsRmlsbGVkLCA2NCkKICAgICAgICAuc3RvcmVVaW50KG9yZGVyLmRpcmVjdGlvbiwgOCkKICAgICAgICAuc3RvcmVVaW50KHNlY3JldCwgMjU2KQogICAgICAgIC5lbmRDZWxsKCk7Cn0KCi8vIEVuaGFuY2VkIHNlcmlhbGl6YXRpb24gZm9yIE9yZGVyIHdpdGggcGFydGlhbCBmaWxscwppbmxpbmUgZnVuIHNlcmlhbGl6ZU9yZGVyKG9yZGVyOiBPcmRlciwgc2VjcmV0OiBJbnQpOiBDZWxsIHsKICAgIHJldHVybiBiZWdpbkNlbGwoKQogICAgICAgIC5zdG9yZVVpbnQob3JkZXIuaWQsIDMyKQogICAgICAgIC5zdG9yZUFkZHJlc3Mob3JkZXIuc3JjSmV0dG9uQWRkcmVzcykKICAgICAgICAuc3RvcmVBZGRyZXNzKG9yZGVyLnNlbmRlclB1YktleSkKICAgICAgICAuc3RvcmVVaW50KG9yZGVyLmhhc2hsb2NrLCAyNTYpCiAgICAgICAgLnN0b3JlVWludChvcmRlci50aW1lbG9jaywgMzIpCiAgICAgICAgLnN0b3JlVWludChvcmRlci5hbW91bnQsIDY0KQogICAgICAgIC5zdG9yZUJvb2wob3JkZXIuZmluYWxpemVkKQogICAgICAgIC5zdG9yZVVpbnQob3JkZXIudG90YWxGaWxsZWQsIDY0KQogICAgICAgIC5zdG9yZVVpbnQob3JkZXIuZGlyZWN0aW9uLCA4KQogICAgICAgIC5zdG9yZVVpbnQoc2VjcmV0LCAyNTYpCiAgICAgICAgLmVuZENlbGwoKTsKfQoKLy8gU2VyaWFsaXplIGVzY3JvdyBjb250cmFjdCBkYXRhCmlubGluZSBmdW4gc2VyaWFsaXplRXNjcm93Q29udHJhY3QoZXNjcm93OiBFc2Nyb3dDb250cmFjdCk6IENlbGwgewogICAgcmV0dXJuIGJlZ2luQ2VsbCgpCiAgICAgICAgLnN0b3JlVWludChlc2Nyb3cuY2hhaW5JZCwgMzIpCiAgICAgICAgLnN0b3JlQWRkcmVzcyhlc2Nyb3cuY29udHJhY3RBZGRyZXNzKQogICAgICAgIC5zdG9yZUJvb2woZXNjcm93LmRlcGxveWVkKQogICAgICAgIC5zdG9yZVVpbnQoZXNjcm93LnRvdGFsT3JkZXJzLCAzMikKICAgICAgICAuZW5kQ2VsbCgpOwp9CgovLyBTZXJpYWxpemUgcmVsYXllciBkYXRhCmlubGluZSBmdW4gc2VyaWFsaXplUmVsYXllckRhdGEocmVsYXllcjogUmVsYXllckRhdGEpOiBDZWxsIHsKICAgIHJldHVybiBiZWdpbkNlbGwoKQogICAgICAgIC5zdG9yZUFkZHJlc3MocmVsYXllci5hZGRyZXNzKQogICAgICAgIC5zdG9yZUJvb2wocmVsYXllci53aGl0ZWxpc3RlZCkKICAgICAgICAuc3RvcmVVaW50KHJlbGF5ZXIudG90YWxSZXNvbHZlcywgMzIpCiAgICAgICAgLnN0b3JlVWludChyZWxheWVyLnN1Y2Nlc3NSYXRlLCAxNikKICAgICAgICAuZW5kQ2VsbCgpOwp9","contracts/ton_fusion.tact":"aW1wb3J0ICJAc3RkbGliL2RlcGxveSI7CgppbXBvcnQgIi4vbWVzc2FnZXMudGFjdCI7CmltcG9ydCAiLi9lcnJvcnMudGFjdCI7CmltcG9ydCAiLi9zdGF0ZXMudGFjdCI7CmltcG9ydCAiLi9jb25zdHMudGFjdCI7CmltcG9ydCAiLi91dGlscy50YWN0IjsKCmNvbnRyYWN0IFRvbkZ1c2lvbiB3aXRoIERlcGxveWFibGUgewogICAgCiAgICBvd25lcjogQWRkcmVzczsKICAgIAogICAgLy8gT3JkZXIgc3RvcmFnZQogICAgZXNjcm93TG9jazogbWFwPEludCBhcyB1aW50MjU2LCBPcmRlckNvbmZpZz4gPSBlbXB0eU1hcCgpOyAvLyBDcm9zcy1jaGFpbiBvcmRlcnMKICAgIGVzY3Jvd09yZGVyOiBtYXA8SW50IGFzIHVpbnQyNTYsIE9yZGVyPiA9IGVtcHR5TWFwKCk7IC8vIFNhbWUtY2hhaW4gb3JkZXJzCiAgICAKICAgIC8vIEpldHRvbiBtYW5hZ2VtZW50CiAgICBqZXR0b25zOiBtYXA8QWRkcmVzcywgQ2VsbD4gPSBlbXB0eU1hcCgpOwogICAgamV0dG9uQWNjb3VudDogbWFwPEFkZHJlc3MsIEFkZHJlc3M+ID0gZW1wdHlNYXAoKTsKICAgIAogICAgLy8gQWNjZXNzIGNvbnRyb2wKICAgIHdoaXRlTGlzdHM6IG1hcDxBZGRyZXNzLCBCb29sPiA9IGVtcHR5TWFwKCk7CiAgICByZWxheWVyczogbWFwPEFkZHJlc3MsIFJlbGF5ZXJEYXRhPiA9IGVtcHR5TWFwKCk7CiAgICAKICAgIC8vIEVzY3JvdyBmYWN0b3J5CiAgICBlc2Nyb3dDb250cmFjdHM6IG1hcDxJbnQgYXMgdWludDMyLCBFc2Nyb3dDb250cmFjdD4gPSBlbXB0eU1hcCgpOwogICAgCiAgICAvLyBTdGF0aXN0aWNzCiAgICB0b3RhbE9yZGVyczogSW50IGFzIHVpbnQzMiA9IDA7CiAgICB0b3RhbFZvbHVtZTogSW50IGFzIHVpbnQ2NCA9IDA7CiAgICB0b3RhbFJlc29sdmVzOiBJbnQgYXMgdWludDMyID0gMDsKCiAgICBpbml0KCkgewogICAgICAgIHNlbGYub3duZXIgPSBzZW5kZXIoKTsKICAgIH0KCiAgICByZWNlaXZlKCkgeyAKICAgICAgICBjYXNoYmFjayhzZW5kZXIoKSkgCiAgICB9CgogICAgLy8gV2hpdGVsaXN0IG1hbmFnZW1lbnQKICAgIHJlY2VpdmUoYWN0aW9uOiBTZXRXaGl0ZUxpc3QpIHsKICAgICAgICBpZiAoc2VsZi5vd25lciAhPSBzZW5kZXIoKSkgewogICAgICAgICAgICB0aHJvdyhJTlZBTElEX09XTkVSKTsKICAgICAgICB9CiAgICAgICAgc2VsZi53aGl0ZUxpc3RzLnNldChhY3Rpb24ucmVzb2x2ZXIsIGFjdGlvbi53aGl0ZWxpc3RTdGF0dXMpOwogICAgfQoKICAgIC8vIFJlbGF5ZXIgbWFuYWdlbWVudAogICAgcmVjZWl2ZShhY3Rpb246IFJlZ2lzdGVyUmVsYXllcikgewogICAgICAgIGlmIChzZWxmLm93bmVyICE9IHNlbmRlcigpKSB7CiAgICAgICAgICAgIHRocm93KElOVkFMSURfT1dORVIpOwogICAgICAgIH0KICAgICAgICAKICAgICAgICBsZXQgcmVsYXllckRhdGEgPSBSZWxheWVyRGF0YSB7CiAgICAgICAgICAgIGFkZHJlc3M6IGFjdGlvbi5yZWxheWVyLAogICAgICAgICAgICB3aGl0ZWxpc3RlZDogdHJ1ZSwKICAgICAgICAgICAgdG90YWxSZXNvbHZlczogMCwKICAgICAgICAgICAgc3VjY2Vzc1JhdGU6IDAsCiAgICAgICAgfTsKICAgICAgICAKICAgICAgICBzZWxmLnJlbGF5ZXJzLnNldChhY3Rpb24ucmVsYXllciwgcmVsYXllckRhdGEpOwogICAgfQoKICAgIC8vIEpldHRvbiBub3RpZmljYXRpb25zIHdpdGggYWN0aW9ucwogICAgcmVjZWl2ZShhY3Rpb246IEpldHRvbk5vdGlmeVdpdGhBY3Rpb25SZXF1ZXN0KSB7CiAgICAgICAgaWYgKGFjdGlvbi5hY3Rpb25PcGNvZGUgPT0gTG9ja0pldHRvbi5vcGNvZGUoKSkgewogICAgICAgICAgICBsZXQgbXNnID0gTG9ja0pldHRvbi5mcm9tQ2VsbChhY3Rpb24uYWN0aW9uUGF5bG9hZCk7CiAgICAgICAgICAgIGxldCB3YWxsZXQ6IEFkZHJlc3MgPSBjYWxjdWxhdGVKZXR0b25XYWxsZXRBZGRyZXNzKGFjdGlvbi5zZW5kZXIsIG1zZy5vcmRlckNvbmZpZy5zcmNKZXR0b25BZGRyZXNzLCBtc2cuamV0dG9uKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIGlmICh3YWxsZXQgPT0gc2VuZGVyKCkpIHsKICAgICAgICAgICAgICAgIHNlbGYuY3JlYXRlKGFjdGlvbi5hY3Rpb25QYXlsb2FkKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGNhc2hiYWNrKHNlbmRlcigpKTsKICAgICAgICAgICAgICAgIHRocm93KElOVkFMSURfT1dORVIpOwogICAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIGlmIChhY3Rpb24uYWN0aW9uT3Bjb2RlID09IENyZWF0ZU9yZGVyLm9wY29kZSgpKSB7CiAgICAgICAgICAgIGxldCBtc2cgPSBDcmVhdGVPcmRlci5mcm9tQ2VsbChhY3Rpb24uYWN0aW9uUGF5bG9hZCk7CiAgICAgICAgICAgIGxldCB3YWxsZXQ6IEFkZHJlc3MgPSBjYWxjdWxhdGVKZXR0b25XYWxsZXRBZGRyZXNzKGFjdGlvbi5zZW5kZXIsIG1zZy5vcmRlckNvbmZpZy5zcmNKZXR0b25BZGRyZXNzLCBtc2cuamV0dG9uKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIGlmICh3YWxsZXQgPT0gc2VuZGVyKCkpIHsKICAgICAgICAgICAgICAgIHNlbGYubWFrZU9yZGVyKGFjdGlvbi5hY3Rpb25QYXlsb2FkKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGNhc2hiYWNrKHNlbmRlcigpKTsKICAgICAgICAgICAgICAgIHRocm93KElOVkFMSURfT1dORVIpOwogICAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIGlmIChhY3Rpb24uYWN0aW9uT3Bjb2RlID09IENyZWF0ZUVWTVRvVE9OT3JkZXIub3Bjb2RlKCkpIHsKICAgICAgICAgICAgbGV0IG1zZyA9IENyZWF0ZUVWTVRvVE9OT3JkZXIuZnJvbUNlbGwoYWN0aW9uLmFjdGlvblBheWxvYWQpOwogICAgICAgICAgICBzZWxmLmNyZWF0ZUVWTVRvVE9OT3JkZXIoYWN0aW9uLmFjdGlvblBheWxvYWQpOwogICAgICAgIH0gZWxzZSBpZiAoYWN0aW9uLmFjdGlvbk9wY29kZSA9PSBDcmVhdGVUT05Ub0VWTU9yZGVyLm9wY29kZSgpKSB7CiAgICAgICAgICAgIGxldCBtc2cgPSBDcmVhdGVUT05Ub0VWTU9yZGVyLmZyb21DZWxsKGFjdGlvbi5hY3Rpb25QYXlsb2FkKTsKICAgICAgICAgICAgc2VsZi5jcmVhdGVUT05Ub0VWTU9yZGVyKGFjdGlvbi5hY3Rpb25QYXlsb2FkKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBjYXNoYmFjayhzZW5kZXIoKSk7CiAgICAgICAgfQogICAgfQoKICAgIC8vIEZ1bmQgbWFuYWdlbWVudAogICAgcmVjZWl2ZShhY3Rpb246IEdldEZ1bmQpIHsKICAgICAgICBzZWxmLmdldEZ1bmQoYWN0aW9uKTsKICAgIH0KCiAgICByZWNlaXZlKGFjdGlvbjogUmVmdW5kKSB7CiAgICAgICAgc2VsZi5yZWZ1bmQoYWN0aW9uKTsKICAgIH0KCiAgICByZWNlaXZlKGFjdGlvbjogUmVmdW5kT3JkZXIpIHsKICAgICAgICBzZWxmLnJlZnVuZE9yZGVyKGFjdGlvbik7CiAgICB9CgogICAgLy8gUGFydGlhbCBmaWxsIG1hbmFnZW1lbnQKICAgIHJlY2VpdmUoYWN0aW9uOiBQYXJ0aWFsRmlsbCkgewogICAgICAgIHNlbGYucGFydGlhbEZpbGwoYWN0aW9uKTsKICAgIH0KCiAgICByZWNlaXZlKGFjdGlvbjogQ29tcGxldGVQYXJ0aWFsRmlsbCkgewogICAgICAgIHNlbGYuY29tcGxldGVQYXJ0aWFsRmlsbChhY3Rpb24pOwogICAgfQoKICAgIC8vIEVzY3JvdyBmYWN0b3J5CiAgICByZWNlaXZlKGFjdGlvbjogRGVwbG95RXNjcm93KSB7CiAgICAgICAgc2VsZi5kZXBsb3lFc2Nyb3coYWN0aW9uKTsKICAgIH0KCiAgICAvLyBSZWxheWVyIHN0YXRzIHVwZGF0ZQogICAgcmVjZWl2ZShhY3Rpb246IFVwZGF0ZVJlbGF5ZXJTdGF0cykgewogICAgICAgIHNlbGYudXBkYXRlUmVsYXllclN0YXRzKGFjdGlvbik7CiAgICB9CgogICAgLy8gQ3JlYXRlIGNyb3NzLWNoYWluIG9yZGVyIChUT04g4oaSIEVWTSkKICAgIGZ1biBjcmVhdGUocGF5bG9hZDogQ2VsbCkgewogICAgICAgIGxldCBtc2cgPSBMb2NrSmV0dG9uLmZyb21DZWxsKHBheWxvYWQpOwoKICAgICAgICBpZiAoc2VsZi53aGl0ZUxpc3RzLmdldChzZW5kZXIoKSkgPT0gdHJ1ZSkgewogICAgICAgICAgICB0aHJvdyhJTlZBTElEX1dISVRFTElTVCk7CiAgICAgICAgfQoKICAgICAgICBpZiAobm93KCkgPj0gbXNnLm9yZGVyQ29uZmlnLnRpbWVsb2NrKSB7CiAgICAgICAgICAgIHRocm93KE9SREVSX0VYUElSRUQpOwogICAgICAgIH0KCiAgICAgICAgaWYgKHNlbGYuZXNjcm93TG9jay5nZXQobXNnLm9yZGVyQ29uZmlnLmhhc2hsb2NrKSAhPSBudWxsKSB7CiAgICAgICAgICAgIHRocm93KE9SREVSX0FMUkVBRFlfRVhJU1RTKTsKICAgICAgICB9CgogICAgICAgIC8vIFNldCBkaXJlY3Rpb24KICAgICAgICBtc2cub3JkZXJDb25maWcuZGlyZWN0aW9uID0gVE9OX1RPX0VWTTsKCiAgICAgICAgc2VsZi5qZXR0b25zLnNldChtc2cub3JkZXJDb25maWcuc3JjSmV0dG9uQWRkcmVzcywgbXNnLmpldHRvbik7CiAgICAgICAgc2VsZi5qZXR0b25BY2NvdW50LnNldChtc2cub3JkZXJDb25maWcuc3JjSmV0dG9uQWRkcmVzcywgc2VuZGVyKCkpOwogICAgICAgIHNlbGYuZXNjcm93TG9jay5zZXQobXNnLm9yZGVyQ29uZmlnLmhhc2hsb2NrLCBtc2cub3JkZXJDb25maWcpOwogICAgICAgIAogICAgICAgIHNlbGYudG90YWxPcmRlcnMgPSBzZWxmLnRvdGFsT3JkZXJzICsgMTsKICAgICAgICBzZWxmLnRvdGFsVm9sdW1lID0gc2VsZi50b3RhbFZvbHVtZSArIG1zZy5vcmRlckNvbmZpZy5hbW91bnQ7CiAgICB9CgogICAgLy8gQ3JlYXRlIHNhbWUtY2hhaW4gb3JkZXIgKFRPTiDihpIgVE9OKQogICAgZnVuIG1ha2VPcmRlcihwYXlsb2FkOiBDZWxsKSB7CiAgICAgICAgbGV0IG1zZyA9IENyZWF0ZU9yZGVyLmZyb21DZWxsKHBheWxvYWQpOwoKICAgICAgICBpZiAoc2VsZi53aGl0ZUxpc3RzLmdldChzZW5kZXIoKSkgPT0gdHJ1ZSkgewogICAgICAgICAgICB0aHJvdyhJTlZBTElEX1dISVRFTElTVCk7CiAgICAgICAgfQoKICAgICAgICBpZiAobm93KCkgPj0gbXNnLm9yZGVyQ29uZmlnLnRpbWVsb2NrKSB7CiAgICAgICAgICAgIHRocm93KE9SREVSX0VYUElSRUQpOwogICAgICAgIH0KCiAgICAgICAgaWYgKHNlbGYuZXNjcm93T3JkZXIuZ2V0KG1zZy5vcmRlckNvbmZpZy5oYXNobG9jaykgIT0gbnVsbCkgewogICAgICAgICAgICB0aHJvdyhPUkRFUl9BTFJFQURZX0VYSVNUUyk7CiAgICAgICAgfQoKICAgICAgICAvLyBTZXQgZGlyZWN0aW9uCiAgICAgICAgbXNnLm9yZGVyQ29uZmlnLmRpcmVjdGlvbiA9IFRPTl9UT19UT047CgogICAgICAgIHNlbGYuamV0dG9ucy5zZXQobXNnLm9yZGVyQ29uZmlnLnNyY0pldHRvbkFkZHJlc3MsIG1zZy5qZXR0b24pOwogICAgICAgIHNlbGYuamV0dG9uQWNjb3VudC5zZXQobXNnLm9yZGVyQ29uZmlnLnNyY0pldHRvbkFkZHJlc3MsIHNlbmRlcigpKTsKICAgICAgICBzZWxmLmVzY3Jvd09yZGVyLnNldChtc2cub3JkZXJDb25maWcuaGFzaGxvY2ssIG1zZy5vcmRlckNvbmZpZyk7CiAgICAgICAgCiAgICAgICAgc2VsZi50b3RhbE9yZGVycyA9IHNlbGYudG90YWxPcmRlcnMgKyAxOwogICAgICAgIHNlbGYudG90YWxWb2x1bWUgPSBzZWxmLnRvdGFsVm9sdW1lICsgbXNnLm9yZGVyQ29uZmlnLmFtb3VudDsKICAgIH0KCiAgICAvLyBDcmVhdGUgRVZNIOKGkiBUT04gb3JkZXIKICAgIGZ1biBjcmVhdGVFVk1Ub1RPTk9yZGVyKHBheWxvYWQ6IENlbGwpIHsKICAgICAgICBsZXQgbXNnID0gQ3JlYXRlRVZNVG9UT05PcmRlci5mcm9tQ2VsbChwYXlsb2FkKTsKCiAgICAgICAgaWYgKHNlbGYud2hpdGVMaXN0cy5nZXQoc2VuZGVyKCkpID09IHRydWUpIHsKICAgICAgICAgICAgdGhyb3coSU5WQUxJRF9XSElURUxJU1QpOwogICAgICAgIH0KCiAgICAgICAgaWYgKG5vdygpID49IG1zZy5vcmRlckNvbmZpZy50aW1lbG9jaykgewogICAgICAgICAgICB0aHJvdyhPUkRFUl9FWFBJUkVEKTsKICAgICAgICB9CgogICAgICAgIGlmIChzZWxmLmVzY3Jvd0xvY2suZ2V0KG1zZy5vcmRlckNvbmZpZy5oYXNobG9jaykgIT0gbnVsbCkgewogICAgICAgICAgICB0aHJvdyhPUkRFUl9BTFJFQURZX0VYSVNUUyk7CiAgICAgICAgfQoKICAgICAgICAvLyBTZXQgZGlyZWN0aW9uCiAgICAgICAgbXNnLm9yZGVyQ29uZmlnLmRpcmVjdGlvbiA9IEVWTV9UT19UT047CgogICAgICAgIHNlbGYuZXNjcm93TG9jay5zZXQobXNnLm9yZGVyQ29uZmlnLmhhc2hsb2NrLCBtc2cub3JkZXJDb25maWcpOwogICAgICAgIAogICAgICAgIHNlbGYudG90YWxPcmRlcnMgPSBzZWxmLnRvdGFsT3JkZXJzICsgMTsKICAgICAgICBzZWxmLnRvdGFsVm9sdW1lID0gc2VsZi50b3RhbFZvbHVtZSArIG1zZy5vcmRlckNvbmZpZy5hbW91bnQ7CiAgICB9CgogICAgLy8gQ3JlYXRlIFRPTiDihpIgRVZNIG9yZGVyCiAgICBmdW4gY3JlYXRlVE9OVG9FVk1PcmRlcihwYXlsb2FkOiBDZWxsKSB7CiAgICAgICAgbGV0IG1zZyA9IENyZWF0ZVRPTlRvRVZNT3JkZXIuZnJvbUNlbGwocGF5bG9hZCk7CgogICAgICAgIGlmIChzZWxmLndoaXRlTGlzdHMuZ2V0KHNlbmRlcigpKSA9PSB0cnVlKSB7CiAgICAgICAgICAgIHRocm93KElOVkFMSURfV0hJVEVMSVNUKTsKICAgICAgICB9CgogICAgICAgIGlmIChub3coKSA+PSBtc2cub3JkZXJDb25maWcudGltZWxvY2spIHsKICAgICAgICAgICAgdGhyb3coT1JERVJfRVhQSVJFRCk7CiAgICAgICAgfQoKICAgICAgICBpZiAoc2VsZi5lc2Nyb3dMb2NrLmdldChtc2cub3JkZXJDb25maWcuaGFzaGxvY2spICE9IG51bGwpIHsKICAgICAgICAgICAgdGhyb3coT1JERVJfQUxSRUFEWV9FWElTVFMpOwogICAgICAgIH0KCiAgICAgICAgLy8gU2V0IGRpcmVjdGlvbgogICAgICAgIG1zZy5vcmRlckNvbmZpZy5kaXJlY3Rpb24gPSBUT05fVE9fRVZNOwoKICAgICAgICBzZWxmLmVzY3Jvd0xvY2suc2V0KG1zZy5vcmRlckNvbmZpZy5oYXNobG9jaywgbXNnLm9yZGVyQ29uZmlnKTsKICAgICAgICAKICAgICAgICBzZWxmLnRvdGFsT3JkZXJzID0gc2VsZi50b3RhbE9yZGVycyArIDE7CiAgICAgICAgc2VsZi50b3RhbFZvbHVtZSA9IHNlbGYudG90YWxWb2x1bWUgKyBtc2cub3JkZXJDb25maWcuYW1vdW50OwogICAgfQoKICAgIC8vIFBhcnRpYWwgZmlsbCBmdW5jdGlvbmFsaXR5CiAgICBmdW4gcGFydGlhbEZpbGwobXNnOiBQYXJ0aWFsRmlsbCkgewogICAgICAgIGxldCBvcmRlckNvbmZpZ0RhdGEgPSBzZWxmLmVzY3Jvd0xvY2suZ2V0KG1zZy5vcmRlckhhc2gpOwogICAgICAgIGlmIChvcmRlckNvbmZpZ0RhdGEgIT0gbnVsbCkgewogICAgICAgICAgICBsZXQgb3JkZXIgPSBvcmRlckNvbmZpZ0RhdGEhITsKICAgICAgICAgICAgaWYgKG9yZGVyLmZpbmFsaXplZCkgewogICAgICAgICAgICAgICAgdGhyb3coT1JERVJfQUxSRUFEWV9GSU5BTElaRUQpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChtc2cuZmlsbEFtb3VudCA+IG9yZGVyLmFtb3VudCAtIG9yZGVyLnRvdGFsRmlsbGVkKSB7CiAgICAgICAgICAgICAgICB0aHJvdyhQQVJUSUFMX0ZJTExfRVhDRUVEU19PUkRFUik7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKG9yZGVyLnBhcnRpYWxGaWxscy5nZXQobXNnLnNlY3JldCkgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgdGhyb3coU0VDUkVUX0FMUkVBRFlfVVNFRCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgb3JkZXIucGFydGlhbEZpbGxzLnNldChtc2cuc2VjcmV0LCBtc2cuZmlsbEFtb3VudCk7CiAgICAgICAgICAgIG9yZGVyLnRvdGFsRmlsbGVkID0gb3JkZXIudG90YWxGaWxsZWQgKyBtc2cuZmlsbEFtb3VudDsKICAgICAgICAgICAgbGV0IHJlbGF5ZXJEYXRhID0gc2VsZi5yZWxheWVycy5nZXQobXNnLnJlc29sdmVyKTsKICAgICAgICAgICAgaWYgKHJlbGF5ZXJEYXRhICE9IG51bGwpIHsKICAgICAgICAgICAgICAgIGxldCB1cGRhdGVkUmVsYXllciA9IFJlbGF5ZXJEYXRhewogICAgICAgICAgICAgICAgICAgIGFkZHJlc3M6IHJlbGF5ZXJEYXRhISEuYWRkcmVzcywKICAgICAgICAgICAgICAgICAgICB3aGl0ZWxpc3RlZDogcmVsYXllckRhdGEhIS53aGl0ZWxpc3RlZCwKICAgICAgICAgICAgICAgICAgICB0b3RhbFJlc29sdmVzOiByZWxheWVyRGF0YSEhLnRvdGFsUmVzb2x2ZXMgKyAxLAogICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3NSYXRlOiByZWxheWVyRGF0YSEhLnN1Y2Nlc3NSYXRlCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgc2VsZi5yZWxheWVycy5zZXQobXNnLnJlc29sdmVyLCB1cGRhdGVkUmVsYXllcik7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgc2VsZi50b3RhbFJlc29sdmVzID0gc2VsZi50b3RhbFJlc29sdmVzICsgMTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBsZXQgb3JkZXJEYXRhID0gc2VsZi5lc2Nyb3dPcmRlci5nZXQobXNnLm9yZGVySGFzaCk7CiAgICAgICAgaWYgKG9yZGVyRGF0YSAhPSBudWxsKSB7CiAgICAgICAgICAgIGxldCBvcmRlciA9IG9yZGVyRGF0YSEhOwogICAgICAgICAgICBpZiAob3JkZXIuZmluYWxpemVkKSB7CiAgICAgICAgICAgICAgICB0aHJvdyhPUkRFUl9BTFJFQURZX0ZJTkFMSVpFRCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKG1zZy5maWxsQW1vdW50ID4gb3JkZXIuYW1vdW50IC0gb3JkZXIudG90YWxGaWxsZWQpIHsKICAgICAgICAgICAgICAgIHRocm93KFBBUlRJQUxfRklMTF9FWENFRURTX09SREVSKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAob3JkZXIucGFydGlhbEZpbGxzLmdldChtc2cuc2VjcmV0KSAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICB0aHJvdyhTRUNSRVRfQUxSRUFEWV9VU0VEKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBvcmRlci5wYXJ0aWFsRmlsbHMuc2V0KG1zZy5zZWNyZXQsIG1zZy5maWxsQW1vdW50KTsKICAgICAgICAgICAgb3JkZXIudG90YWxGaWxsZWQgPSBvcmRlci50b3RhbEZpbGxlZCArIG1zZy5maWxsQW1vdW50OwogICAgICAgICAgICBsZXQgcmVsYXllckRhdGEgPSBzZWxmLnJlbGF5ZXJzLmdldChtc2cucmVzb2x2ZXIpOwogICAgICAgICAgICBpZiAocmVsYXllckRhdGEgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgbGV0IHVwZGF0ZWRSZWxheWVyID0gUmVsYXllckRhdGF7CiAgICAgICAgICAgICAgICAgICAgYWRkcmVzczogcmVsYXllckRhdGEhIS5hZGRyZXNzLAogICAgICAgICAgICAgICAgICAgIHdoaXRlbGlzdGVkOiByZWxheWVyRGF0YSEhLndoaXRlbGlzdGVkLAogICAgICAgICAgICAgICAgICAgIHRvdGFsUmVzb2x2ZXM6IHJlbGF5ZXJEYXRhISEudG90YWxSZXNvbHZlcyArIDEsCiAgICAgICAgICAgICAgICAgICAgc3VjY2Vzc1JhdGU6IHJlbGF5ZXJEYXRhISEuc3VjY2Vzc1JhdGUKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBzZWxmLnJlbGF5ZXJzLnNldChtc2cucmVzb2x2ZXIsIHVwZGF0ZWRSZWxheWVyKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBzZWxmLnRvdGFsUmVzb2x2ZXMgPSBzZWxmLnRvdGFsUmVzb2x2ZXMgKyAxOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIHRocm93KElOVkFMSURfSEFTSCk7CiAgICB9CgogICAgLy8gQ29tcGxldGUgcGFydGlhbCBmaWxsCiAgICBmdW4gY29tcGxldGVQYXJ0aWFsRmlsbChtc2c6IENvbXBsZXRlUGFydGlhbEZpbGwpIHsKICAgICAgICBsZXQgb3JkZXJDb25maWdEYXRhID0gc2VsZi5lc2Nyb3dMb2NrLmdldChtc2cub3JkZXJIYXNoKTsKICAgICAgICBpZiAob3JkZXJDb25maWdEYXRhICE9IG51bGwpIHsKICAgICAgICAgICAgbGV0IG9yZGVyID0gb3JkZXJDb25maWdEYXRhISE7CiAgICAgICAgICAgIGxldCBmaWxsQW1vdW50ID0gb3JkZXIucGFydGlhbEZpbGxzLmdldChtc2cuc2VjcmV0KTsKICAgICAgICAgICAgaWYgKGZpbGxBbW91bnQgPT0gbnVsbCkgewogICAgICAgICAgICAgICAgdGhyb3coT1JERVJfTk9UX1BBUlRJQUxMWV9GSUxMRUQpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChvcmRlci5kaXJlY3Rpb24gPT0gVE9OX1RPX0VWTSB8fCBvcmRlci5kaXJlY3Rpb24gPT0gVE9OX1RPX1RPTikgewogICAgICAgICAgICAgICAgc2VsZi5wcm9jZXNzSmV0dG9uVHJhbnNmZXIob3JkZXIsIGZpbGxBbW91bnQhISwgbXNnLnNlY3JldCk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBzZWxmLnByb2Nlc3NFVk1UcmFuc2ZlcihvcmRlciwgZmlsbEFtb3VudCEhLCBtc2cuc2VjcmV0KTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIGxldCBvcmRlckRhdGEgPSBzZWxmLmVzY3Jvd09yZGVyLmdldChtc2cub3JkZXJIYXNoKTsKICAgICAgICBpZiAob3JkZXJEYXRhICE9IG51bGwpIHsKICAgICAgICAgICAgbGV0IG9yZGVyID0gb3JkZXJEYXRhISE7CiAgICAgICAgICAgIGxldCBmaWxsQW1vdW50ID0gb3JkZXIucGFydGlhbEZpbGxzLmdldChtc2cuc2VjcmV0KTsKICAgICAgICAgICAgaWYgKGZpbGxBbW91bnQgPT0gbnVsbCkgewogICAgICAgICAgICAgICAgdGhyb3coT1JERVJfTk9UX1BBUlRJQUxMWV9GSUxMRUQpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vIE9ubHkgVE9OX1RPX1RPTiBpcyBwb3NzaWJsZSBmb3IgT3JkZXIKICAgICAgICAgICAgc2VsZi5wcm9jZXNzSmV0dG9uVHJhbnNmZXJPcmRlcihvcmRlciwgZmlsbEFtb3VudCEhLCBtc2cuc2VjcmV0KTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICB0aHJvdyhJTlZBTElEX0hBU0gpOwogICAgfQoKICAgIC8vIEdldCBmdW5kIHdpdGggc2VjcmV0CiAgICBmdW4gZ2V0RnVuZChtc2c6IEdldEZ1bmQpIHsKICAgICAgICBsZXQgZGF0YSA9IHNlbGYuZXNjcm93TG9jay5nZXQobXNnLmhhc2gpOwogICAgICAgIGlmIChkYXRhID09IG51bGwpIHsKICAgICAgICAgICAgdGhyb3coSU5WQUxJRF9IQVNIKTsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgbGV0IG9yZGVyID0gZGF0YSEhOwogICAgICAgIGxldCBzZWNyZXRIYXNoID0ga2VjY2FrQnl0ZXMzMihtc2cuc2VjcmV0KTsKICAgICAgICAKICAgICAgICBpZiAobm93KCkgPiBvcmRlci50aW1lbG9jaykgewogICAgICAgICAgICB0aHJvdyhPUkRFUl9FWFBJUkVEKTsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgaWYgKG9yZGVyLmZpbmFsaXplZCkgewogICAgICAgICAgICB0aHJvdyhPUkRFUl9BTFJFQURZX0ZJTkFMSVpFRCk7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIGlmIChzZWNyZXRIYXNoICE9IG9yZGVyLmhhc2hsb2NrKSB7CiAgICAgICAgICAgIHRocm93KElOVkFMSURfU0VDUkVUKTsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgb3JkZXIuZmluYWxpemVkID0gdHJ1ZTsKICAgICAgICBzZWxmLnByb2Nlc3NKZXR0b25UcmFuc2ZlcihvcmRlciwgb3JkZXIuYW1vdW50LCBtc2cuc2VjcmV0KTsKICAgIH0KCiAgICAvLyBSZWZ1bmQgY3Jvc3MtY2hhaW4gb3JkZXIKICAgIGZ1biByZWZ1bmQobXNnOiBSZWZ1bmQpIHsKICAgICAgICBsZXQgZGF0YSA9IHNlbGYuZXNjcm93TG9jay5nZXQobXNnLmhhc2gpOwogICAgICAgIGlmIChkYXRhID09IG51bGwpIHsKICAgICAgICAgICAgdGhyb3coSU5WQUxJRF9IQVNIKTsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgbGV0IG9yZGVyID0gZGF0YSEhOwogICAgICAgIAogICAgICAgIGlmIChub3coKSA8IG9yZGVyLnRpbWVsb2NrKSB7CiAgICAgICAgICAgIHRocm93KE9SREVSX05PVF9FWFBJUkVEKTsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgaWYgKG9yZGVyLmZpbmFsaXplZCkgewogICAgICAgICAgICB0aHJvdyhPUkRFUl9BTFJFQURZX0ZJTkFMSVpFRCk7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIG9yZGVyLmZpbmFsaXplZCA9IHRydWU7CiAgICAgICAgc2VsZi5wcm9jZXNzSmV0dG9uUmVmdW5kKG9yZGVyKTsKICAgIH0KCiAgICAvLyBSZWZ1bmQgc2FtZS1jaGFpbiBvcmRlcgogICAgZnVuIHJlZnVuZE9yZGVyKG1zZzogUmVmdW5kT3JkZXIpIHsKICAgICAgICBsZXQgZGF0YSA9IHNlbGYuZXNjcm93T3JkZXIuZ2V0KG1zZy5oYXNoKTsKICAgICAgICBpZiAoZGF0YSA9PSBudWxsKSB7CiAgICAgICAgICAgIHRocm93KElOVkFMSURfSEFTSCk7CiAgICAgICAgfQogICAgICAgIGxldCBvcmRlciA9IGRhdGEhITsKICAgICAgICBpZiAobm93KCkgPCBvcmRlci50aW1lbG9jaykgewogICAgICAgICAgICB0aHJvdyhPUkRFUl9OT1RfRVhQSVJFRCk7CiAgICAgICAgfQogICAgICAgIGlmIChvcmRlci5maW5hbGl6ZWQpIHsKICAgICAgICAgICAgdGhyb3coT1JERVJfQUxSRUFEWV9GSU5BTElaRUQpOwogICAgICAgIH0KICAgICAgICBvcmRlci5maW5hbGl6ZWQgPSB0cnVlOwogICAgICAgIHNlbGYucHJvY2Vzc0pldHRvblJlZnVuZE9yZGVyKG9yZGVyKTsKICAgIH0KCiAgICAvLyBEZXBsb3kgZXNjcm93IGNvbnRyYWN0CiAgICBmdW4gZGVwbG95RXNjcm93KG1zZzogRGVwbG95RXNjcm93KSB7CiAgICAgICAgaWYgKHNlbGYub3duZXIgIT0gc2VuZGVyKCkpIHsKICAgICAgICAgICAgdGhyb3coSU5WQUxJRF9PV05FUik7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIGxldCBlc2Nyb3dDb250cmFjdCA9IEVzY3Jvd0NvbnRyYWN0IHsKICAgICAgICAgICAgY2hhaW5JZDogbXNnLmNoYWluSWQsCiAgICAgICAgICAgIGNvbnRyYWN0QWRkcmVzczogbXNnLnRhcmdldEFkZHJlc3MsCiAgICAgICAgICAgIGRlcGxveWVkOiB0cnVlLAogICAgICAgICAgICB0b3RhbE9yZGVyczogMCwKICAgICAgICB9OwogICAgICAgIAogICAgICAgIHNlbGYuZXNjcm93Q29udHJhY3RzLnNldChtc2cuY2hhaW5JZCwgZXNjcm93Q29udHJhY3QpOwogICAgfQoKICAgIC8vIFVwZGF0ZSByZWxheWVyIHN0YXRpc3RpY3MKICAgIGZ1biB1cGRhdGVSZWxheWVyU3RhdHMobXNnOiBVcGRhdGVSZWxheWVyU3RhdHMpIHsKICAgICAgICBsZXQgcmVsYXllckRhdGEgPSBzZWxmLnJlbGF5ZXJzLmdldChtc2cucmVsYXllcik7CiAgICAgICAgaWYgKHJlbGF5ZXJEYXRhID09IG51bGwpIHsKICAgICAgICAgICAgdGhyb3coSU5WQUxJRF9SRUxBWUVSKTsKICAgICAgICB9CiAgICAgICAgbGV0IG5ld1RvdGFsUmVzb2x2ZXMgPSByZWxheWVyRGF0YSEhLnRvdGFsUmVzb2x2ZXMgKyAxOwogICAgICAgIGxldCBuZXdTdWNjZXNzUmF0ZSA9IHJlbGF5ZXJEYXRhISEuc3VjY2Vzc1JhdGU7CiAgICAgICAgaWYgKG1zZy5zdWNjZXNzKSB7CiAgICAgICAgICAgIG5ld1N1Y2Nlc3NSYXRlID0gbWluKHJlbGF5ZXJEYXRhISEuc3VjY2Vzc1JhdGUgKyAxLCAxMDApOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIG5ld1N1Y2Nlc3NSYXRlID0gbWF4KHJlbGF5ZXJEYXRhISEuc3VjY2Vzc1JhdGUgLSAxLCAwKTsKICAgICAgICB9CiAgICAgICAgbGV0IHVwZGF0ZWRSZWxheWVyID0gUmVsYXllckRhdGF7CiAgICAgICAgICAgIGFkZHJlc3M6IHJlbGF5ZXJEYXRhISEuYWRkcmVzcywKICAgICAgICAgICAgd2hpdGVsaXN0ZWQ6IHJlbGF5ZXJEYXRhISEud2hpdGVsaXN0ZWQsCiAgICAgICAgICAgIHRvdGFsUmVzb2x2ZXM6IG5ld1RvdGFsUmVzb2x2ZXMsCiAgICAgICAgICAgIHN1Y2Nlc3NSYXRlOiBuZXdTdWNjZXNzUmF0ZQogICAgICAgIH07CiAgICAgICAgc2VsZi5yZWxheWVycy5zZXQobXNnLnJlbGF5ZXIsIHVwZGF0ZWRSZWxheWVyKTsKICAgIH0KCiAgICAvLyBQcm9jZXNzIGpldHRvbiB0cmFuc2ZlciBmb3IgT3JkZXJDb25maWcKICAgIGZ1biBwcm9jZXNzSmV0dG9uVHJhbnNmZXIob3JkZXI6IE9yZGVyQ29uZmlnLCBhbW91bnQ6IEludCwgc2VjcmV0OiBJbnQpIHsKICAgICAgICBsZXQgamV0dG9uV2FsbGV0ID0gc2VsZi5qZXR0b25BY2NvdW50LmdldChvcmRlci5zcmNKZXR0b25BZGRyZXNzKTsKICAgICAgICBsZXQgY3R4ID0gY29udGV4dCgpOwogICAgICAgIGxldCByZW1haW5pbmdWYWx1ZSA9IGN0eC52YWx1ZSAtIHByaWNlT2ZKZXR0b25Gb3J3YXJkKGN0eC5yZWFkRm9yd2FyZEZlZSgpLCAxKTsKICAgICAgICByZW1haW5pbmdWYWx1ZSA9IG1pbihyZW1haW5pbmdWYWx1ZSwgMCk7CiAgICAgICAgbWVzc2FnZShNZXNzYWdlUGFyYW1ldGVycyB7CiAgICAgICAgICAgIHRvOiBqZXR0b25XYWxsZXQhISwKICAgICAgICAgICAgdmFsdWU6IDAsCiAgICAgICAgICAgIG1vZGU6IFNlbmRSZW1haW5pbmdWYWx1ZSwKICAgICAgICAgICAgYm9keTogU2VuZFZpYUpldHRvblRyYW5zZmVyIHsKICAgICAgICAgICAgICAgIHF1ZXJ5SWQ6IDAsCiAgICAgICAgICAgICAgICBhbW91bnQ6IGFtb3VudCwKICAgICAgICAgICAgICAgIHJlc3BvbnNlRGVzdGluYXRpb246IG9yZGVyLnJlY2VpdmVyUHViS2V5LAogICAgICAgICAgICAgICAgZGVzdGluYXRpb246IG9yZGVyLnJlY2VpdmVyUHViS2V5LAogICAgICAgICAgICAgICAgZm9yd2FyZFRvbkFtb3VudDogcmVtYWluaW5nVmFsdWUsCiAgICAgICAgICAgICAgICBmb3J3YXJkUGF5bG9hZDogYmVnaW5DZWxsKCkuc3RvcmVSZWYoc2VyaWFsaXplT3JkZXJDb25maWcob3JkZXIsIHNlY3JldCkpLmVuZENlbGwoKS5iZWdpblBhcnNlKCksCiAgICAgICAgICAgICAgICBjdXN0b21QYXlsb2FkOiBudWxsLAogICAgICAgICAgICB9LnRvQ2VsbCgpLAogICAgICAgIH0pOwogICAgfQoKICAgIC8vIFByb2Nlc3MgamV0dG9uIHRyYW5zZmVyIGZvciBPcmRlciAoVE9OX1RPX1RPTikKICAgIGZ1biBwcm9jZXNzSmV0dG9uVHJhbnNmZXJPcmRlcihvcmRlcjogT3JkZXIsIGFtb3VudDogSW50LCBzZWNyZXQ6IEludCkgewogICAgICAgIGxldCBqZXR0b25XYWxsZXQgPSBzZWxmLmpldHRvbkFjY291bnQuZ2V0KG9yZGVyLnNyY0pldHRvbkFkZHJlc3MpOwogICAgICAgIGxldCBjdHggPSBjb250ZXh0KCk7CiAgICAgICAgbGV0IHJlbWFpbmluZ1ZhbHVlID0gY3R4LnZhbHVlIC0gcHJpY2VPZkpldHRvbkZvcndhcmQoY3R4LnJlYWRGb3J3YXJkRmVlKCksIDEpOwogICAgICAgIHJlbWFpbmluZ1ZhbHVlID0gbWluKHJlbWFpbmluZ1ZhbHVlLCAwKTsKICAgICAgICBtZXNzYWdlKE1lc3NhZ2VQYXJhbWV0ZXJzIHsKICAgICAgICAgICAgdG86IGpldHRvbldhbGxldCEhLAogICAgICAgICAgICB2YWx1ZTogMCwKICAgICAgICAgICAgbW9kZTogU2VuZFJlbWFpbmluZ1ZhbHVlLAogICAgICAgICAgICBib2R5OiBTZW5kVmlhSmV0dG9uVHJhbnNmZXIgewogICAgICAgICAgICAgICAgcXVlcnlJZDogMCwKICAgICAgICAgICAgICAgIGFtb3VudDogYW1vdW50LAogICAgICAgICAgICAgICAgcmVzcG9uc2VEZXN0aW5hdGlvbjogb3JkZXIuc2VuZGVyUHViS2V5LAogICAgICAgICAgICAgICAgZGVzdGluYXRpb246IG9yZGVyLnNlbmRlclB1YktleSwKICAgICAgICAgICAgICAgIGZvcndhcmRUb25BbW91bnQ6IHJlbWFpbmluZ1ZhbHVlLAogICAgICAgICAgICAgICAgZm9yd2FyZFBheWxvYWQ6IGJlZ2luQ2VsbCgpLnN0b3JlUmVmKHNlcmlhbGl6ZU9yZGVyKG9yZGVyLCBzZWNyZXQpKS5lbmRDZWxsKCkuYmVnaW5QYXJzZSgpLAogICAgICAgICAgICAgICAgY3VzdG9tUGF5bG9hZDogbnVsbCwKICAgICAgICAgICAgfS50b0NlbGwoKSwKICAgICAgICB9KTsKICAgIH0KCiAgICAvLyBQcm9jZXNzIGpldHRvbiByZWZ1bmQgZm9yIE9yZGVyQ29uZmlnCiAgICBmdW4gcHJvY2Vzc0pldHRvblJlZnVuZChvcmRlcjogT3JkZXJDb25maWcpIHsKICAgICAgICBsZXQgamV0dG9uV2FsbGV0ID0gc2VsZi5qZXR0b25BY2NvdW50LmdldChvcmRlci5zcmNKZXR0b25BZGRyZXNzKTsKICAgICAgICBsZXQgY3R4ID0gY29udGV4dCgpOwogICAgICAgIGxldCByZW1haW5pbmdWYWx1ZSA9IGN0eC52YWx1ZSAtIHByaWNlT2ZKZXR0b25Gb3J3YXJkKGN0eC5yZWFkRm9yd2FyZEZlZSgpLCAxKTsKICAgICAgICByZW1haW5pbmdWYWx1ZSA9IG1pbihyZW1haW5pbmdWYWx1ZSwgMCk7CiAgICAgICAgbWVzc2FnZShNZXNzYWdlUGFyYW1ldGVycyB7CiAgICAgICAgICAgIHRvOiBqZXR0b25XYWxsZXQhISwKICAgICAgICAgICAgdmFsdWU6IDAsCiAgICAgICAgICAgIG1vZGU6IFNlbmRSZW1haW5pbmdWYWx1ZSwKICAgICAgICAgICAgYm9keTogU2VuZFZpYUpldHRvblRyYW5zZmVyIHsKICAgICAgICAgICAgICAgIHF1ZXJ5SWQ6IDAsCiAgICAgICAgICAgICAgICBhbW91bnQ6IG9yZGVyLmFtb3VudCwKICAgICAgICAgICAgICAgIHJlc3BvbnNlRGVzdGluYXRpb246IG9yZGVyLnNlbmRlclB1YktleSwKICAgICAgICAgICAgICAgIGRlc3RpbmF0aW9uOiBvcmRlci5zZW5kZXJQdWJLZXksCiAgICAgICAgICAgICAgICBmb3J3YXJkVG9uQW1vdW50OiByZW1haW5pbmdWYWx1ZSwKICAgICAgICAgICAgICAgIGZvcndhcmRQYXlsb2FkOiBiZWdpbkNlbGwoKS5zdG9yZVJlZihzZXJpYWxpemVPcmRlckNvbmZpZyhvcmRlciwgMCkpLmVuZENlbGwoKS5iZWdpblBhcnNlKCksCiAgICAgICAgICAgICAgICBjdXN0b21QYXlsb2FkOiBudWxsLAogICAgICAgICAgICB9LnRvQ2VsbCgpLAogICAgICAgIH0pOwogICAgfQoKICAgIC8vIFByb2Nlc3MgamV0dG9uIHJlZnVuZCBmb3IgT3JkZXIgKFRPTl9UT19UT04pCiAgICBmdW4gcHJvY2Vzc0pldHRvblJlZnVuZE9yZGVyKG9yZGVyOiBPcmRlcikgewogICAgICAgIGxldCBqZXR0b25XYWxsZXQgPSBzZWxmLmpldHRvbkFjY291bnQuZ2V0KG9yZGVyLnNyY0pldHRvbkFkZHJlc3MpOwogICAgICAgIGxldCBjdHggPSBjb250ZXh0KCk7CiAgICAgICAgbGV0IHJlbWFpbmluZ1ZhbHVlID0gY3R4LnZhbHVlIC0gcHJpY2VPZkpldHRvbkZvcndhcmQoY3R4LnJlYWRGb3J3YXJkRmVlKCksIDEpOwogICAgICAgIHJlbWFpbmluZ1ZhbHVlID0gbWluKHJlbWFpbmluZ1ZhbHVlLCAwKTsKICAgICAgICBtZXNzYWdlKE1lc3NhZ2VQYXJhbWV0ZXJzIHsKICAgICAgICAgICAgdG86IGpldHRvbldhbGxldCEhLAogICAgICAgICAgICB2YWx1ZTogMCwKICAgICAgICAgICAgbW9kZTogU2VuZFJlbWFpbmluZ1ZhbHVlLAogICAgICAgICAgICBib2R5OiBTZW5kVmlhSmV0dG9uVHJhbnNmZXIgewogICAgICAgICAgICAgICAgcXVlcnlJZDogMCwKICAgICAgICAgICAgICAgIGFtb3VudDogb3JkZXIuYW1vdW50LAogICAgICAgICAgICAgICAgcmVzcG9uc2VEZXN0aW5hdGlvbjogb3JkZXIuc2VuZGVyUHViS2V5LAogICAgICAgICAgICAgICAgZGVzdGluYXRpb246IG9yZGVyLnNlbmRlclB1YktleSwKICAgICAgICAgICAgICAgIGZvcndhcmRUb25BbW91bnQ6IHJlbWFpbmluZ1ZhbHVlLAogICAgICAgICAgICAgICAgZm9yd2FyZFBheWxvYWQ6IGJlZ2luQ2VsbCgpLnN0b3JlUmVmKHNlcmlhbGl6ZU9yZGVyKG9yZGVyLCAwKSkuZW5kQ2VsbCgpLmJlZ2luUGFyc2UoKSwKICAgICAgICAgICAgICAgIGN1c3RvbVBheWxvYWQ6IG51bGwsCiAgICAgICAgICAgIH0udG9DZWxsKCksCiAgICAgICAgfSk7CiAgICB9CgogICAgLy8gUHJvY2VzcyBFVk0gdHJhbnNmZXIgKHBsYWNlaG9sZGVyIGZvciBjcm9zcy1jaGFpbiBmdW5jdGlvbmFsaXR5KQogICAgZnVuIHByb2Nlc3NFVk1UcmFuc2ZlcihvcmRlcjogT3JkZXJDb25maWcsIGFtb3VudDogSW50LCBzZWNyZXQ6IEludCkgewogICAgICAgIC8vIFRoaXMgd291bGQgaW50ZXJmYWNlIHdpdGggRVZNIGNoYWlucyB2aWEgb3JhY2xlcy9icmlkZ2VzCiAgICAgICAgLy8gRm9yIG5vdywganVzdCBsb2cgdGhlIHRyYW5zZmVyCiAgICB9Cn0KCg=="},"compiler":{"name":"tact","version":"1.6.13","parameters":"{\"entrypoint\":\"contracts/ton_fusion.tact\",\"options\":{\"debug\":false,\"external\":false}}"}}